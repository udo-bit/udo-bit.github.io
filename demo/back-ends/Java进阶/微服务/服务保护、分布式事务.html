<!doctype html>
<html lang="en-US" data-theme="light">
  <head>
    <meta charset="utf-8" />
    <meta name="viewport" content="width=device-width,initial-scale=1" />
    <meta name="generator" content="VuePress 2.0.0-rc.14" />
    <meta name="theme" content="VuePress Theme Hope 2.0.0-rc.52" />
    <style>
      html {
        background: var(--bg-color, #fff);
      }

      html[data-theme="dark"] {
        background: var(--bg-color, #1d1e1f);
      }

      body {
        background: var(--bg-color);
      }
    </style>
    <script>
      const userMode = localStorage.getItem("vuepress-theme-hope-scheme");
      const systemDarkMode =
        window.matchMedia &&
        window.matchMedia("(prefers-color-scheme: dark)").matches;

      if (userMode === "dark" || (userMode !== "light" && systemDarkMode)) {
        document.documentElement.setAttribute("data-theme", "dark");
      }
    </script>
    <meta property="og:url" content="https://mister-hope.github.io/demo/back-ends/Java%E8%BF%9B%E9%98%B6/%E5%BE%AE%E6%9C%8D%E5%8A%A1/%E6%9C%8D%E5%8A%A1%E4%BF%9D%E6%8A%A4%E3%80%81%E5%88%86%E5%B8%83%E5%BC%8F%E4%BA%8B%E5%8A%A1.html"><meta property="og:site_name" content="Utopia"><meta property="og:title" content="æœåŠ¡ä¿æŠ¤ä¸åˆ†å¸ƒå¼"><meta property="og:description" content="day05-æœåŠ¡ä¿æŠ¤ã€åˆ†å¸ƒå¼äº‹åŠ¡ åœ¨å¾®æœåŠ¡è¿œç¨‹è°ƒç”¨çš„è¿‡ç¨‹ä¸­ï¼Œè¿˜å­˜åœ¨å‡ ä¸ªé—®é¢˜éœ€è¦è§£å†³ã€‚ é¦–å…ˆæ˜¯ä¸šåŠ¡å¥å£®æ€§é—®é¢˜ï¼š ä¾‹å¦‚åœ¨ä¹‹å‰çš„æŸ¥è¯¢è´­ç‰©è½¦åˆ—è¡¨ä¸šåŠ¡ä¸­ï¼Œè´­ç‰©è½¦æœåŠ¡éœ€è¦æŸ¥è¯¢æœ€æ–°çš„å•†å“ä¿¡æ¯ï¼Œä¸è´­ç‰©è½¦æ•°æ®åšå¯¹æ¯”ï¼Œæé†’ç”¨æˆ·ã€‚å¤§å®¶è®¾æƒ³ä¸€ä¸‹ï¼Œå¦‚æœå•†å“æœåŠ¡æŸ¥è¯¢æ—¶å‘ç”Ÿæ•…éšœï¼ŒæŸ¥è¯¢è´­ç‰©è½¦åˆ—è¡¨åœ¨è°ƒç”¨å•†å“æœåŠ¡æ—¶ï¼Œæ˜¯ä¸æ˜¯ä¹Ÿä¼šå¼‚å¸¸ï¼Ÿä»è€Œå¯¼è‡´è´­ç‰©è½¦æŸ¥è¯¢å¤±è´¥ã€‚ä½†ä»ä¸šåŠ¡è§’åº¦æ¥è¯´ï¼Œä¸ºäº†æå‡ç”¨æˆ·ä½“..."><meta property="og:type" content="article"><meta property="og:locale" content="en-US"><meta property="og:updated_time" content="2024-09-14T16:31:33.000Z"><meta property="article:author" content="GXL"><meta property="article:modified_time" content="2024-09-14T16:31:33.000Z"><script type="application/ld+json">{"@context":"https://schema.org","@type":"Article","headline":"æœåŠ¡ä¿æŠ¤ä¸åˆ†å¸ƒå¼","image":[""],"dateModified":"2024-09-14T16:31:33.000Z","author":[{"@type":"Person","name":"GXL","url":"https://www.cnblogs.com/feel-myself","email":"gaoxiaoliang123@126.com"}]}</script><link rel="icon" href="/logo-custom.png"><title>æœåŠ¡ä¿æŠ¤ä¸åˆ†å¸ƒå¼ | Utopia</title><meta name="description" content="day05-æœåŠ¡ä¿æŠ¤ã€åˆ†å¸ƒå¼äº‹åŠ¡ åœ¨å¾®æœåŠ¡è¿œç¨‹è°ƒç”¨çš„è¿‡ç¨‹ä¸­ï¼Œè¿˜å­˜åœ¨å‡ ä¸ªé—®é¢˜éœ€è¦è§£å†³ã€‚ é¦–å…ˆæ˜¯ä¸šåŠ¡å¥å£®æ€§é—®é¢˜ï¼š ä¾‹å¦‚åœ¨ä¹‹å‰çš„æŸ¥è¯¢è´­ç‰©è½¦åˆ—è¡¨ä¸šåŠ¡ä¸­ï¼Œè´­ç‰©è½¦æœåŠ¡éœ€è¦æŸ¥è¯¢æœ€æ–°çš„å•†å“ä¿¡æ¯ï¼Œä¸è´­ç‰©è½¦æ•°æ®åšå¯¹æ¯”ï¼Œæé†’ç”¨æˆ·ã€‚å¤§å®¶è®¾æƒ³ä¸€ä¸‹ï¼Œå¦‚æœå•†å“æœåŠ¡æŸ¥è¯¢æ—¶å‘ç”Ÿæ•…éšœï¼ŒæŸ¥è¯¢è´­ç‰©è½¦åˆ—è¡¨åœ¨è°ƒç”¨å•†å“æœåŠ¡æ—¶ï¼Œæ˜¯ä¸æ˜¯ä¹Ÿä¼šå¼‚å¸¸ï¼Ÿä»è€Œå¯¼è‡´è´­ç‰©è½¦æŸ¥è¯¢å¤±è´¥ã€‚ä½†ä»ä¸šåŠ¡è§’åº¦æ¥è¯´ï¼Œä¸ºäº†æå‡ç”¨æˆ·ä½“...">
    <link rel="preload" href="/assets/style-CyGu9tNq.css" as="style"><link rel="stylesheet" href="/assets/style-CyGu9tNq.css">
    <link rel="modulepreload" href="/assets/app-B3Z58FXn.js"><link rel="modulepreload" href="/assets/æœåŠ¡ä¿æŠ¤ã€åˆ†å¸ƒå¼äº‹åŠ¡.html-B5KMvG1a.js"><link rel="modulepreload" href="/assets/plugin-vue_export-helper-DlAUqK2U.js">
    <link rel="prefetch" href="/assets/index.html-BRs4GU0L.js" as="script"><link rel="prefetch" href="/assets/intro.html-C9B25ebI.js" as="script"><link rel="prefetch" href="/assets/index.html-Ch3vNnwc.js" as="script"><link rel="prefetch" href="/assets/index.html-BCiWCdsz.js" as="script"><link rel="prefetch" href="/assets/index.html-VKY4gSh-.js" as="script"><link rel="prefetch" href="/assets/index.html-DcmkTJ91.js" as="script"><link rel="prefetch" href="/assets/Javaç¬”è®°.html-D54BSIQf.js" as="script"><link rel="prefetch" href="/assets/index.html-gy9HBZdW.js" as="script"><link rel="prefetch" href="/assets/gitç¬”è®°.html-D547pcEK.js" as="script"><link rel="prefetch" href="/assets/jenkinséƒ¨ç½²åŸºç¡€.html-BGaSJiWv.js" as="script"><link rel="prefetch" href="/assets/markdownå­¦ä¹ .html-FlINb-JB.js" as="script"><link rel="prefetch" href="/assets/nuxtå…¥é—¨.html-IhaZKl1z.js" as="script"><link rel="prefetch" href="/assets/sqlç¬”è®°.html-Zvldq1va.js" as="script"><link rel="prefetch" href="/assets/index.html-8HEVCB5S.js" as="script"><link rel="prefetch" href="/assets/cherry.html-B5RJXTO8.js" as="script"><link rel="prefetch" href="/assets/dragonfruit.html-B5Hk89Kt.js" as="script"><link rel="prefetch" href="/assets/strawberry.html-V9HWAAO7.js" as="script"><link rel="prefetch" href="/assets/tomato.html-0zohm6QN.js" as="script"><link rel="prefetch" href="/assets/index.html-BdNjf7vR.js" as="script"><link rel="prefetch" href="/assets/è‚¡ç¥¨.html-B1Z5ux7N.js" as="script"><link rel="prefetch" href="/assets/index.html-CNuzbJWA.js" as="script"><link rel="prefetch" href="/assets/index.html-wfkwm8WK.js" as="script"><link rel="prefetch" href="/assets/index.html-sIbBe9_t.js" as="script"><link rel="prefetch" href="/assets/index.html-RPvmDK4P.js" as="script"><link rel="prefetch" href="/assets/index.html-Dot6v07v.js" as="script"><link rel="prefetch" href="/assets/index.html-WUkc59Vb.js" as="script"><link rel="prefetch" href="/assets/index.html-CFe50AwI.js" as="script"><link rel="prefetch" href="/assets/1.html-fwePGjJt.js" as="script"><link rel="prefetch" href="/assets/2.html-CnV3pb93.js" as="script"><link rel="prefetch" href="/assets/3.html-DunELxho.js" as="script"><link rel="prefetch" href="/assets/4.html-CqVn4U7g.js" as="script"><link rel="prefetch" href="/assets/1.html-Ci_e_X_e.js" as="script"><link rel="prefetch" href="/assets/2.html-CFr5AS-o.js" as="script"><link rel="prefetch" href="/assets/3.html-CNFwN-Qx.js" as="script"><link rel="prefetch" href="/assets/4.html-BPREG7t8.js" as="script"><link rel="prefetch" href="/assets/DockeråŸºç¡€.html-CkLXLDgo.js" as="script"><link rel="prefetch" href="/assets/index.html-DQiVfo5R.js" as="script"><link rel="prefetch" href="/assets/GitåŸºç¡€.html-DdA3GAPm.js" as="script"><link rel="prefetch" href="/assets/index.html-BMV0h74c.js" as="script"><link rel="prefetch" href="/assets/index.html-BPSc0-6d.js" as="script"><link rel="prefetch" href="/assets/index.html-Dpqjty1D.js" as="script"><link rel="prefetch" href="/assets/Linux01.html-BHw9RXEB.js" as="script"><link rel="prefetch" href="/assets/Linux02.html-Djmo1lDf.js" as="script"><link rel="prefetch" href="/assets/index.html-CEbOjbXw.js" as="script"><link rel="prefetch" href="/assets/index.html-DdMgnmjA.js" as="script"><link rel="prefetch" href="/assets/index.html-CuoDGPfg.js" as="script"><link rel="prefetch" href="/assets/test.html-BTfDilOm.js" as="script"><link rel="prefetch" href="/assets/index.html-D4RGZGt8.js" as="script"><link rel="prefetch" href="/assets/vite_vue_tså…¶ä»–é—®é¢˜.html-nNGZQYPa.js" as="script"><link rel="prefetch" href="/assets/vite_vue_tsåŸºç¡€é…ç½®.html-BiKsCw9M.js" as="script"><link rel="prefetch" href="/assets/vite_vue_tså°è£…axiosè¯·æ±‚.html-CpgwmbyQ.js" as="script"><link rel="prefetch" href="/assets/vite_vue_tsçŠ¶æ€ç®¡ç†pinia.html-C8e5Rt6G.js" as="script"><link rel="prefetch" href="/assets/vite_vue_tsè·¯ç”±ç®¡ç†vue-router.html-BPhOcZn6.js" as="script"><link rel="prefetch" href="/assets/HTTP_Tomcat_Servlet.html-Bf8UwdY6.js" as="script"><link rel="prefetch" href="/assets/JDBCåŸºç¡€.html-BiOzw2rU.js" as="script"><link rel="prefetch" href="/assets/JSPåŸºç¡€.html-DJAGXY30.js" as="script"><link rel="prefetch" href="/assets/index.html-BBTp_AxK.js" as="script"><link rel="prefetch" href="/assets/Request_Response.html-BreDlKzM.js" as="script"><link rel="prefetch" href="/assets/mavenåŸºç¡€.html-B19Brfii.js" as="script"><link rel="prefetch" href="/assets/mybatisåŸºç¡€.html-CZQF86EE.js" as="script"><link rel="prefetch" href="/assets/mysqlåŸºç¡€.html-DxJ0HedN.js" as="script"><link rel="prefetch" href="/assets/mysqlè¿›é˜¶.html-_CGHmzQ3.js" as="script"><link rel="prefetch" href="/assets/ä¼šè¯æŠ€æœ¯.html-BbLpYG6w.js" as="script"><link rel="prefetch" href="/assets/è¿‡æ»¤å™¨_ç›‘å¬å™¨_Ajax.html-D9kAtNs9.js" as="script"><link rel="prefetch" href="/assets/index.html-BPlDTen7.js" as="script"><link rel="prefetch" href="/assets/Javaå…¥é—¨_IDEA_åŸºç¡€è¯­æ³•.html-DUahJa-k.js" as="script"><link rel="prefetch" href="/assets/index.html-baD8R9mQ.js" as="script"><link rel="prefetch" href="/assets/åŠ¨æ¼«ç¾å¥³æ‹¼å›¾.html-CUEZ117S.js" as="script"><link rel="prefetch" href="/assets/å¸¸ç”¨API01.html-C2B9KMUv.js" as="script"><link rel="prefetch" href="/assets/å¸¸ç”¨API02.html-lv27zt_a.js" as="script"><link rel="prefetch" href="/assets/å¾ªç¯è¯­å¥.html-BaYqszEQ.js" as="script"><link rel="prefetch" href="/assets/æ•°ç»„.html-CThRD53K.js" as="script"><link rel="prefetch" href="/assets/æ–¹æ³•.html-DKB6F_26.js" as="script"><link rel="prefetch" href="/assets/è¿ç®—ç¬¦_é€‰æ‹©è¯­å¥.html-jdOzltbq.js" as="script"><link rel="prefetch" href="/assets/é¢å‘å¯¹è±¡.html-Bs9lYbbO.js" as="script"><link rel="prefetch" href="/assets/index.html-LRdrTKMF.js" as="script"><link rel="prefetch" href="/assets/API_é›†åˆ.html-DmNA_HTy.js" as="script"><link rel="prefetch" href="/assets/ArrayListé›†åˆ_å­¦ç”Ÿç®¡ç†ç³»ç»Ÿ.html-LUkX1YmV.js" as="script"><link rel="prefetch" href="/assets/IO01.html-DWHtVYyz.js" as="script"><link rel="prefetch" href="/assets/IO02.html-BJTg15Q9.js" as="script"><link rel="prefetch" href="/assets/index.html-DYlX1ZhE.js" as="script"><link rel="prefetch" href="/assets/stream_File.html-BQr5eldS.js" as="script"><link rel="prefetch" href="/assets/å†…éƒ¨ç±»_Lambda_API.html-CyE2hEYN.js" as="script"><link rel="prefetch" href="/assets/åˆ†ç±»å’Œstatic.html-C5zkOjRY.js" as="script"><link rel="prefetch" href="/assets/åŸºç¡€åŠ å¼º01.html-DKwP2qLF.js" as="script"><link rel="prefetch" href="/assets/åŸºç¡€åŠ å¼º02.html-CV98H74F.js" as="script"><link rel="prefetch" href="/assets/å¤šçº¿ç¨‹.html-CLXQffcg.js" as="script"><link rel="prefetch" href="/assets/å¸¸ç”¨API_å¼‚å¸¸.html-wMHWeSXP.js" as="script"><link rel="prefetch" href="/assets/å¸¸ç”¨API.html-CCWOa2Js.js" as="script"><link rel="prefetch" href="/assets/æ¥å£å’Œå¤šæ€.html-Dw1IBkHg.js" as="script"><link rel="prefetch" href="/assets/ç»§æ‰¿.html-CqRYmkLi.js" as="script"><link rel="prefetch" href="/assets/ç½‘ç»œç¼–ç¨‹_åŸºç¡€åŠ å¼º.html-DbKXyRZc.js" as="script"><link rel="prefetch" href="/assets/é›†åˆ01.html-psHsrHbf.js" as="script"><link rel="prefetch" href="/assets/é›†åˆ02.html-wSSGH2CU.js" as="script"><link rel="prefetch" href="/assets/é¢å‘å¯¹è±¡åŸºç¡€.html-Bq14-6Ey.js" as="script"><link rel="prefetch" href="/assets/index.html-BLe0xgYM.js" as="script"><link rel="prefetch" href="/assets/RabbitMQ.html-D8u051u4.js" as="script"><link rel="prefetch" href="/assets/RabbitMQéƒ¨ç½²æŒ‡å—.html-DxM-ohOi.js" as="script"><link rel="prefetch" href="/assets/index.html-D8eDqWJG.js" as="script"><link rel="prefetch" href="/assets/RedisåŸºç¡€.html-DN7b4fKF.js" as="script"><link rel="prefetch" href="/assets/01-ç¯å¢ƒæ­å»º.html-TIOc5E8c.js" as="script"><link rel="prefetch" href="/assets/index.html-C8MkHC5B.js" as="script"><link rel="prefetch" href="/assets/day02-å®Œå–„ä¸ªäººä¿¡æ¯.html-DVHuaYYI.js" as="script"><link rel="prefetch" href="/assets/æ¢èŠ±äº¤å‹03-MongoDBåŸºç¡€.html-C5pEZTRM.js" as="script"><link rel="prefetch" href="/assets/æ¢èŠ±äº¤å‹04-åœˆå­åŠŸèƒ½å®ç°.html-CQXK9Dfa.js" as="script"><link rel="prefetch" href="/assets/æ¢èŠ±äº¤å‹05-åœˆå­äº’åŠ¨.html-BLNSjiZa.js" as="script"><link rel="prefetch" href="/assets/æ¢èŠ±äº¤å‹06-å³æ—¶é€šä¿¡.html-BtLwSbPE.js" as="script"><link rel="prefetch" href="/assets/æ¢èŠ±äº¤å‹07-æœé™„è¿‘.html-C0pazsHI.js" as="script"><link rel="prefetch" href="/assets/æ¢èŠ±äº¤å‹08-å°è§†é¢‘æ–¹æ¡ˆ.html-CivhhjZa.js" as="script"><link rel="prefetch" href="/assets/æ¢èŠ±äº¤å‹09-æ­å»ºåå°ç³»ç»Ÿ.html-CkCyPiot.js" as="script"><link rel="prefetch" href="/assets/æ¢èŠ±äº¤å‹10-æ•°æ®ç»Ÿè®¡ä¸å†…å®¹å®¡æ ¸.html-pfHGnasq.js" as="script"><link rel="prefetch" href="/assets/æ¢èŠ±äº¤å‹11-å®ç°æ¨èç³»ç»Ÿ.html-BgPiEGz6.js" as="script"><link rel="prefetch" href="/assets/æ¢èŠ±äº¤å‹å‰ç½®-dubbo.html-ByCpE5xb.js" as="script"><link rel="prefetch" href="/assets/çŸ­ä¿¡å‘é€.html-B1vtrCf-.js" as="script"><link rel="prefetch" href="/assets/01åŸºç¡€æ•°æ®å¼€å‘-æœåŠ¡ç®¡ç†.html-BUUfi4Md.js" as="script"><link rel="prefetch" href="/assets/02åŸºç¡€æ•°æ®å¼€å‘-æœåŠ¡ç®¡ç†-å‰ç«¯.html-ZaeS_ypH.js" as="script"><link rel="prefetch" href="/assets/03åŸºç¡€æ•°æ®å¼€å‘-é¢„çº¦ç®¡ç†.html-DiDuz022.js" as="script"><link rel="prefetch" href="/assets/04æƒé™è®¤è¯-åŸºç¡€.html-DcSbJuCF.js" as="script"><link rel="prefetch" href="/assets/05æƒé™è®¤è¯-SpringSecurityè®¤è¯æˆæƒ.html-BwxbFjv4.js" as="script"><link rel="prefetch" href="/assets/06æƒé™è®¤è¯-é¡¹ç›®é›†æˆ.html-CTrYp_d8.js" as="script"><link rel="prefetch" href="/assets/07å·¥ä½œæµ-Activiti7åŸºç¡€.html-Bc7qycKB.js" as="script"><link rel="prefetch" href="/assets/08å…¥é€€ç®¡ç†-å…¥ä½-1.html-CYRj0ce3.js" as="script"><link rel="prefetch" href="/assets/09å…¥é€€ç®¡ç†-å…¥ä½-2.html-B9-2edfV.js" as="script"><link rel="prefetch" href="/assets/10å…¥é€€ç®¡ç†-å…¥ä½-3.html-BSgsvBTd.js" as="script"><link rel="prefetch" href="/assets/11å…¥é€€ç®¡ç†-é€€ä½.html-Ljiw7CJj.js" as="script"><link rel="prefetch" href="/assets/12ç‰©è”ç½‘æ™ºèƒ½ç›‘æµ‹-IOTäº§å“è®¾å¤‡ç®¡ç†.html-BnLuoVSk.js" as="script"><link rel="prefetch" href="/assets/13ç‰©è”ç½‘æ™ºèƒ½ç›‘æµ‹-IOTæ¶ˆæ¯å¤„ç†.html-BST-pQFW.js" as="script"><link rel="prefetch" href="/assets/14ç‰©è”ç½‘æ™ºèƒ½ç›‘æµ‹-æŠ¥è­¦åŠä¼˜åŒ–.html-jvusTPpl.js" as="script"><link rel="prefetch" href="/assets/index.html-CEJddtP0.js" as="script"><link rel="prefetch" href="/assets/index.html-De68YXIl.js" as="script"><link rel="prefetch" href="/assets/ç‘å‰å¤–å–01.html-DdUJTZw2.js" as="script"><link rel="prefetch" href="/assets/ç‘å‰å¤–å–02.html-Clb-qId7.js" as="script"><link rel="prefetch" href="/assets/ç‘å‰å¤–å–03.html-BiZmb6Dm.js" as="script"><link rel="prefetch" href="/assets/ç‘å‰å¤–å–04.html-CNqtOCQU.js" as="script"><link rel="prefetch" href="/assets/ç‘å‰å¤–å–05.html-DD668pg6.js" as="script"><link rel="prefetch" href="/assets/ç‘å‰å¤–å–06.html-Dke4Xgh7.js" as="script"><link rel="prefetch" href="/assets/ç‘å‰å¤–å–é¡¹ç›®ä¼˜åŒ–01.html-DC48AtyX.js" as="script"><link rel="prefetch" href="/assets/ç‘å‰å¤–å–é¡¹ç›®ä¼˜åŒ–02.html-CyuOcq7v.js" as="script"><link rel="prefetch" href="/assets/ç‘å‰å¤–å–é¡¹ç›®ä¼˜åŒ–03.html-BjJw-Xea.js" as="script"><link rel="prefetch" href="/assets/Elasticsearch01.html-CbM--K6n.js" as="script"><link rel="prefetch" href="/assets/Elasticsearch02.html-CTdV9gDb.js" as="script"><link rel="prefetch" href="/assets/index.html-o4C3el0j.js" as="script"><link rel="prefetch" href="/assets/MQåŸºç¡€.html-CYuyllRs.js" as="script"><link rel="prefetch" href="/assets/MQé«˜çº§.html-D5Qedy9c.js" as="script"><link rel="prefetch" href="/assets/index.html-CqEcD5h5.js" as="script"><link rel="prefetch" href="/assets/MybatisPlus.html-BwmUJ-Uq.js" as="script"><link rel="prefetch" href="/assets/index.html-DioPM7s_.js" as="script"><link rel="prefetch" href="/assets/index.html-C_XV98i3.js" as="script"><link rel="prefetch" href="/assets/Redisé«˜çº§.html-CEy49HRo.js" as="script"><link rel="prefetch" href="/assets/index.html-UX00vw6u.js" as="script"><link rel="prefetch" href="/assets/å¾®æœåŠ¡01.html-CsiL9dA5.js" as="script"><link rel="prefetch" href="/assets/å¾®æœåŠ¡02.html-BRiMnxzb.js" as="script"><link rel="prefetch" href="/assets/å¾®æœåŠ¡è¿›é˜¶.html-Dd_v5eon.js" as="script"><link rel="prefetch" href="/assets/index.html-CEdHDiLa.js" as="script"><link rel="prefetch" href="/assets/foråµŒå¥—.html-azEaMQhn.js" as="script"><link rel="prefetch" href="/assets/ifè¯­å¥ä¸shellè¿ç®—.html-ggjO9LgO.js" as="script"><link rel="prefetch" href="/assets/ifé«˜çº§ç”¨æ³•.html-Ai8zHweO.js" as="script"><link rel="prefetch" href="/assets/shell æ•°ç»„è¯¦è§£.html-DA8kFpCj.js" as="script"><link rel="prefetch" href="/assets/shellå‡½æ•°.html-rY5b2IYo.js" as="script"><link rel="prefetch" href="/assets/shellå˜é‡è¯¦è§£.html-CRuWTaWV.js" as="script"><link rel="prefetch" href="/assets/shellå¯¹æ–‡ä»¶çš„æ“ä½œ.html-rFMX82A-.js" as="script"><link rel="prefetch" href="/assets/shellæ•°æ®ç­›é€‰ä¸å¤„ç†.html-kiySJdNS.js" as="script"><link rel="prefetch" href="/assets/shellæµç¨‹æ§åˆ¶-ifåˆ¤æ–­è¯­å¥.html-DVebH70n.js" as="script"><link rel="prefetch" href="/assets/shellè„šæœ¬ä¸­å¸¸ç”¨å‘½ä»¤å¤ä¹ .html-Dq3tKMyc.js" as="script"><link rel="prefetch" href="/assets/shellè„šæœ¬ä»‹ç».html-DDL7_LsB.js" as="script"><link rel="prefetch" href="/assets/shellè„šæœ¬å®æˆ˜æ¡ˆä¾‹-æ•°æ®ç£ç›˜åˆå§‹åŒ–.html-B53XiRrd.js" as="script"><link rel="prefetch" href="/assets/shellè„šæœ¬æ ¼å¼åŒ–è¾“å‡º.html-DHQ40PVt.js" as="script"><link rel="prefetch" href="/assets/shellè„šæœ¬æ¡ˆä¾‹-Pythonå®‰è£…è„šæœ¬.html-Bz7-EuSz.js" as="script"><link rel="prefetch" href="/assets/shellè„šæœ¬æ¡ˆä¾‹-mysqlå¤‡ä»½è„šæœ¬.html-DVZ3qtbs.js" as="script"><link rel="prefetch" href="/assets/shellè„šæœ¬æ¡ˆä¾‹-nginxå®‰è£…è„šæœ¬.html-AaUoV06B.js" as="script"><link rel="prefetch" href="/assets/shellè„šæœ¬æ¡ˆä¾‹-ä¸»æœºçŠ¶æ€ç›‘æ§è„šæœ¬.html-BdFE2tjg.js" as="script"><link rel="prefetch" href="/assets/shellè„šæœ¬æ¡ˆä¾‹-åˆ¤æ–­æœåŠ¡çŠ¶æ€.html-Do1DpqtW.js" as="script"><link rel="prefetch" href="/assets/shellè„šæœ¬æ¡ˆä¾‹-åˆ¤æ–­é—°å¹´.html-CO2LGImB.js" as="script"><link rel="prefetch" href="/assets/shellè„šæœ¬æ¡ˆä¾‹-ç›‘æ§å†…å­˜ä½¿ç”¨ç‡.html-DA_aiATl.js" as="script"><link rel="prefetch" href="/assets/shellè„šæœ¬æ¡ˆä¾‹-ç›‘æ§æ¥å£.html-ZmcnQxzv.js" as="script"><link rel="prefetch" href="/assets/shellè„šæœ¬æ¡ˆä¾‹-ç›‘æ§ç£ç›˜ä½¿ç”¨ç‡.html-BmBwq5OJ.js" as="script"><link rel="prefetch" href="/assets/shellè„šæœ¬æ¡ˆä¾‹-ç›‘æ§ç½‘å¡æµé‡.html-BLwSceJQ.js" as="script"><link rel="prefetch" href="/assets/shellè„šæœ¬æ¡ˆä¾‹-ç›®å½•åˆ¤æ–­.html-DKv_rbS8.js" as="script"><link rel="prefetch" href="/assets/shellè„šæœ¬ç”¨æˆ·äº¤äº’.html-DvVcabP2.js" as="script"><link rel="prefetch" href="/assets/shellè¿ç®—å®æˆ˜æ¡ˆä¾‹-KFCç‚¹é¤ç³»ç»Ÿ.html-DXUsZBy3.js" as="script"><link rel="prefetch" href="/assets/shellè¿ç®—è¯¦è§£.html-C_F2mFXm.js" as="script"><link rel="prefetch" href="/assets/å¾ªç¯æ§åˆ¶è¯­å¥.html-O-oI5D3P.js" as="script"><link rel="prefetch" href="/assets/æ­£åˆ™è¡¨è¾¾å¼.html-B69MZ-4I.js" as="script"><link rel="prefetch" href="/assets/æµç¨‹æ§åˆ¶-caseè¯­å¥.html-C7WRInK6.js" as="script"><link rel="prefetch" href="/assets/æµç¨‹æ§åˆ¶-forå¾ªç¯è¯­å¥.html-BIQFheCM.js" as="script"><link rel="prefetch" href="/assets/æµç¨‹æ§åˆ¶-untilè¯­å¥.html-Ysqbud2y.js" as="script"><link rel="prefetch" href="/assets/æµç¨‹æ§åˆ¶-whileå¾ªç¯.html-CWYW-8VP.js" as="script"><link rel="prefetch" href="/assets/ç¼–ç¨‹è¯­è¨€ä¸shellè„šæœ¬.html-BislDv2Y.js" as="script"><link rel="prefetch" href="/assets/index.html-EmazHUyc.js" as="script"><link rel="prefetch" href="/assets/index.html-CrZswEIh.js" as="script"><link rel="prefetch" href="/assets/Mavenè¿›é˜¶.html-CGkzmA2C.js" as="script"><link rel="prefetch" href="/assets/index.html-DNs__1w3.js" as="script"><link rel="prefetch" href="/assets/MyBatisPlusç¬”è®°.html-D6Ta-bw9.js" as="script"><link rel="prefetch" href="/assets/index.html-D78AIXjI.js" as="script"><link rel="prefetch" href="/assets/index.html-BsWSz4jo.js" as="script"><link rel="prefetch" href="/assets/SpringBoot.html-Bn22vn8B.js" as="script"><link rel="prefetch" href="/assets/index.html-x9ZJjDpX.js" as="script"><link rel="prefetch" href="/assets/SpringMVC01.html-DPIEjHrT.js" as="script"><link rel="prefetch" href="/assets/SpringMVC02.html-VYV4-YQs.js" as="script"><link rel="prefetch" href="/assets/index.html-k0zkQJb1.js" as="script"><link rel="prefetch" href="/assets/Spring01.html-BCpH4TYy.js" as="script"><link rel="prefetch" href="/assets/Spring02.html-gXhN1ldv.js" as="script"><link rel="prefetch" href="/assets/Spring03.html-GVtpMq6o.js" as="script"><link rel="prefetch" href="/assets/Nacosæ³¨å†Œä¸­å¿ƒ.html-BxXIvFbE.js" as="script"><link rel="prefetch" href="/assets/index.html-Cqp-bQVD.js" as="script"><link rel="prefetch" href="/assets/SpringCloud01.html-BiISG0ap.js" as="script"><link rel="prefetch" href="/assets/SpringCloud02.html-DXpG8T3N.js" as="script"><link rel="prefetch" href="/assets/nacosé›†ç¾¤æ­å»º.html-UcjSNrJT.js" as="script"><link rel="prefetch" href="/assets/index.html-BSlBVhk-.js" as="script"><link rel="prefetch" href="/assets/ç”¨æˆ·é‰´æƒ.html-BNAvvsJi.js" as="script"><link rel="prefetch" href="/assets/index.html-dq0NvxHu.js" as="script"><link rel="prefetch" href="/assets/ç¬¬10ç«  APIRouter.html-CASbeYmX.js" as="script"><link rel="prefetch" href="/assets/ç¬¬11ç«  è¯·æ±‚å“åº”çš„è¿›é˜¶ç”¨æ³•.html-GJUMkIy-.js" as="script"><link rel="prefetch" href="/assets/ç¬¬12ç«  å¼‚æ­¥async-await.html-BRx7ekY3.js" as="script"><link rel="prefetch" href="/assets/ç¬¬13ç«  WebSocket.html-DYtJSS2_.js" as="script"><link rel="prefetch" href="/assets/ç¬¬14ç«  éƒ¨ç½².html-D_3omCuu.js" as="script"><link rel="prefetch" href="/assets/ç¬¬15ç«  è¡¥å…….html-5s7Hdems.js" as="script"><link rel="prefetch" href="/assets/ç¬¬1ç«  å¿«é€Ÿä¸Šæ‰‹.html-Bzx4QyBW.js" as="script"><link rel="prefetch" href="/assets/ç¬¬2ç«  Pathå’ŒQuery.html-BCWVE2VO.js" as="script"><link rel="prefetch" href="/assets/ç¬¬3ç«  è¯·æ±‚å¤´å’Œè¯·æ±‚ä½“.html-Bxh8hwKu.js" as="script"><link rel="prefetch" href="/assets/ç¬¬4ç«  å“åº”å¤´å’Œå“åº”ä½“.html-BtQshY7N.js" as="script"><link rel="prefetch" href="/assets/ç¬¬5ç«  é˜¶æ®µæ€»ç»“ç»ƒä¹ .html-DrrPQXAA.js" as="script"><link rel="prefetch" href="/assets/ç¬¬6ç«  è¡¨å•å’Œä¸Šä¼ æ–‡ä»¶.html-DV0i4pT9.js" as="script"><link rel="prefetch" href="/assets/ç¬¬7ç«  ä¾èµ–æ³¨å…¥.html-CYJ1QS2e.js" as="script"><link rel="prefetch" href="/assets/ç¬¬8ç«  é›†æˆå…³ç³»å‹æ•°æ®åº“.html-BZR9fu_W.js" as="script"><link rel="prefetch" href="/assets/ç¬¬9ç«  ç™»å½•è®¤è¯ç›¸å…³.html-Bgz1BjOt.js" as="script"><link rel="prefetch" href="/assets/01- pnpmä»‹ç».html-BfqVOsWB.js" as="script"><link rel="prefetch" href="/assets/02-åˆå§‹åŒ–é¡¹ç›®.html-9sEbawEB.js" as="script"><link rel="prefetch" href="/assets/03-ä»£ç è§„èŒƒå·¥å…·.html-CxQRj7l5.js" as="script"><link rel="prefetch" href="/assets/04-é…ç½®husky.html-Cxm_9icY.js" as="script"><link rel="prefetch" href="/assets/05-é¡¹ç›®é…ç½®(ä¸Š).html-CT2FXq2a.js" as="script"><link rel="prefetch" href="/assets/06-é…ç½®é¡¹ç›®ä¸­unocss.html-CknG68ZA.js" as="script"><link rel="prefetch" href="/assets/07-é¡¹ç›®é…ç½®(ä¸‹).html-yp1x2xXx.js" as="script"><link rel="prefetch" href="/assets/08-è·¯ç”±é…ç½®.html-CgWUAwaW.js" as="script"><link rel="prefetch" href="/assets/09-piniaé…ç½®.html-D1b-XAMl.js" as="script"><link rel="prefetch" href="/assets/10-naive-uiå…¨å±€é…ç½®.html-Ctfmsx7R.js" as="script"><link rel="prefetch" href="/assets/11-å¸ƒå±€å…¨å±€é…ç½®.html-DtMWHxHT.js" as="script"><link rel="prefetch" href="/assets/12-åŸºç¡€å¸ƒå±€.html-Cb7JjQn5.js" as="script"><link rel="prefetch" href="/assets/13-æ··åˆå¸ƒå±€å¼€å‘(ä¸Š).html-DZ5Zrfwr.js" as="script"><link rel="prefetch" href="/assets/14-æ··åˆå¸ƒå±€å¼€å‘(ä¸­).html-De9KTu8k.js" as="script"><link rel="prefetch" href="/assets/15-æ··åˆå¸ƒå±€å¼€å‘(ä¸‹).html-BiPfZbgW.js" as="script"><link rel="prefetch" href="/assets/16-ä¾§è¾¹æ å¸ƒå±€.html-B1ZAwH-j.js" as="script"><link rel="prefetch" href="/assets/17-å¸ƒå±€åŠŸèƒ½å®Œå–„.html-BMr-_4Ei.js" as="script"><link rel="prefetch" href="/assets/18-é¡¶éƒ¨é€šæ å¸ƒå±€.html-CsdPr90c.js" as="script"><link rel="prefetch" href="/assets/19-ç§»åŠ¨ç«¯æ¨¡å¼å¼€å‘.html-Cc1a9FRg.js" as="script"><link rel="prefetch" href="/assets/20-ç§»åŠ¨ç«¯å¸ƒå±€å¼€å‘.html-YgS19ceQ.js" as="script"><link rel="prefetch" href="/assets/21-å¸ƒå±€åˆ‡æ¢æŠ½å±‰å¼€å‘.html-BKJsM00u.js" as="script"><link rel="prefetch" href="/assets/22-å¸ƒå±€ç¼©ç•¥å›¾å¼€å‘.html-DGWYXb9U.js" as="script"><link rel="prefetch" href="/assets/23-å¸ƒå±€ç¼©ç•¥å›¾å³æˆ.html-BFCNhM_n.js" as="script"><link rel="prefetch" href="/assets/24-æ•´ä½“é£æ ¼é…ç½®å¼€å‘.html-Cr8p2FFN.js" as="script"><link rel="prefetch" href="/assets/25-æš—é»‘ä¸»é¢˜å¼€å‘.html-z20V3QDp.js" as="script"><link rel="prefetch" href="/assets/26-åŠ¨æ€åˆ‡æ¢æš—é»‘ä¸»é¢˜.html-BPnx4hm3.js" as="script"><link rel="prefetch" href="/assets/27-æš—é»‘ä¸»é¢˜æ ·å¼ä¼˜åŒ–.html-B4aQ79BU.js" as="script"><link rel="prefetch" href="/assets/28-å®ç°å¤šä¸»é¢˜åˆ‡æ¢.html-TooQKC0O.js" as="script"><link rel="prefetch" href="/assets/29-å¤šè¯­è¨€é…ç½®.html-meJxKADg.js" as="script"><link rel="prefetch" href="/assets/30-å¸ƒå±€æ”¯æŒå¤šè¯­è¨€.html-CepMLkqj.js" as="script"><link rel="prefetch" href="/assets/31-axioså°è£…(ä¸Š).html-Cf2r32tW.js" as="script"><link rel="prefetch" href="/assets/32-axioså°è£…(ä¸‹).html-Bs1geFsk.js" as="script"><link rel="prefetch" href="/assets/33-ç™»é™†é¡µé¢å¸ƒå±€å¼€å‘.html-DOI2AC7g.js" as="script"><link rel="prefetch" href="/assets/34-ç”¨æˆ·å…±äº«çŠ¶æ€å°è£….html-g999sfuv.js" as="script"><link rel="prefetch" href="/assets/35-è´¦å·ç™»é™†ä¸šåŠ¡é€»è¾‘å¼€å‘.html-CqsO6DDL.js" as="script"><link rel="prefetch" href="/assets/36-æ‰‹æœºå·ç™»é™†ä¸šåŠ¡é€»è¾‘å¼€å‘.html-Bh-DL5dE.js" as="script"><link rel="prefetch" href="/assets/37-è·¯ç”±æ‹¦æˆªå’Œç™½åå•.html-CAhvn-lB.js" as="script"><link rel="prefetch" href="/assets/38-å¸ƒå±€å¤šè¯­è¨€ç»„ä»¶å¼€å‘.html-DfEnHV51.js" as="script"><link rel="prefetch" href="/assets/39-å¸ƒå±€ç”¨æˆ·ä¿¡æ¯å¼€å‘.html-CSZCC_Mg.js" as="script"><link rel="prefetch" href="/assets/40-å¸ƒå±€æ¶ˆæ¯é€šçŸ¥å¼€å‘.html-VG4B1V72.js" as="script"><link rel="prefetch" href="/assets/41-å¸ƒå±€æ¶ˆæ¯é€šçŸ¥å¼€å‘ ä½œä¸š.html-DDTcVB37.js" as="script"><link rel="prefetch" href="/assets/42-æ··åˆå¸ƒå±€èœå•å¼€å‘.html-StJ-xjA3.js" as="script"><link rel="prefetch" href="/assets/43-åˆ’åˆ†é™æ€è·¯ç”±å’ŒåŠ¨æ€è·¯ç”±.html-Bvhb4jxs.js" as="script"><link rel="prefetch" href="/assets/44-åŠ¨æ€è·¯ç”±åŸºç¡€é…ç½®.html-CmchLwGF.js" as="script"><link rel="prefetch" href="/assets/45-åç«¯åŠ¨æ€è·¯ç”±åŸºç¡€é…ç½®.html-DV03w9CD.js" as="script"><link rel="prefetch" href="/assets/46-åŠ¨æ€ç”Ÿæˆä¾§è¾¹æ æ•°æ®.html-Bckff4NS.js" as="script"><link rel="prefetch" href="/assets/47-ä¾§è¾¹æ è·¯ç”±è·³è½¬åŠŸèƒ½.html-6eq3005a.js" as="script"><link rel="prefetch" href="/assets/48-ä¾§è¾¹æ è·¯ç”±å›¾æ ‡.html-C5cL8zJi.js" as="script"><link rel="prefetch" href="/assets/49-å®ç°ä¾§è¾¹æ å¤šè¯­è¨€.html-DCbmLHRg.js" as="script"><link rel="prefetch" href="/assets/50-èœå•æ¿€æ´»åŠŸèƒ½.html-CvVB90Np.js" as="script"><link rel="prefetch" href="/assets/51-å¤šé¡µç­¾åŠŸèƒ½åˆ†æ.html-DiPytBCn.js" as="script"><link rel="prefetch" href="/assets/52-å¤šé¡µç­¾åŠŸèƒ½æµ‹è¯•.html-CKZHAV6b.js" as="script"><link rel="prefetch" href="/assets/53-å¤šé¡µç­¾è·¯ç”±åŠŸèƒ½è°ƒæ•´.html-DQWXuqkT.js" as="script"><link rel="prefetch" href="/assets/54-å¤šé¡µç­¾åŸºç¡€åŠŸèƒ½å®ç°.html-D7pX9MPF.js" as="script"><link rel="prefetch" href="/assets/55-å¤šé¡µç­¾æ•°æ®çŠ¶æ€ç®¡ç†.html-DCb_-gei.js" as="script"><link rel="prefetch" href="/assets/56-å¤šé¡µç­¾è·¯ç”±æ•°æ®ç®¡ç†.html-CKMBD9v_.js" as="script"><link rel="prefetch" href="/assets/57-å¤šé¡µç­¾æ“ä½œåˆ—è¡¨åŠŸèƒ½å¼€å‘.html-DmNSaD2C.js" as="script"><link rel="prefetch" href="/assets/58-å¤šé¡µç­¾å³é”®èœå•åŠŸèƒ½å¼€å‘.html-BSHWMOao.js" as="script"><link rel="prefetch" href="/assets/59-å¤šé¡µç­¾åŠŸèƒ½å¼€å‘æ€»ç»“.html-IKsllC7e.js" as="script"><link rel="prefetch" href="/assets/60-åç»­è¯·ç›´æ¥è§‚çœ‹è¯¾ç¨‹è§†é¢‘.html-DvBqCjyo.js" as="script"><link rel="prefetch" href="/assets/index.html-DMd0ZfST.js" as="script"><link rel="prefetch" href="/assets/index.html-BaoGOpL4.js" as="script"><link rel="prefetch" href="/assets/disable.html-KobHXtMo.js" as="script"><link rel="prefetch" href="/assets/encrypt.html-D05pMOHn.js" as="script"><link rel="prefetch" href="/assets/layout.html-BbRSMJo5.js" as="script"><link rel="prefetch" href="/assets/markdown.html-Ds5xI5fd.js" as="script"><link rel="prefetch" href="/assets/markdownå­¦ä¹ .html-CzlFVdGE.js" as="script"><link rel="prefetch" href="/assets/page.html-BXIsKt_9.js" as="script"><link rel="prefetch" href="/assets/404.html-SblAWMVD.js" as="script"><link rel="prefetch" href="/assets/index.html-C_n9A6xB.js" as="script"><link rel="prefetch" href="/assets/index.html-BPluZdgg.js" as="script"><link rel="prefetch" href="/assets/index.html-BB5_Jnm3.js" as="script"><link rel="prefetch" href="/assets/index.html-B-E6T7JV.js" as="script"><link rel="prefetch" href="/assets/index.html-OjSm-C7V.js" as="script"><link rel="prefetch" href="/assets/index.html-DBCiIsmC.js" as="script"><link rel="prefetch" href="/assets/index.html-Bfziba4b.js" as="script"><link rel="prefetch" href="/assets/index.html-ChCvKXso.js" as="script"><link rel="prefetch" href="/assets/index.html-Cg35wNQL.js" as="script"><link rel="prefetch" href="/assets/index.html-CtL14cLV.js" as="script"><link rel="prefetch" href="/assets/index.html-CR6TZXE1.js" as="script"><link rel="prefetch" href="/assets/index.html-BWeGW74o.js" as="script"><link rel="prefetch" href="/assets/index.html-N0Ne0ckM.js" as="script"><link rel="prefetch" href="/assets/index.html-BjmloUMf.js" as="script"><link rel="prefetch" href="/assets/index.html-rGHaYkMQ.js" as="script"><link rel="prefetch" href="/assets/index.html-2wzq7C0Q.js" as="script"><link rel="prefetch" href="/assets/index.html-cNzO6mHP.js" as="script"><link rel="prefetch" href="/assets/index.html-Dz-5zsC3.js" as="script"><link rel="prefetch" href="/assets/index.html-Bk68Et16.js" as="script"><link rel="prefetch" href="/assets/index.html-Bsug9mb5.js" as="script"><link rel="prefetch" href="/assets/index.html-C7JaJd2N.js" as="script"><link rel="prefetch" href="/assets/index.html-CmBCtapf.js" as="script"><link rel="prefetch" href="/assets/index.html-hNeY72Hj.js" as="script"><link rel="prefetch" href="/assets/index.html-DpgRUmGo.js" as="script"><link rel="prefetch" href="/assets/index.html-CkjNDNAg.js" as="script"><link rel="prefetch" href="/assets/index.html-C4bYFc6d.js" as="script"><link rel="prefetch" href="/assets/index.html-BKMbY4wm.js" as="script"><link rel="prefetch" href="/assets/index.html-BBjCp7iW.js" as="script"><link rel="prefetch" href="/assets/index.html-CIwz19TE.js" as="script"><link rel="prefetch" href="/assets/index.html-DYfpj7Xv.js" as="script"><link rel="prefetch" href="/assets/index.html-xL3vVvob.js" as="script"><link rel="prefetch" href="/assets/index.html-Bgq_ofVH.js" as="script"><link rel="prefetch" href="/assets/index.html-CSc_YJmb.js" as="script"><link rel="prefetch" href="/assets/index.html-CS5ZfOQl.js" as="script"><link rel="prefetch" href="/assets/index.html-gIv11e2M.js" as="script"><link rel="prefetch" href="/assets/index.html-BIjNespt.js" as="script"><link rel="prefetch" href="/assets/index.html-CP55Vta4.js" as="script"><link rel="prefetch" href="/assets/index.html-CYIeQxur.js" as="script"><link rel="prefetch" href="/assets/index.html-CHGCqTOA.js" as="script"><link rel="prefetch" href="/assets/index.html-SzkANZN0.js" as="script"><link rel="prefetch" href="/assets/index.html-CnN9HsyA.js" as="script"><link rel="prefetch" href="/assets/index.html-DzqGOyqH.js" as="script"><link rel="prefetch" href="/assets/index.html-fgCIEkZl.js" as="script"><link rel="prefetch" href="/assets/index.html-D6TUUBDd.js" as="script"><link rel="prefetch" href="/assets/index.html-CzI2_zza.js" as="script"><link rel="prefetch" href="/assets/index.html-DsvlBMST.js" as="script"><link rel="prefetch" href="/assets/index.html-BmB29zWO.js" as="script"><link rel="prefetch" href="/assets/index.html-ChIA24vX.js" as="script"><link rel="prefetch" href="/assets/index.html-DGge2Pr9.js" as="script"><link rel="prefetch" href="/assets/index.html-e7R-_O1I.js" as="script"><link rel="prefetch" href="/assets/index.html-CqlVUp9f.js" as="script"><link rel="prefetch" href="/assets/index.html-B14qzaoZ.js" as="script"><link rel="prefetch" href="/assets/photoswipe.esm-GXRgw7eJ.js" as="script">
  </head>
  <body>
    <div id="app"><!--[--><!--[--><!--[--><span tabindex="-1"></span><a href="#main-content" class="vp-skip-link sr-only">Skip to main content</a><!--]--><div class="theme-container external-link-icon has-toc"><!--[--><header id="navbar" class="vp-navbar"><div class="vp-navbar-start"><button type="button" class="vp-toggle-sidebar-button" title="Toggle Sidebar"><span class="icon"></span></button><!----><!--[--><a class="route-link vp-brand" href="/"><img class="vp-nav-logo" src="/logo-custom.png" alt><!----><span class="vp-site-name hide-in-pad">Utopia</span></a><!--]--><!----></div><div class="vp-navbar-center"><!----><!--[--><nav class="vp-nav-links"><div class="vp-nav-item hide-in-mobile"><a class="route-link auto-link" href="/" aria-label="é¦–é¡µ"><!--[--><span class="font-icon icon iconfont icon-home" style=""></span><!--]-->é¦–é¡µ<!----></a></div><div class="vp-nav-item hide-in-mobile"><a class="route-link route-link-active auto-link" href="/demo/" aria-label="æŠ€æœ¯"><!--[--><span class="font-icon icon iconfont icon-kexuejishu-" style=""></span><!--]-->æŠ€æœ¯<!----></a></div><div class="vp-nav-item hide-in-mobile"><a class="route-link auto-link" href="/plans/" aria-label="è®¡åˆ’"><!--[--><span class="font-icon icon iconfont icon-plan" style=""></span><!--]-->è®¡åˆ’<!----></a></div><div class="vp-nav-item hide-in-mobile"><a class="route-link auto-link" href="/others/" aria-label="ç¬”è®°"><!--[--><span class="font-icon icon iconfont icon-code" style=""></span><!--]-->ç¬”è®°<!----></a></div><div class="vp-nav-item hide-in-mobile"><a class="route-link auto-link" href="/links/" aria-label="å‹é“¾"><!--[--><span class="font-icon icon iconfont icon-wenjianjia" style=""></span><!--]-->å‹é“¾<!----></a></div><div class="vp-nav-item hide-in-mobile"><div class="vp-dropdown-wrapper"><button type="button" class="vp-dropdown-title" aria-label="å‚è€ƒ"><!--[--><span class="font-icon icon iconfont icon-book" style=""></span>å‚è€ƒ<!--]--><span class="arrow"></span><ul class="vp-dropdown"><li class="vp-dropdown-item"><a class="auto-link external-link" href="https://www.cnblogs.com/feel-myself/" aria-label="åšå®¢å›­" rel="noopener noreferrer" target="_blank"><!--[--><span class="font-icon icon iconfont icon-blog" style=""></span><!--]-->åšå®¢å›­<!----></a></li><li class="vp-dropdown-item"><a class="auto-link external-link" href="https://theme-hope.vuejs.press/zh/" aria-label="HOPEæ–‡æ¡£" rel="noopener noreferrer" target="_blank"><!--[--><span class="font-icon icon iconfont icon-book" style=""></span><!--]-->HOPEæ–‡æ¡£<!----></a></li><li class="vp-dropdown-item"><a class="auto-link external-link" href="https://cn.vitejs.dev/" aria-label="VITEå®˜æ–¹æ–‡æ¡£" rel="noopener noreferrer" target="_blank"><!--[--><span class="font-icon icon iconfont icon-book" style=""></span><!--]-->VITEå®˜æ–¹æ–‡æ¡£<!----></a></li><li class="vp-dropdown-item"><a class="auto-link external-link" href="https://cn.vuejs.org/" aria-label="VUEå®˜æ–¹æ–‡æ¡£" rel="noopener noreferrer" target="_blank"><!--[--><span class="font-icon icon iconfont icon-book" style=""></span><!--]-->VUEå®˜æ–¹æ–‡æ¡£<!----></a></li><li class="vp-dropdown-item"><a class="auto-link external-link" href="https://www.naiveui.com/zh-CN/os-theme" aria-label="Naive UIå®˜æ–¹æ–‡æ¡£" rel="noopener noreferrer" target="_blank"><!--[--><span class="font-icon icon iconfont icon-book" style=""></span><!--]-->Naive UIå®˜æ–¹æ–‡æ¡£<!----></a></li></ul></button></div></div></nav><!--]--><!----></div><div class="vp-navbar-end"><!----><!--[--><!----><div class="vp-nav-item vp-action"><a class="vp-action-link" href="https://github.com/udo-bit/udo-bit.github.io" target="_blank" rel="noopener noreferrer" aria-label="GitHub"><svg xmlns="http://www.w3.org/2000/svg" class="icon github-icon" viewBox="0 0 1024 1024" fill="currentColor" aria-label="github icon" name="github" style="width:1.25rem;height:1.25rem;vertical-align:middle;"><path d="M511.957 21.333C241.024 21.333 21.333 240.981 21.333 512c0 216.832 140.544 400.725 335.574 465.664 24.49 4.395 32.256-10.07 32.256-23.083 0-11.69.256-44.245 0-85.205-136.448 29.61-164.736-64.64-164.736-64.64-22.315-56.704-54.4-71.765-54.4-71.765-44.587-30.464 3.285-29.824 3.285-29.824 49.195 3.413 75.179 50.517 75.179 50.517 43.776 75.008 114.816 53.333 142.762 40.79 4.523-31.66 17.152-53.377 31.19-65.537-108.971-12.458-223.488-54.485-223.488-242.602 0-53.547 19.114-97.323 50.517-131.67-5.035-12.33-21.93-62.293 4.779-129.834 0 0 41.258-13.184 134.912 50.346a469.803 469.803 0 0 1 122.88-16.554c41.642.213 83.626 5.632 122.88 16.554 93.653-63.488 134.784-50.346 134.784-50.346 26.752 67.541 9.898 117.504 4.864 129.834 31.402 34.347 50.474 78.123 50.474 131.67 0 188.586-114.73 230.016-224.042 242.09 17.578 15.232 33.578 44.672 33.578 90.454v135.85c0 13.142 7.936 27.606 32.854 22.87C862.25 912.597 1002.667 728.747 1002.667 512c0-271.019-219.648-490.667-490.71-490.667z"></path></svg></a></div><div class="vp-nav-item hide-in-mobile"><button type="button" class="vp-color-mode-switch" id="color-mode-switch"><svg xmlns="http://www.w3.org/2000/svg" class="icon auto-icon" viewBox="0 0 1024 1024" fill="currentColor" aria-label="auto icon" name="auto" style="display:block;"><path d="M512 992C246.92 992 32 777.08 32 512S246.92 32 512 32s480 214.92 480 480-214.92 480-480 480zm0-840c-198.78 0-360 161.22-360 360 0 198.84 161.22 360 360 360s360-161.16 360-360c0-198.78-161.22-360-360-360zm0 660V212c165.72 0 300 134.34 300 300 0 165.72-134.28 300-300 300z"></path></svg><svg xmlns="http://www.w3.org/2000/svg" class="icon dark-icon" viewBox="0 0 1024 1024" fill="currentColor" aria-label="dark icon" name="dark" style="display:none;"><path d="M524.8 938.667h-4.267a439.893 439.893 0 0 1-313.173-134.4 446.293 446.293 0 0 1-11.093-597.334A432.213 432.213 0 0 1 366.933 90.027a42.667 42.667 0 0 1 45.227 9.386 42.667 42.667 0 0 1 10.24 42.667 358.4 358.4 0 0 0 82.773 375.893 361.387 361.387 0 0 0 376.747 82.774 42.667 42.667 0 0 1 54.187 55.04 433.493 433.493 0 0 1-99.84 154.88 438.613 438.613 0 0 1-311.467 128z"></path></svg><svg xmlns="http://www.w3.org/2000/svg" class="icon light-icon" viewBox="0 0 1024 1024" fill="currentColor" aria-label="light icon" name="light" style="display:none;"><path d="M952 552h-80a40 40 0 0 1 0-80h80a40 40 0 0 1 0 80zM801.88 280.08a41 41 0 0 1-57.96-57.96l57.96-58a41.04 41.04 0 0 1 58 58l-58 57.96zM512 752a240 240 0 1 1 0-480 240 240 0 0 1 0 480zm0-560a40 40 0 0 1-40-40V72a40 40 0 0 1 80 0v80a40 40 0 0 1-40 40zm-289.88 88.08-58-57.96a41.04 41.04 0 0 1 58-58l57.96 58a41 41 0 0 1-57.96 57.96zM192 512a40 40 0 0 1-40 40H72a40 40 0 0 1 0-80h80a40 40 0 0 1 40 40zm30.12 231.92a41 41 0 0 1 57.96 57.96l-57.96 58a41.04 41.04 0 0 1-58-58l58-57.96zM512 832a40 40 0 0 1 40 40v80a40 40 0 0 1-80 0v-80a40 40 0 0 1 40-40zm289.88-88.08 58 57.96a41.04 41.04 0 0 1-58 58l-57.96-58a41 41 0 0 1 57.96-57.96z"></path></svg></button></div><!----><!--]--><!----><button type="button" class="vp-toggle-navbar-button" aria-label="Toggle Navbar" aria-expanded="false" aria-controls="nav-screen"><span><span class="vp-top"></span><span class="vp-middle"></span><span class="vp-bottom"></span></span></button></div></header><!----><!--]--><!----><div class="toggle-sidebar-wrapper"><span class="arrow start"></span></div><aside id="sidebar" class="vp-sidebar"><!----><ul class="vp-sidebar-links"><li><section class="vp-sidebar-group"><p class="vp-sidebar-header active"><span class="font-icon icon iconfont icon-houduankaifa" style=""></span><span class="vp-sidebar-title">åç«¯å¼€å‘</span><!----></p><ul class="vp-sidebar-links"><li><section class="vp-sidebar-group"><button class="vp-sidebar-header clickable" type="button"><span class="font-icon icon iconfont icon-docker" style=""></span><span class="vp-sidebar-title">Docker</span><span class="vp-arrow end"></span></button><!----></section></li><li><section class="vp-sidebar-group"><button class="vp-sidebar-header clickable" type="button"><span class="font-icon icon iconfont icon-git2" style=""></span><span class="vp-sidebar-title">Git</span><span class="vp-arrow end"></span></button><!----></section></li><li><section class="vp-sidebar-group"><button class="vp-sidebar-header clickable" type="button"><span class="font-icon icon iconfont icon-java" style=""></span><span class="vp-sidebar-title">JavaåŸºç¡€</span><span class="vp-arrow end"></span></button><!----></section></li><li><section class="vp-sidebar-group"><button class="vp-sidebar-header clickable active" type="button"><span class="font-icon icon iconfont icon-java" style=""></span><span class="vp-sidebar-title">Javaè¿›é˜¶</span><span class="vp-arrow down"></span></button><ul class="vp-sidebar-links"><li><section class="vp-sidebar-group"><button class="vp-sidebar-header clickable" type="button"><span class="font-icon icon iconfont icon-esclient" style=""></span><span class="vp-sidebar-title">ESæŸ¥è¯¢</span><span class="vp-arrow end"></span></button><!----></section></li><li><section class="vp-sidebar-group"><button class="vp-sidebar-header clickable" type="button"><span class="font-icon icon iconfont icon-rabbit-mq" style=""></span><span class="vp-sidebar-title">MQ</span><span class="vp-arrow end"></span></button><!----></section></li><li><section class="vp-sidebar-group"><button class="vp-sidebar-header clickable" type="button"><span class="font-icon icon iconfont icon-mybatisplus" style=""></span><span class="vp-sidebar-title">MybatisPlus</span><span class="vp-arrow end"></span></button><!----></section></li><li><section class="vp-sidebar-group"><button class="vp-sidebar-header clickable" type="button"><span class="font-icon icon iconfont icon-redis" style=""></span><span class="vp-sidebar-title">Redisè¿›é˜¶</span><span class="vp-arrow end"></span></button><!----></section></li><li><section class="vp-sidebar-group"><button class="vp-sidebar-header clickable active" type="button"><span class="font-icon icon iconfont icon-weifuwu" style=""></span><span class="vp-sidebar-title">å¾®æœåŠ¡</span><span class="vp-arrow down"></span></button><ul class="vp-sidebar-links"><li><a class="route-link auto-link vp-sidebar-link" href="/demo/back-ends/Java%E8%BF%9B%E9%98%B6/%E5%BE%AE%E6%9C%8D%E5%8A%A1/%E5%BE%AE%E6%9C%8D%E5%8A%A101.html" aria-label="æœåŠ¡æ³¨å†Œä¸å‘ç°"><!--[--><span class="font-icon icon iconfont icon-code" style=""></span><!--]-->æœåŠ¡æ³¨å†Œä¸å‘ç°<!----></a></li><li><a class="route-link auto-link vp-sidebar-link" href="/demo/back-ends/Java%E8%BF%9B%E9%98%B6/%E5%BE%AE%E6%9C%8D%E5%8A%A1/%E5%BE%AE%E6%9C%8D%E5%8A%A102.html" aria-label="å¾®æœåŠ¡ç½‘å…³"><!--[--><span class="font-icon icon iconfont icon-code" style=""></span><!--]-->å¾®æœåŠ¡ç½‘å…³<!----></a></li><li><a class="route-link route-link-active auto-link vp-sidebar-link active" href="/demo/back-ends/Java%E8%BF%9B%E9%98%B6/%E5%BE%AE%E6%9C%8D%E5%8A%A1/%E6%9C%8D%E5%8A%A1%E4%BF%9D%E6%8A%A4%E3%80%81%E5%88%86%E5%B8%83%E5%BC%8F%E4%BA%8B%E5%8A%A1.html" aria-label="æœåŠ¡ä¿æŠ¤ä¸åˆ†å¸ƒå¼"><!--[--><span class="font-icon icon iconfont icon-code" style=""></span><!--]-->æœåŠ¡ä¿æŠ¤ä¸åˆ†å¸ƒå¼<!----></a></li><li><a class="route-link auto-link vp-sidebar-link" href="/demo/back-ends/Java%E8%BF%9B%E9%98%B6/%E5%BE%AE%E6%9C%8D%E5%8A%A1/%E5%BE%AE%E6%9C%8D%E5%8A%A1%E8%BF%9B%E9%98%B6.html" aria-label="å¾®æœåŠ¡è¿›é˜¶"><!--[--><span class="font-icon icon iconfont icon-code" style=""></span><!--]-->å¾®æœåŠ¡è¿›é˜¶<!----></a></li></ul></section></li></ul></section></li><li><section class="vp-sidebar-group"><button class="vp-sidebar-header clickable" type="button"><span class="font-icon icon iconfont icon-linux" style=""></span><span class="vp-sidebar-title">Linux</span><span class="vp-arrow end"></span></button><!----></section></li><li><section class="vp-sidebar-group"><button class="vp-sidebar-header clickable" type="button"><span class="font-icon icon iconfont icon-python" style=""></span><span class="vp-sidebar-title">python</span><span class="vp-arrow end"></span></button><!----></section></li></ul></section></li></ul><!----></aside><!--[--><main id="main-content" class="vp-page"><!--[--><!----><!----><nav class="vp-breadcrumb disable"></nav><div class="vp-page-title"><h1><span class="font-icon icon iconfont icon-code" style=""></span>æœåŠ¡ä¿æŠ¤ä¸åˆ†å¸ƒå¼</h1><div class="page-info"><span class="page-author-info" aria-label="AuthorğŸ–Š" data-balloon-pos="up"><svg xmlns="http://www.w3.org/2000/svg" class="icon author-icon" viewBox="0 0 1024 1024" fill="currentColor" aria-label="author icon" name="author"><path d="M649.6 633.6c86.4-48 147.2-144 147.2-249.6 0-160-128-288-288-288s-288 128-288 288c0 108.8 57.6 201.6 147.2 249.6-121.6 48-214.4 153.6-240 288-3.2 9.6 0 19.2 6.4 25.6 3.2 9.6 12.8 12.8 22.4 12.8h704c9.6 0 19.2-3.2 25.6-12.8 6.4-6.4 9.6-16 6.4-25.6-25.6-134.4-121.6-240-243.2-288z"></path></svg><span><a class="page-author-item" href="https://www.cnblogs.com/feel-myself" target="_blank" rel="noopener noreferrer">GXL</a></span><span property="author" content="GXL"></span></span><!----><span class="page-date-info" aria-label="Writing DateğŸ“…" data-balloon-pos="up"><svg xmlns="http://www.w3.org/2000/svg" class="icon calendar-icon" viewBox="0 0 1024 1024" fill="currentColor" aria-label="calendar icon" name="calendar"><path d="M716.4 110.137c0-18.753-14.72-33.473-33.472-33.473-18.753 0-33.473 14.72-33.473 33.473v33.473h66.993v-33.473zm-334.87 0c0-18.753-14.72-33.473-33.473-33.473s-33.52 14.72-33.52 33.473v33.473h66.993v-33.473zm468.81 33.52H716.4v100.465c0 18.753-14.72 33.473-33.472 33.473a33.145 33.145 0 01-33.473-33.473V143.657H381.53v100.465c0 18.753-14.72 33.473-33.473 33.473a33.145 33.145 0 01-33.473-33.473V143.657H180.6A134.314 134.314 0 0046.66 277.595v535.756A134.314 134.314 0 00180.6 947.289h669.74a134.36 134.36 0 00133.94-133.938V277.595a134.314 134.314 0 00-133.94-133.938zm33.473 267.877H147.126a33.145 33.145 0 01-33.473-33.473c0-18.752 14.72-33.473 33.473-33.473h736.687c18.752 0 33.472 14.72 33.472 33.473a33.145 33.145 0 01-33.472 33.473z"></path></svg><span><!----></span><meta property="datePublished" content="2024-09-14T16:31:33.000Z"></span><!----><span class="page-reading-time-info" aria-label="Reading TimeâŒ›" data-balloon-pos="up"><svg xmlns="http://www.w3.org/2000/svg" class="icon timer-icon" viewBox="0 0 1024 1024" fill="currentColor" aria-label="timer icon" name="timer"><path d="M799.387 122.15c4.402-2.978 7.38-7.897 7.38-13.463v-1.165c0-8.933-7.38-16.312-16.312-16.312H256.33c-8.933 0-16.311 7.38-16.311 16.312v1.165c0 5.825 2.977 10.874 7.637 13.592 4.143 194.44 97.22 354.963 220.201 392.763-122.204 37.542-214.893 196.511-220.2 389.397-4.661 5.049-7.638 11.651-7.638 19.03v5.825h566.49v-5.825c0-7.379-2.849-13.981-7.509-18.9-5.049-193.016-97.867-351.985-220.2-389.527 123.24-37.67 216.446-198.453 220.588-392.892zM531.16 450.445v352.632c117.674 1.553 211.787 40.778 211.787 88.676H304.097c0-48.286 95.149-87.382 213.728-88.676V450.445c-93.077-3.107-167.901-81.297-167.901-177.093 0-8.803 6.99-15.793 15.793-15.793 8.803 0 15.794 6.99 15.794 15.793 0 80.261 63.69 145.635 142.01 145.635s142.011-65.374 142.011-145.635c0-8.803 6.99-15.793 15.794-15.793s15.793 6.99 15.793 15.793c0 95.019-73.789 172.82-165.96 177.093z"></path></svg><span>About 29 min</span><meta property="timeRequired" content="PT29M"></span><span class="page-category-info" aria-label="CategoryğŸŒˆ" data-balloon-pos="up"><svg xmlns="http://www.w3.org/2000/svg" class="icon category-icon" viewBox="0 0 1024 1024" fill="currentColor" aria-label="category icon" name="category"><path d="M148.41 106.992h282.176c22.263 0 40.31 18.048 40.31 40.31V429.48c0 22.263-18.047 40.31-40.31 40.31H148.41c-22.263 0-40.311-18.047-40.311-40.31V147.302c0-22.263 18.048-40.31 40.311-40.31zM147.556 553.478H429.73c22.263 0 40.311 18.048 40.311 40.31v282.176c0 22.263-18.048 40.312-40.31 40.312H147.555c-22.263 0-40.311-18.049-40.311-40.312V593.79c0-22.263 18.048-40.311 40.31-40.311zM593.927 106.992h282.176c22.263 0 40.31 18.048 40.31 40.31V429.48c0 22.263-18.047 40.31-40.31 40.31H593.927c-22.263 0-40.311-18.047-40.311-40.31V147.302c0-22.263 18.048-40.31 40.31-40.31zM730.22 920.502H623.926c-40.925 0-74.22-33.388-74.22-74.425V623.992c0-41.038 33.387-74.424 74.425-74.424h222.085c41.038 0 74.424 33.226 74.424 74.067v114.233c0 10.244-8.304 18.548-18.547 18.548s-18.548-8.304-18.548-18.548V623.635c0-20.388-16.746-36.974-37.33-36.974H624.13c-20.585 0-37.331 16.747-37.331 37.33v222.086c0 20.585 16.654 37.331 37.126 37.331H730.22c10.243 0 18.547 8.304 18.547 18.547 0 10.244-8.304 18.547-18.547 18.547z"></path></svg><!--[--><span class="page-category-item color7 clickable" role="navigation">å¾®æœåŠ¡</span><!--]--><meta property="articleSection" content="å¾®æœåŠ¡"></span><!----></div><hr></div><div class="vp-toc-placeholder"><aside id="toc"><!----><div class="vp-toc-header">On This Page<button type="button" class="print-button" title="Print"><svg xmlns="http://www.w3.org/2000/svg" class="icon print-icon" viewBox="0 0 1024 1024" fill="currentColor" aria-label="print icon" name="print"><path d="M819.2 364.8h-44.8V128c0-17.067-14.933-32-32-32H281.6c-17.067 0-32 14.933-32 32v236.8h-44.8C145.067 364.8 96 413.867 96 473.6v192c0 59.733 49.067 108.8 108.8 108.8h44.8V896c0 17.067 14.933 32 32 32h460.8c17.067 0 32-14.933 32-32V774.4h44.8c59.733 0 108.8-49.067 108.8-108.8v-192c0-59.733-49.067-108.8-108.8-108.8zM313.6 160h396.8v204.8H313.6V160zm396.8 704H313.6V620.8h396.8V864zM864 665.6c0 25.6-19.2 44.8-44.8 44.8h-44.8V588.8c0-17.067-14.933-32-32-32H281.6c-17.067 0-32 14.933-32 32v121.6h-44.8c-25.6 0-44.8-19.2-44.8-44.8v-192c0-25.6 19.2-44.8 44.8-44.8h614.4c25.6 0 44.8 19.2 44.8 44.8v192z"></path></svg></button><div class="arrow end"></div></div><div class="vp-toc-wrapper"><ul class="vp-toc-list"><!--[--><li class="vp-toc-item"><a class="route-link vp-toc-link level2" href="#_1-1-æœåŠ¡ä¿æŠ¤æ–¹æ¡ˆ">1.1.æœåŠ¡ä¿æŠ¤æ–¹æ¡ˆ</a></li><li><ul class="vp-toc-list"><!--[--><li class="vp-toc-item"><a class="route-link vp-toc-link level3" href="#_1-1-1-è¯·æ±‚é™æµ">1.1.1.è¯·æ±‚é™æµ</a></li><!----><!--]--><!--[--><li class="vp-toc-item"><a class="route-link vp-toc-link level3" href="#_1-1-2-çº¿ç¨‹éš”ç¦»">1.1.2.çº¿ç¨‹éš”ç¦»</a></li><!----><!--]--><!--[--><li class="vp-toc-item"><a class="route-link vp-toc-link level3" href="#_1-1-3-æœåŠ¡ç†”æ–­">1.1.3.æœåŠ¡ç†”æ–­</a></li><!----><!--]--></ul></li><!--]--><!--[--><li class="vp-toc-item"><a class="route-link vp-toc-link level2" href="#_1-2-sentinel">1.2.Sentinel</a></li><li><ul class="vp-toc-list"><!--[--><li class="vp-toc-item"><a class="route-link vp-toc-link level3" href="#_1-2-1-ä»‹ç»å’Œå®‰è£…">1.2.1.ä»‹ç»å’Œå®‰è£…</a></li><!----><!--]--><!--[--><li class="vp-toc-item"><a class="route-link vp-toc-link level3" href="#_1-2-2-å¾®æœåŠ¡æ•´åˆ">1.2.2.å¾®æœåŠ¡æ•´åˆ</a></li><!----><!--]--></ul></li><!--]--><!--[--><li class="vp-toc-item"><a class="route-link vp-toc-link level2" href="#_1-3-è¯·æ±‚é™æµ">1.3.è¯·æ±‚é™æµ</a></li><!----><!--]--><!--[--><li class="vp-toc-item"><a class="route-link vp-toc-link level2" href="#_1-4-çº¿ç¨‹éš”ç¦»">1.4.çº¿ç¨‹éš”ç¦»</a></li><li><ul class="vp-toc-list"><!--[--><li class="vp-toc-item"><a class="route-link vp-toc-link level3" href="#_1-4-1-openfeignæ•´åˆsentinel">1.4.1.OpenFeignæ•´åˆSentinel</a></li><!----><!--]--><!--[--><li class="vp-toc-item"><a class="route-link vp-toc-link level3" href="#_1-4-2-é…ç½®çº¿ç¨‹éš”ç¦»">1.4.2.é…ç½®çº¿ç¨‹éš”ç¦»</a></li><!----><!--]--></ul></li><!--]--><!--[--><li class="vp-toc-item"><a class="route-link vp-toc-link level2" href="#_1-5-æœåŠ¡ç†”æ–­">1.5.æœåŠ¡ç†”æ–­</a></li><li><ul class="vp-toc-list"><!--[--><li class="vp-toc-item"><a class="route-link vp-toc-link level3" href="#_1-5-1-ç¼–å†™é™çº§é€»è¾‘">1.5.1.ç¼–å†™é™çº§é€»è¾‘</a></li><!----><!--]--><!--[--><li class="vp-toc-item"><a class="route-link vp-toc-link level3" href="#_1-5-2-æœåŠ¡ç†”æ–­">1.5.2.æœåŠ¡ç†”æ–­</a></li><!----><!--]--></ul></li><!--]--><!--[--><li class="vp-toc-item"><a class="route-link vp-toc-link level2" href="#_2-1-è®¤è¯†seata">2.1.è®¤è¯†Seata</a></li><!----><!--]--><!--[--><li class="vp-toc-item"><a class="route-link vp-toc-link level2" href="#_2-2-éƒ¨ç½²tcæœåŠ¡">2.2.éƒ¨ç½²TCæœåŠ¡</a></li><li><ul class="vp-toc-list"><!--[--><li class="vp-toc-item"><a class="route-link vp-toc-link level3" href="#_2-2-1-å‡†å¤‡æ•°æ®åº“è¡¨">2.2.1.å‡†å¤‡æ•°æ®åº“è¡¨</a></li><!----><!--]--><!--[--><li class="vp-toc-item"><a class="route-link vp-toc-link level3" href="#_2-2-2-å‡†å¤‡é…ç½®æ–‡ä»¶">2.2.2.å‡†å¤‡é…ç½®æ–‡ä»¶</a></li><!----><!--]--><!--[--><li class="vp-toc-item"><a class="route-link vp-toc-link level3" href="#_2-2-3-dockeréƒ¨ç½²">2.2.3.Dockeréƒ¨ç½²</a></li><!----><!--]--></ul></li><!--]--><!--[--><li class="vp-toc-item"><a class="route-link vp-toc-link level2" href="#_2-3-å¾®æœåŠ¡é›†æˆseata">2.3.å¾®æœåŠ¡é›†æˆSeata</a></li><li><ul class="vp-toc-list"><!--[--><li class="vp-toc-item"><a class="route-link vp-toc-link level3" href="#_2-3-1-å¼•å…¥ä¾èµ–">2.3.1.å¼•å…¥ä¾èµ–</a></li><!----><!--]--><!--[--><li class="vp-toc-item"><a class="route-link vp-toc-link level3" href="#_2-3-2-æ”¹é€ é…ç½®">2.3.2.æ”¹é€ é…ç½®</a></li><!----><!--]--><!--[--><li class="vp-toc-item"><a class="route-link vp-toc-link level3" href="#_2-3-3-æ·»åŠ æ•°æ®åº“è¡¨">2.3.3.æ·»åŠ æ•°æ®åº“è¡¨</a></li><!----><!--]--><!--[--><li class="vp-toc-item"><a class="route-link vp-toc-link level3" href="#_2-3-4-æµ‹è¯•">2.3.4.æµ‹è¯•</a></li><!----><!--]--></ul></li><!--]--><!--[--><li class="vp-toc-item"><a class="route-link vp-toc-link level2" href="#_2-4-xaæ¨¡å¼">2.4.XAæ¨¡å¼</a></li><li><ul class="vp-toc-list"><!--[--><li class="vp-toc-item"><a class="route-link vp-toc-link level3" href="#_2-4-1-ä¸¤é˜¶æ®µæäº¤">2.4.1.ä¸¤é˜¶æ®µæäº¤</a></li><!----><!--]--><!--[--><li class="vp-toc-item"><a class="route-link vp-toc-link level3" href="#_2-4-2-seataçš„xaæ¨¡å‹">2.4.2.Seataçš„XAæ¨¡å‹</a></li><!----><!--]--><!--[--><li class="vp-toc-item"><a class="route-link vp-toc-link level3" href="#_2-4-3-ä¼˜ç¼ºç‚¹">2.4.3.ä¼˜ç¼ºç‚¹</a></li><!----><!--]--></ul></li><!--]--><!--[--><li class="vp-toc-item"><a class="route-link vp-toc-link level2" href="#_2-5-atæ¨¡å¼">2.5.ATæ¨¡å¼</a></li><li><ul class="vp-toc-list"><!--[--><li class="vp-toc-item"><a class="route-link vp-toc-link level3" href="#_2-5-1-seataçš„atæ¨¡å‹">2.5.1.Seataçš„ATæ¨¡å‹</a></li><!----><!--]--><!--[--><li class="vp-toc-item"><a class="route-link vp-toc-link level3" href="#_2-5-2-æµç¨‹æ¢³ç†">2.5.2.æµç¨‹æ¢³ç†</a></li><!----><!--]--><!--[--><li class="vp-toc-item"><a class="route-link vp-toc-link level3" href="#_2-5-3-atä¸xaçš„åŒºåˆ«">2.5.3.ATä¸XAçš„åŒºåˆ«</a></li><!----><!--]--></ul></li><!--]--><!--[--><li class="vp-toc-item"><a class="route-link vp-toc-link level2" href="#_3-1-ç¼–å†™é™çº§é€»è¾‘">3.1.ç¼–å†™é™çº§é€»è¾‘</a></li><!----><!--]--><!--[--><li class="vp-toc-item"><a class="route-link vp-toc-link level2" href="#_3-2-è§£å†³åˆ†å¸ƒå¼äº‹åŠ¡">3.2.è§£å†³åˆ†å¸ƒå¼äº‹åŠ¡</a></li><!----><!--]--></ul><div class="vp-toc-marker" style="top:-1.7rem;"></div></div><!----></aside></div><!----><div class="theme-hope-content"><h1 id="day05-æœåŠ¡ä¿æŠ¤ã€åˆ†å¸ƒå¼äº‹åŠ¡" tabindex="-1"><a class="header-anchor" href="#day05-æœåŠ¡ä¿æŠ¤ã€åˆ†å¸ƒå¼äº‹åŠ¡"><span>day05-æœåŠ¡ä¿æŠ¤ã€åˆ†å¸ƒå¼äº‹åŠ¡</span></a></h1><p>åœ¨å¾®æœåŠ¡è¿œç¨‹è°ƒç”¨çš„è¿‡ç¨‹ä¸­ï¼Œè¿˜å­˜åœ¨å‡ ä¸ªé—®é¢˜éœ€è¦è§£å†³ã€‚</p><p>é¦–å…ˆæ˜¯<strong>ä¸šåŠ¡å¥å£®æ€§</strong>é—®é¢˜ï¼š</p><p>ä¾‹å¦‚åœ¨ä¹‹å‰çš„æŸ¥è¯¢è´­ç‰©è½¦åˆ—è¡¨ä¸šåŠ¡ä¸­ï¼Œè´­ç‰©è½¦æœåŠ¡éœ€è¦æŸ¥è¯¢æœ€æ–°çš„å•†å“ä¿¡æ¯ï¼Œä¸è´­ç‰©è½¦æ•°æ®åšå¯¹æ¯”ï¼Œæé†’ç”¨æˆ·ã€‚å¤§å®¶è®¾æƒ³ä¸€ä¸‹ï¼Œå¦‚æœå•†å“æœåŠ¡æŸ¥è¯¢æ—¶å‘ç”Ÿæ•…éšœï¼ŒæŸ¥è¯¢è´­ç‰©è½¦åˆ—è¡¨åœ¨è°ƒç”¨å•†å“æœåŠ¡æ—¶ï¼Œæ˜¯ä¸æ˜¯ä¹Ÿä¼šå¼‚å¸¸ï¼Ÿä»è€Œå¯¼è‡´è´­ç‰©è½¦æŸ¥è¯¢å¤±è´¥ã€‚ä½†ä»ä¸šåŠ¡è§’åº¦æ¥è¯´ï¼Œä¸ºäº†æå‡ç”¨æˆ·ä½“éªŒï¼Œå³ä¾¿æ˜¯å•†å“æŸ¥è¯¢å¤±è´¥ï¼Œè´­ç‰©è½¦åˆ—è¡¨ä¹Ÿåº”è¯¥æ­£ç¡®å±•ç¤ºå‡ºæ¥ï¼Œå“ªæ€•æ˜¯ä¸åŒ…å«æœ€æ–°çš„å•†å“ä¿¡æ¯ã€‚</p><p>è¿˜æœ‰<strong>çº§è”å¤±è´¥</strong>é—®é¢˜ï¼š</p><p>è¿˜æ˜¯æŸ¥è¯¢è´­ç‰©è½¦çš„ä¸šåŠ¡ï¼Œå‡å¦‚å•†å“æœåŠ¡ä¸šåŠ¡å¹¶å‘è¾ƒé«˜ï¼Œå ç”¨è¿‡å¤šTomcatè¿æ¥ã€‚å¯èƒ½ä¼šå¯¼è‡´å•†å“æœåŠ¡çš„æ‰€æœ‰æ¥å£å“åº”æ—¶é—´å¢åŠ ï¼Œå»¶è¿Ÿå˜é«˜ï¼Œç”šè‡³æ˜¯é•¿æ—¶é—´é˜»å¡ç›´è‡³æŸ¥è¯¢å¤±è´¥ã€‚</p><p>æ­¤æ—¶æŸ¥è¯¢è´­ç‰©è½¦ä¸šåŠ¡éœ€è¦æŸ¥è¯¢å¹¶ç­‰å¾…å•†å“æŸ¥è¯¢ç»“æœï¼Œä»è€Œå¯¼è‡´æŸ¥è¯¢è´­ç‰©è½¦åˆ—è¡¨ä¸šåŠ¡çš„å“åº”æ—¶é—´ä¹Ÿå˜é•¿ï¼Œç”šè‡³ä¹Ÿé˜»å¡ç›´è‡³æ— æ³•è®¿é—®ã€‚è€Œæ­¤æ—¶å¦‚æœæŸ¥è¯¢è´­ç‰©è½¦çš„è¯·æ±‚è¾ƒå¤šï¼Œå¯èƒ½å¯¼è‡´è´­ç‰©è½¦æœåŠ¡çš„Tomcatè¿æ¥å ç”¨è¾ƒå¤šï¼Œæ‰€æœ‰æ¥å£çš„å“åº”æ—¶é—´éƒ½ä¼šå¢åŠ ï¼Œæ•´ä¸ªæœåŠ¡æ€§èƒ½å¾ˆå·®ï¼Œ ç”šè‡³ä¸å¯ç”¨ã€‚</p><figure><img src="/assets/1686734502934-0b68df96-c69c-4c2e-bc52-57ceeb7f7de7-DV5mLUjK.jpeg" alt="img" tabindex="0" loading="lazy"><figcaption>img</figcaption></figure><p>ä¾æ¬¡ç±»æ¨ï¼Œæ•´ä¸ªå¾®æœåŠ¡ç¾¤ä¸­ä¸è´­ç‰©è½¦æœåŠ¡ã€å•†å“æœåŠ¡ç­‰æœ‰è°ƒç”¨å…³ç³»çš„æœåŠ¡å¯èƒ½éƒ½ä¼šå‡ºç°é—®é¢˜ï¼Œæœ€ç»ˆå¯¼è‡´æ•´ä¸ªé›†ç¾¤ä¸å¯ç”¨ã€‚</p><figure><img src="/assets/1686735449752-9c4069b2-111e-4f0a-b892-79207772f0cc-tdCmp4AX.jpeg" alt="img" tabindex="0" loading="lazy"><figcaption>img</figcaption></figure><p>è¿™å°±æ˜¯<strong>çº§è”å¤±è´¥</strong>é—®é¢˜ï¼Œæˆ–è€…å«<strong>é›ªå´©</strong>é—®é¢˜ã€‚</p><p>è¿˜æœ‰è·¨æœåŠ¡çš„äº‹åŠ¡é—®é¢˜ï¼š</p><p>æ¯”å¦‚æ˜¨å¤©è®²åˆ°è¿‡çš„ä¸‹å•ä¸šåŠ¡ï¼Œä¸‹å•çš„è¿‡ç¨‹ä¸­éœ€è¦è°ƒç”¨å¤šä¸ªå¾®æœåŠ¡ï¼š</p><ul><li>å•†å“æœåŠ¡ï¼šæ‰£å‡åº“å­˜</li><li>è®¢å•æœåŠ¡ï¼šä¿å­˜è®¢å•</li><li>è´­ç‰©è½¦æœåŠ¡ï¼šæ¸…ç†è´­ç‰©è½¦</li></ul><p>è¿™äº›ä¸šåŠ¡å…¨éƒ¨éƒ½æ˜¯æ•°æ®åº“çš„å†™æ“ä½œï¼Œæˆ‘ä»¬å¿…é¡»ç¡®ä¿æ‰€æœ‰æ“ä½œçš„åŒæ—¶æˆåŠŸæˆ–å¤±è´¥ã€‚ä½†æ˜¯è¿™äº›æ“ä½œåœ¨ä¸åŒå¾®æœåŠ¡ï¼Œä¹Ÿå°±æ˜¯ä¸åŒçš„Tomcatï¼Œè¿™æ ·çš„æƒ…å†µå¦‚ä½•ç¡®ä¿äº‹åŠ¡ç‰¹æ€§å‘¢ï¼Ÿ</p><p>è¿™äº›é—®é¢˜éƒ½ä¼šåœ¨ä»Šå¤©æ‰¾åˆ°ç­”æ¡ˆã€‚</p><p>ä»Šå¤©çš„å†…å®¹ä¼šåˆ†æˆå‡ éƒ¨åˆ†ï¼š</p><ul><li><p>å¾®æœåŠ¡ä¿æŠ¤</p></li><li><ul><li>æœåŠ¡ä¿æŠ¤æ–¹æ¡ˆ</li></ul></li><li><p>è¯·æ±‚é™æµ</p></li><li><p>éš”ç¦»å’Œç†”æ–­</p></li><li><p>åˆ†å¸ƒå¼äº‹åŠ¡</p></li><li><ul><li>åˆè¯†åˆ†å¸ƒå¼äº‹åŠ¡</li></ul></li><li><p>Seata</p></li></ul><p>é€šè¿‡ä»Šå¤©çš„å­¦ä¹ ï¼Œä½ å°†èƒ½æŒæ¡ä¸‹é¢çš„èƒ½åŠ›ï¼š</p><ul><li>çŸ¥é“é›ªå´©é—®é¢˜äº§ç”ŸåŸå› åŠå¸¸è§è§£å†³æ–¹æ¡ˆ</li><li>èƒ½ä½¿ç”¨Sentinelå®ç°æœåŠ¡ä¿æŠ¤</li><li>ç†è§£åˆ†å¸ƒå¼äº‹åŠ¡äº§ç”Ÿçš„åŸå› </li><li>èƒ½ä½¿ç”¨Seataè§£å†³åˆ†å¸ƒå¼äº‹åŠ¡é—®é¢˜</li><li>ç†è§£ATæ¨¡å¼åŸºæœ¬åŸç†</li></ul><h1 id="_1-å¾®æœåŠ¡ä¿æŠ¤" tabindex="-1"><a class="header-anchor" href="#_1-å¾®æœåŠ¡ä¿æŠ¤"><span>1.å¾®æœåŠ¡ä¿æŠ¤</span></a></h1><p>ä¿è¯æœåŠ¡è¿è¡Œçš„å¥å£®æ€§ï¼Œé¿å…çº§è”å¤±è´¥å¯¼è‡´çš„é›ªå´©é—®é¢˜ï¼Œå°±å±äºå¾®æœåŠ¡ä¿æŠ¤ã€‚è¿™ç« æˆ‘ä»¬å°±ä¸€èµ·æ¥å­¦ä¹ ä¸€ä¸‹å¾®æœåŠ¡ä¿æŠ¤çš„å¸¸è§æ–¹æ¡ˆä»¥åŠå¯¹åº”çš„æŠ€æœ¯ã€‚</p><h2 id="_1-1-æœåŠ¡ä¿æŠ¤æ–¹æ¡ˆ" tabindex="-1"><a class="header-anchor" href="#_1-1-æœåŠ¡ä¿æŠ¤æ–¹æ¡ˆ"><span>1.1.æœåŠ¡ä¿æŠ¤æ–¹æ¡ˆ</span></a></h2><p>å¾®æœåŠ¡ä¿æŠ¤çš„æ–¹æ¡ˆæœ‰å¾ˆå¤šï¼Œæ¯”å¦‚ï¼š</p><ul><li>è¯·æ±‚é™æµ</li><li>çº¿ç¨‹éš”ç¦»</li><li>æœåŠ¡ç†”æ–­</li></ul><p>è¿™äº›æ–¹æ¡ˆæˆ–å¤šæˆ–å°‘éƒ½ä¼šå¯¼è‡´æœåŠ¡çš„ä½“éªŒä¸Šç•¥æœ‰ä¸‹é™ï¼Œæ¯”å¦‚è¯·æ±‚é™æµï¼Œé™ä½äº†å¹¶å‘ä¸Šé™ï¼›çº¿ç¨‹éš”ç¦»ï¼Œé™ä½äº†å¯ç”¨èµ„æºæ•°é‡ï¼›æœåŠ¡ç†”æ–­ï¼Œé™ä½äº†æœåŠ¡çš„å®Œæ•´åº¦ï¼Œéƒ¨åˆ†æœåŠ¡å˜çš„ä¸å¯ç”¨æˆ–å¼±å¯ç”¨ã€‚å› æ­¤è¿™äº›æ–¹æ¡ˆéƒ½å±äºæœåŠ¡ <strong>é™çº§</strong>çš„æ–¹æ¡ˆã€‚ä½†é€šè¿‡è¿™äº›æ–¹æ¡ˆï¼ŒæœåŠ¡çš„å¥å£®æ€§å¾—åˆ°äº†æå‡ï¼Œ</p><p>æ¥ä¸‹æ¥ï¼Œæˆ‘ä»¬å°±é€ä¸€äº†è§£è¿™äº›æ–¹æ¡ˆçš„åŸç†ã€‚</p><h3 id="_1-1-1-è¯·æ±‚é™æµ" tabindex="-1"><a class="header-anchor" href="#_1-1-1-è¯·æ±‚é™æµ"><span>1.1.1.è¯·æ±‚é™æµ</span></a></h3><p>æœåŠ¡æ•…éšœæœ€é‡è¦åŸå› ï¼Œå°±æ˜¯å¹¶å‘å¤ªé«˜ï¼è§£å†³äº†è¿™ä¸ªé—®é¢˜ï¼Œå°±èƒ½é¿å…å¤§éƒ¨åˆ†æ•…éšœã€‚å½“ç„¶ï¼Œæ¥å£çš„å¹¶å‘ä¸æ˜¯ä¸€ç›´å¾ˆé«˜ï¼Œè€Œæ˜¯çªå‘çš„ã€‚å› æ­¤è¯·æ±‚é™æµï¼Œå°±æ˜¯ <strong>é™åˆ¶æˆ–æ§åˆ¶</strong>æ¥å£è®¿é—®çš„å¹¶å‘æµé‡ï¼Œé¿å…æœåŠ¡å› æµé‡æ¿€å¢è€Œå‡ºç°æ•…éšœã€‚</p><p>è¯·æ±‚é™æµå¾€å¾€ä¼šæœ‰ä¸€ä¸ªé™æµå™¨ï¼Œæ•°é‡é«˜ä½èµ·ä¼çš„å¹¶å‘è¯·æ±‚æ›²çº¿ï¼Œç»è¿‡é™æµå™¨å°±å˜çš„éå¸¸å¹³ç¨³ã€‚è¿™å°±åƒæ˜¯æ°´ç”µç«™çš„å¤§åï¼Œèµ·åˆ°è“„æ°´çš„ä½œç”¨ï¼Œå¯ä»¥é€šè¿‡å¼€å…³æ§åˆ¶æ°´æµå‡ºçš„å¤§å°ï¼Œè®©ä¸‹æ¸¸æ°´æµå§‹ç»ˆç»´æŒåœ¨ä¸€ä¸ªå¹³ç¨³çš„é‡ã€‚</p><figure><img src="/assets/1686744649500-fd2e66e2-c41e-433f-af03-f63b69fe689c-DuJS0ukN.jpeg" alt="img" tabindex="0" loading="lazy"><figcaption>img</figcaption></figure><h3 id="_1-1-2-çº¿ç¨‹éš”ç¦»" tabindex="-1"><a class="header-anchor" href="#_1-1-2-çº¿ç¨‹éš”ç¦»"><span>1.1.2.çº¿ç¨‹éš”ç¦»</span></a></h3><p>å½“ä¸€ä¸ªä¸šåŠ¡æ¥å£å“åº”æ—¶é—´é•¿ï¼Œè€Œä¸”å¹¶å‘é«˜æ—¶ï¼Œå°±å¯èƒ½è€—å°½æœåŠ¡å™¨çš„çº¿ç¨‹èµ„æºï¼Œå¯¼è‡´æœåŠ¡å†…çš„å…¶å®ƒæ¥å£æ”¶åˆ°å½±å“ã€‚æ‰€ä»¥æˆ‘ä»¬å¿…é¡»æŠŠè¿™ç§å½±å“é™ä½ï¼Œæˆ–è€…ç¼©å‡å½±å“çš„èŒƒå›´ã€‚çº¿ç¨‹éš”ç¦»æ­£æ˜¯è§£å†³è¿™ä¸ªé—®é¢˜çš„å¥½åŠæ³•ã€‚</p><p>çº¿ç¨‹éš”ç¦»çš„æ€æƒ³æ¥è‡ªè½®èˆ¹çš„èˆ±å£æ¨¡å¼ï¼š</p><figure><img src="/assets/1686745327643-22197771-34d7-4395-be47-799e82366153-BRqZDW-V.png" alt="img" tabindex="0" loading="lazy"><figcaption>img</figcaption></figure><p>è½®èˆ¹çš„èˆ¹èˆ±ä¼šè¢«éš”æ¿åˆ†å‰²ä¸ºNä¸ªç›¸äº’éš”ç¦»çš„å¯†é—­èˆ±ï¼Œå‡å¦‚è½®èˆ¹è§¦ç¤è¿›æ°´ï¼Œåªæœ‰æŸåçš„éƒ¨åˆ†å¯†é—­èˆ±ä¼šè¿›æ°´ï¼Œè€Œå…¶ä»–èˆ±ç”±äºç›¸äº’éš”ç¦»ï¼Œå¹¶ä¸ä¼šè¿›æ°´ã€‚è¿™æ ·å°±æŠŠè¿›æ°´æ§åˆ¶åœ¨éƒ¨åˆ†èˆ¹ä½“ï¼Œé¿å…äº†æ•´ä¸ªèˆ¹èˆ±è¿›æ°´è€Œæ²‰æ²¡ã€‚</p><p>ä¸ºäº†é¿å…æŸä¸ªæ¥å£æ•…éšœæˆ–å‹åŠ›è¿‡å¤§å¯¼è‡´æ•´ä¸ªæœåŠ¡ä¸å¯ç”¨ï¼Œæˆ‘ä»¬å¯ä»¥é™å®šæ¯ä¸ªæ¥å£å¯ä»¥ä½¿ç”¨çš„èµ„æºèŒƒå›´ï¼Œä¹Ÿå°±æ˜¯å°†å…¶â€œéš”ç¦»â€èµ·æ¥ã€‚</p><figure><img src="/assets/1686748830410-f511dfd7-de3b-4a2a-973e-a6bbe7b8a03a-BF6fVAta.jpeg" alt="img" tabindex="0" loading="lazy"><figcaption>img</figcaption></figure><p>å¦‚å›¾æ‰€ç¤ºï¼Œæˆ‘ä»¬ç»™æŸ¥è¯¢è´­ç‰©è½¦ä¸šåŠ¡é™å®šå¯ç”¨çº¿ç¨‹æ•°é‡ä¸Šé™ä¸º20ï¼Œè¿™æ ·å³ä¾¿æŸ¥è¯¢è´­ç‰©è½¦çš„è¯·æ±‚å› ä¸ºæŸ¥è¯¢å•†å“æœåŠ¡è€Œå‡ºç°æ•…éšœï¼Œä¹Ÿä¸ä¼šå¯¼è‡´æœåŠ¡å™¨çš„çº¿ç¨‹èµ„æºè¢«è€—å°½ï¼Œä¸ä¼šå½±å“åˆ°å…¶å®ƒæ¥å£ã€‚</p><h3 id="_1-1-3-æœåŠ¡ç†”æ–­" tabindex="-1"><a class="header-anchor" href="#_1-1-3-æœåŠ¡ç†”æ–­"><span>1.1.3.æœåŠ¡ç†”æ–­</span></a></h3><p>çº¿ç¨‹éš”ç¦»è™½ç„¶é¿å…äº†é›ªå´©é—®é¢˜ï¼Œä½†æ•…éšœæœåŠ¡ï¼ˆå•†å“æœåŠ¡ï¼‰ä¾ç„¶ä¼šæ‹–æ…¢è´­ç‰©è½¦æœåŠ¡ï¼ˆæœåŠ¡è°ƒç”¨æ–¹ï¼‰çš„æ¥å£å“åº”é€Ÿåº¦ã€‚è€Œä¸”å•†å“æŸ¥è¯¢çš„æ•…éšœä¾ç„¶ä¼šå¯¼è‡´æŸ¥è¯¢è´­ç‰©è½¦åŠŸèƒ½å‡ºç°æ•…éšœï¼Œè´­ç‰©è½¦ä¸šåŠ¡ä¹Ÿå˜çš„ä¸å¯ç”¨äº†ã€‚</p><p>æ‰€ä»¥ï¼Œæˆ‘ä»¬è¦åšä¸¤ä»¶äº‹æƒ…ï¼š</p><ul><li><strong>ç¼–å†™æœåŠ¡é™çº§é€»è¾‘</strong>ï¼šå°±æ˜¯æœåŠ¡è°ƒç”¨å¤±è´¥åçš„å¤„ç†é€»è¾‘ï¼Œæ ¹æ®ä¸šåŠ¡åœºæ™¯ï¼Œå¯ä»¥æŠ›å‡ºå¼‚å¸¸ï¼Œä¹Ÿå¯ä»¥è¿”å›å‹å¥½æç¤ºæˆ–é»˜è®¤æ•°æ®ã€‚</li><li><strong>å¼‚å¸¸ç»Ÿè®¡å’Œç†”æ–­</strong>ï¼šç»Ÿè®¡æœåŠ¡æä¾›æ–¹çš„å¼‚å¸¸æ¯”ä¾‹ï¼Œå½“æ¯”ä¾‹è¿‡é«˜è¡¨æ˜è¯¥æ¥å£ä¼šå½±å“åˆ°å…¶å®ƒæœåŠ¡ï¼Œåº”è¯¥æ‹’ç»è°ƒç”¨è¯¥æ¥å£ï¼Œè€Œæ˜¯ç›´æ¥èµ°é™çº§é€»è¾‘ã€‚</li></ul><figure><img src="/assets/1686748832463-ae840980-5e54-4456-8862-c56935efdb01-CovgeDpV.jpeg" alt="img" tabindex="0" loading="lazy"><figcaption>img</figcaption></figure><h2 id="_1-2-sentinel" tabindex="-1"><a class="header-anchor" href="#_1-2-sentinel"><span>1.2.Sentinel</span></a></h2><p>å¾®æœåŠ¡ä¿æŠ¤çš„æŠ€æœ¯æœ‰å¾ˆå¤šï¼Œä½†åœ¨ç›®å‰å›½å†…ä½¿ç”¨è¾ƒå¤šçš„è¿˜æ˜¯Sentinelï¼Œæ‰€ä»¥æ¥ä¸‹æ¥æˆ‘ä»¬å­¦ä¹ Sentinelçš„ä½¿ç”¨ã€‚</p><h3 id="_1-2-1-ä»‹ç»å’Œå®‰è£…" tabindex="-1"><a class="header-anchor" href="#_1-2-1-ä»‹ç»å’Œå®‰è£…"><span>1.2.1.ä»‹ç»å’Œå®‰è£…</span></a></h3><p>Sentinelæ˜¯é˜¿é‡Œå·´å·´å¼€æºçš„ä¸€æ¬¾æœåŠ¡ä¿æŠ¤æ¡†æ¶ï¼Œç›®å‰å·²ç»åŠ å…¥SpringCloudAlibabaä¸­ã€‚å®˜æ–¹ç½‘ç«™ï¼š</p><p>https://sentinelguard.io/zh-cn/ (å¯èƒ½æ‰“ä¸å¼€,ä½¿ç”¨ä¸‹é¢çš„ç½‘ç«™)</p><p>https://github.com/alibaba/Sentinel/wiki/%E4%BB%8B%E7%BB%8D</p><p>Sentinel çš„ä½¿ç”¨å¯ä»¥åˆ†ä¸ºä¸¤ä¸ªéƒ¨åˆ†:</p><ul><li><strong>æ ¸å¿ƒåº“</strong>ï¼ˆJaråŒ…ï¼‰ï¼šä¸ä¾èµ–ä»»ä½•æ¡†æ¶/åº“ï¼Œèƒ½å¤Ÿè¿è¡Œäº Java 8 åŠä»¥ä¸Šçš„ç‰ˆæœ¬çš„è¿è¡Œæ—¶ç¯å¢ƒï¼ŒåŒæ—¶å¯¹ Dubbo / Spring Cloud ç­‰æ¡†æ¶ä¹Ÿæœ‰è¾ƒå¥½çš„æ”¯æŒã€‚åœ¨é¡¹ç›®ä¸­å¼•å…¥ä¾èµ–å³å¯å®ç°æœåŠ¡é™æµã€éš”ç¦»ã€ç†”æ–­ç­‰åŠŸèƒ½ã€‚</li><li><strong>æ§åˆ¶å°</strong>ï¼ˆDashboardï¼‰ï¼šDashboard ä¸»è¦è´Ÿè´£ç®¡ç†æ¨é€è§„åˆ™ã€ç›‘æ§ã€ç®¡ç†æœºå™¨ä¿¡æ¯ç­‰ã€‚</li></ul><p>ä¸ºäº†æ–¹ä¾¿ç›‘æ§å¾®æœåŠ¡ï¼Œæˆ‘ä»¬å…ˆæŠŠSentinelçš„æ§åˆ¶å°æ­å»ºå‡ºæ¥ã€‚</p><p>1ï¼‰ä¸‹è½½jaråŒ…</p><p>ä¸‹è½½åœ°å€ï¼š</p><p>https://github.com/alibaba/Sentinel/releases</p><p>ä¹Ÿå¯ä»¥ç›´æ¥ä½¿ç”¨è¯¾å‰èµ„æ–™æä¾›çš„ç‰ˆæœ¬ï¼š</p><figure><img src="/assets/1687675119767-2724086f-4c75-4486-a2e9-83f1e2b3e8ce-DvA8vGiy.png" alt="img" tabindex="0" loading="lazy"><figcaption>img</figcaption></figure><p>2ï¼‰è¿è¡Œ</p><p>å°†jaråŒ…æ”¾åœ¨ä»»æ„éä¸­æ–‡ã€ä¸åŒ…å«ç‰¹æ®Šå­—ç¬¦çš„ç›®å½•ä¸‹ï¼Œé‡å‘½åä¸º<code>sentinel-dashboard.jar</code>ï¼š</p><figure><img src="/assets/1686751436105-e38cb1b0-7d88-438d-b587-bec9c188bf4d-DpyZfw05.png" alt="img" tabindex="0" loading="lazy"><figcaption>img</figcaption></figure><p>ç„¶åè¿è¡Œå¦‚ä¸‹å‘½ä»¤å¯åŠ¨æ§åˆ¶å°ï¼š</p><div class="language-shell line-numbers-mode" data-highlighter="shiki" data-ext="shell" data-title="shell" style="--shiki-light:#383A42;--shiki-dark:#abb2bf;--shiki-light-bg:#FAFAFA;--shiki-dark-bg:#282c34;"><pre class="shiki shiki-themes one-light one-dark-pro vp-code"><code><span class="line"><span style="--shiki-light:#4078F2;--shiki-dark:#61AFEF;">java</span><span style="--shiki-light:#986801;--shiki-dark:#D19A66;"> -Dserver.port=8090</span><span style="--shiki-light:#986801;--shiki-dark:#D19A66;"> -Dcsp.sentinel.dashboard.server=localhost:8090</span><span style="--shiki-light:#986801;--shiki-dark:#D19A66;"> -Dproject.name=sentinel-dashboard</span><span style="--shiki-light:#986801;--shiki-dark:#D19A66;"> -jar</span><span style="--shiki-light:#50A14F;--shiki-dark:#98C379;"> sentinel-dashboard.jar</span></span></code></pre><div class="line-numbers" aria-hidden="true" style="counter-reset:line-number 0;"><div class="line-number"></div></div></div><p>å…¶å®ƒå¯åŠ¨æ—¶å¯é…ç½®å‚æ•°å¯å‚è€ƒå®˜æ–¹æ–‡æ¡£ï¼š</p><p><a href="https://github.com/alibaba/Sentinel/wiki/%E5%90%AF%E5%8A%A8%E9%85%8D%E7%BD%AE%E9%A1%B9" target="_blank" rel="noopener noreferrer">https://github.com/alibaba/Sentinel/wiki/%E5%90%AF%E5%8A%A8%E9%85%8D%E7%BD%AE%E9%A1%B9</a></p><p>3ï¼‰è®¿é—®</p><p>è®¿é—®http://localhost:8080é¡µé¢ï¼Œå°±å¯ä»¥çœ‹åˆ°sentinelçš„æ§åˆ¶å°äº†ï¼š</p><figure><img src="/assets/1686751871999-db5f6073-1413-43b6-9847-bfd7267a2f80-B9uuPduw.png" alt="img" tabindex="0" loading="lazy"><figcaption>img</figcaption></figure><p>éœ€è¦è¾“å…¥è´¦å·å’Œå¯†ç ï¼Œé»˜è®¤éƒ½æ˜¯ï¼šsentinel</p><p>ç™»å½•åï¼Œå³å¯çœ‹åˆ°æ§åˆ¶å°ï¼Œé»˜è®¤ä¼šç›‘æ§sentinel-dashboardæœåŠ¡æœ¬èº«ï¼š</p><figure><img src="/assets/1686752213995-5f77687b-7693-430d-a8e5-4c507e65c0fc-6-rHxDPO.png" alt="img" tabindex="0" loading="lazy"><figcaption>img</figcaption></figure><h3 id="_1-2-2-å¾®æœåŠ¡æ•´åˆ" tabindex="-1"><a class="header-anchor" href="#_1-2-2-å¾®æœåŠ¡æ•´åˆ"><span>1.2.2.å¾®æœåŠ¡æ•´åˆ</span></a></h3><p>æˆ‘ä»¬åœ¨<code>cart-service</code>æ¨¡å—ä¸­æ•´åˆsentinelï¼Œè¿æ¥<code>sentinel-dashboard</code>æ§åˆ¶å°ï¼Œæ­¥éª¤å¦‚ä¸‹ï¼š 1ï¼‰å¼•å…¥sentinelä¾èµ–</p><div class="language-xml line-numbers-mode" data-highlighter="shiki" data-ext="xml" data-title="xml" style="--shiki-light:#383A42;--shiki-dark:#abb2bf;--shiki-light-bg:#FAFAFA;--shiki-dark-bg:#282c34;"><pre class="shiki shiki-themes one-light one-dark-pro vp-code"><code><span class="line"><span style="--shiki-light:#A0A1A7;--shiki-dark:#7F848E;--shiki-light-font-style:italic;--shiki-dark-font-style:italic;">&lt;!--sentinel--&gt;</span></span>
<span class="line"><span style="--shiki-light:#383A42;--shiki-dark:#ABB2BF;">&lt;</span><span style="--shiki-light:#E45649;--shiki-dark:#E06C75;">dependency</span><span style="--shiki-light:#383A42;--shiki-dark:#ABB2BF;">&gt;</span></span>
<span class="line"><span style="--shiki-light:#383A42;--shiki-dark:#ABB2BF;">    &lt;</span><span style="--shiki-light:#E45649;--shiki-dark:#E06C75;">groupId</span><span style="--shiki-light:#383A42;--shiki-dark:#ABB2BF;">&gt;com.alibaba.cloud&lt;/</span><span style="--shiki-light:#E45649;--shiki-dark:#E06C75;">groupId</span><span style="--shiki-light:#383A42;--shiki-dark:#ABB2BF;">&gt;</span></span>
<span class="line"><span style="--shiki-light:#383A42;--shiki-dark:#ABB2BF;">    &lt;</span><span style="--shiki-light:#E45649;--shiki-dark:#E06C75;">artifactId</span><span style="--shiki-light:#383A42;--shiki-dark:#ABB2BF;">&gt;spring-cloud-starter-alibaba-sentinel&lt;/</span><span style="--shiki-light:#E45649;--shiki-dark:#E06C75;">artifactId</span><span style="--shiki-light:#383A42;--shiki-dark:#ABB2BF;">&gt;</span></span>
<span class="line"><span style="--shiki-light:#383A42;--shiki-dark:#ABB2BF;">&lt;/</span><span style="--shiki-light:#E45649;--shiki-dark:#E06C75;">dependency</span><span style="--shiki-light:#383A42;--shiki-dark:#ABB2BF;">&gt;</span></span></code></pre><div class="line-numbers" aria-hidden="true" style="counter-reset:line-number 0;"><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div></div></div><p>2ï¼‰é…ç½®æ§åˆ¶å°</p><p>ä¿®æ”¹application.yamlæ–‡ä»¶ï¼Œæ·»åŠ ä¸‹é¢å†…å®¹ï¼š</p><div class="language-yaml line-numbers-mode" data-highlighter="shiki" data-ext="yaml" data-title="yaml" style="--shiki-light:#383A42;--shiki-dark:#abb2bf;--shiki-light-bg:#FAFAFA;--shiki-dark-bg:#282c34;"><pre class="shiki shiki-themes one-light one-dark-pro vp-code"><code><span class="line"><span style="--shiki-light:#E45649;--shiki-dark:#E06C75;">spring</span><span style="--shiki-light:#383A42;--shiki-dark:#ABB2BF;">:</span></span>
<span class="line"><span style="--shiki-light:#E45649;--shiki-dark:#E06C75;">cloud</span><span style="--shiki-light:#383A42;--shiki-dark:#ABB2BF;">:</span></span>
<span class="line"><span style="--shiki-light:#E45649;--shiki-dark:#E06C75;">sentinel</span><span style="--shiki-light:#383A42;--shiki-dark:#ABB2BF;">:</span></span>
<span class="line"><span style="--shiki-light:#E45649;--shiki-dark:#E06C75;">transport</span><span style="--shiki-light:#383A42;--shiki-dark:#ABB2BF;">:</span></span>
<span class="line"><span style="--shiki-light:#E45649;--shiki-dark:#E06C75;">dashboard</span><span style="--shiki-light:#383A42;--shiki-dark:#ABB2BF;">: </span><span style="--shiki-light:#50A14F;--shiki-dark:#98C379;">localhost:8090</span></span></code></pre><div class="line-numbers" aria-hidden="true" style="counter-reset:line-number 0;"><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div></div></div><p>3ï¼‰è®¿é—®<code>cart-service</code>çš„ä»»æ„ç«¯ç‚¹</p><p>é‡å¯<code>cart-service</code>ï¼Œç„¶åè®¿é—®æŸ¥è¯¢è´­ç‰©è½¦æ¥å£ï¼Œsentinelçš„å®¢æˆ·ç«¯å°±ä¼šå°†æœåŠ¡è®¿é—®çš„ä¿¡æ¯æäº¤åˆ°<code>sentinel-dashboard</code>æ§åˆ¶å°ã€‚å¹¶å±•ç¤ºå‡ºç»Ÿè®¡ä¿¡æ¯ï¼š</p><figure><img src="/assets/1686753120343-f934c9da-bd34-4256-b763-59c986b56e0e-gU4qWzCB.png" alt="img" tabindex="0" loading="lazy"><figcaption>img</figcaption></figure><p>ç‚¹å‡»ç°‡ç‚¹é“¾è·¯èœå•ï¼Œä¼šçœ‹åˆ°ä¸‹é¢çš„é¡µé¢ï¼š</p><figure><img src="/assets/1686797707591-2b5e0c07-a331-47a1-94a3-455797c550b8-B08cipU7.png" alt="img" tabindex="0" loading="lazy"><figcaption>img</figcaption></figure><p>æ‰€è°“ç°‡ç‚¹é“¾è·¯ï¼Œå°±æ˜¯å•æœºè°ƒç”¨é“¾è·¯ï¼Œæ˜¯ä¸€æ¬¡è¯·æ±‚è¿›å…¥æœåŠ¡åç»è¿‡çš„æ¯ä¸€ä¸ªè¢«<code>Sentinel</code>ç›‘æ§çš„èµ„æºã€‚é»˜è®¤æƒ…å†µä¸‹ï¼Œ<code>Sentinel</code>ä¼šç›‘æ§ <code>SpringMVC</code>çš„æ¯ä¸€ä¸ª<code>Endpoint</code>ï¼ˆæ¥å£ï¼‰ã€‚</p><p>å› æ­¤ï¼Œæˆ‘ä»¬çœ‹åˆ°<code>/carts</code>è¿™ä¸ªæ¥å£è·¯å¾„å°±æ˜¯å…¶ä¸­ä¸€ä¸ªç°‡ç‚¹ï¼Œæˆ‘ä»¬å¯ä»¥å¯¹å…¶è¿›è¡Œé™æµã€ç†”æ–­ã€éš”ç¦»ç­‰ä¿æŠ¤æªæ–½ã€‚</p><p>ä¸è¿‡ï¼Œéœ€è¦æ³¨æ„çš„æ˜¯ï¼Œæˆ‘ä»¬çš„SpringMVCæ¥å£æ˜¯æŒ‰ç…§Restfulé£æ ¼è®¾è®¡ï¼Œå› æ­¤è´­ç‰©è½¦çš„æŸ¥è¯¢ã€åˆ é™¤ã€ä¿®æ”¹ç­‰æ¥å£å…¨éƒ¨éƒ½æ˜¯<code>/carts</code>è·¯å¾„ï¼š</p><figure><img src="/assets/1686799138291-751236a8-99e3-4cf1-8a82-744f22e884bf-4TEMYGhq.png" alt="img" tabindex="0" loading="lazy"><figcaption>img</figcaption></figure><p>é»˜è®¤æƒ…å†µä¸‹Sentinelä¼šæŠŠè·¯å¾„ä½œä¸ºç°‡ç‚¹èµ„æºçš„åç§°ï¼Œæ— æ³•åŒºåˆ†è·¯å¾„ç›¸åŒä½†è¯·æ±‚æ–¹å¼ä¸åŒçš„æ¥å£ï¼ŒæŸ¥è¯¢ã€åˆ é™¤ã€ä¿®æ”¹ç­‰éƒ½è¢«è¯†åˆ«ä¸ºä¸€ä¸ªç°‡ç‚¹èµ„æºï¼Œè¿™æ˜¾ç„¶æ˜¯ä¸åˆé€‚çš„ã€‚</p><p>æ‰€ä»¥æˆ‘ä»¬å¯ä»¥é€‰æ‹©æ‰“å¼€Sentinelçš„è¯·æ±‚æ–¹å¼å‰ç¼€ï¼ŒæŠŠ<code>è¯·æ±‚æ–¹å¼ + è¯·æ±‚è·¯å¾„</code>ä½œä¸ºç°‡ç‚¹èµ„æºåï¼š</p><p>é¦–å…ˆï¼Œåœ¨<code>cart-service</code>çš„<code>application.yml</code>ä¸­æ·»åŠ ä¸‹é¢çš„é…ç½®ï¼š</p><div class="language-yaml line-numbers-mode" data-highlighter="shiki" data-ext="yaml" data-title="yaml" style="--shiki-light:#383A42;--shiki-dark:#abb2bf;--shiki-light-bg:#FAFAFA;--shiki-dark-bg:#282c34;"><pre class="shiki shiki-themes one-light one-dark-pro vp-code"><code><span class="line"><span style="--shiki-light:#E45649;--shiki-dark:#E06C75;">spring</span><span style="--shiki-light:#383A42;--shiki-dark:#ABB2BF;">:</span></span>
<span class="line"><span style="--shiki-light:#E45649;--shiki-dark:#E06C75;">cloud</span><span style="--shiki-light:#383A42;--shiki-dark:#ABB2BF;">:</span></span>
<span class="line"><span style="--shiki-light:#E45649;--shiki-dark:#E06C75;">sentinel</span><span style="--shiki-light:#383A42;--shiki-dark:#ABB2BF;">:</span></span>
<span class="line"><span style="--shiki-light:#E45649;--shiki-dark:#E06C75;">transport</span><span style="--shiki-light:#383A42;--shiki-dark:#ABB2BF;">:</span></span>
<span class="line"><span style="--shiki-light:#E45649;--shiki-dark:#E06C75;">dashboard</span><span style="--shiki-light:#383A42;--shiki-dark:#ABB2BF;">: </span><span style="--shiki-light:#50A14F;--shiki-dark:#98C379;">localhost:8090</span></span>
<span class="line"><span style="--shiki-light:#E45649;--shiki-dark:#E06C75;">http-method-specify</span><span style="--shiki-light:#383A42;--shiki-dark:#ABB2BF;">: </span><span style="--shiki-light:#986801;--shiki-dark:#D19A66;">true</span><span style="--shiki-light:#A0A1A7;--shiki-dark:#7F848E;--shiki-light-font-style:italic;--shiki-dark-font-style:italic;"> # å¼€å¯è¯·æ±‚æ–¹å¼å‰ç¼€</span></span></code></pre><div class="line-numbers" aria-hidden="true" style="counter-reset:line-number 0;"><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div></div></div><p>ç„¶åï¼Œé‡å¯æœåŠ¡ï¼Œé€šè¿‡é¡µé¢è®¿é—®è´­ç‰©è½¦çš„ç›¸å…³æ¥å£ï¼Œå¯ä»¥çœ‹åˆ°sentinelæ§åˆ¶å°çš„ç°‡ç‚¹é“¾è·¯å‘ç”Ÿäº†å˜åŒ–ï¼š</p><figure><img src="/assets/1686885220194-532ea061-eee5-43f2-9abc-73125ef95884-DCm3Pjob.png" alt="img" tabindex="0" loading="lazy"><figcaption>img</figcaption></figure><h2 id="_1-3-è¯·æ±‚é™æµ" tabindex="-1"><a class="header-anchor" href="#_1-3-è¯·æ±‚é™æµ"><span>1.3.è¯·æ±‚é™æµ</span></a></h2><p>åœ¨ç°‡ç‚¹é“¾è·¯åé¢ç‚¹å‡»æµæ§æŒ‰é’®ï¼Œå³å¯å¯¹å…¶åšé™æµé…ç½®ï¼š</p><figure><img src="/assets/1686885272324-aca3a5f9-fc8e-46ca-a9a3-95bc5381691c-K9wY_1JX.png" alt="img" tabindex="0" loading="lazy"><figcaption>img</figcaption></figure><p>åœ¨å¼¹å‡ºçš„èœå•ä¸­è¿™æ ·å¡«å†™ï¼š</p><figure><img src="/assets/1686885310232-41d5a350-ac54-4ab2-a66f-34ebf6e6adcc-BuXh-wY-.png" alt="img" tabindex="0" loading="lazy"><figcaption>img</figcaption></figure><p>è¿™æ ·å°±æŠŠæŸ¥è¯¢è´­ç‰©è½¦åˆ—è¡¨è¿™ä¸ªç°‡ç‚¹èµ„æºçš„æµé‡é™åˆ¶åœ¨äº†æ¯ç§’6ä¸ªï¼Œä¹Ÿå°±æ˜¯æœ€å¤§QPSä¸º6.</p><p>æˆ‘ä»¬åˆ©ç”¨Jemeteråšé™æµæµ‹è¯•ï¼Œæˆ‘ä»¬æ¯ç§’å‘å‡º10ä¸ªè¯·æ±‚ï¼š</p><figure><img src="/assets/1689841340196-b19fbcf5-885a-44a9-83f8-11f6c87d3d4f-DwWGdcEw.png" alt="img" tabindex="0" loading="lazy"><figcaption>img</figcaption></figure><p>æœ€ç»ˆç›‘æ§ç»“æœå¦‚ä¸‹ï¼š</p><figure><img src="/assets/1686885555513-d411c9ef-9984-4380-a3db-bcf391703eb9-BWeIVdag.png" alt="img" tabindex="0" loading="lazy"><figcaption>img</figcaption></figure><p>å¯ä»¥çœ‹å‡º<code>GET:/carts</code>è¿™ä¸ªæ¥å£çš„é€šè¿‡QPSç¨³å®šåœ¨6é™„è¿‘ï¼Œè€Œæ‹’ç»çš„QPSåœ¨4é™„è¿‘ï¼Œç¬¦åˆæˆ‘ä»¬çš„é¢„æœŸã€‚</p><p>å°ç»“</p><div class="language- line-numbers-mode" data-highlighter="shiki" data-ext="" data-title="" style="--shiki-light:#383A42;--shiki-dark:#abb2bf;--shiki-light-bg:#FAFAFA;--shiki-dark-bg:#282c34;"><pre class="shiki shiki-themes one-light one-dark-pro vp-code"><code><span class="line"><span>1) sentinel è¯·æ±‚é™æµæ˜¯ è¢«è°ƒç”¨çš„æœåŠ¡ä¸»åŠ¨é™åˆ¶, (æœåŠ¡æä¾›è€…ä¸»åŠ¨é™åˆ¶)</span></span>
<span class="line"><span>1.) QPS é™åˆ¶ æ¯ç§’è¯·æ±‚æ•°</span></span>
<span class="line"><span>2.)çº¿ç¨‹æ•°é™åˆ¶,é™åˆ¶çš„ çº¿ç¨‹ä¸ªæ•°,</span></span>
<span class="line"><span>2) æ­¥éª¤æ€»ç»“</span></span>
<span class="line"><span>1) å…ˆä¸é…ç½®è§„åˆ™æµ‹è¯•:  jmeter å‘é€è¯·æ±‚ 100/s   (ç»“æœ: å…¨éƒ¨æˆåŠŸ)</span></span>
<span class="line"><span>2) æ–°å¢qps è§„åˆ™ (10qps) æµ‹è¯•:  jmeter å‘é€è¯·æ±‚ 100/s (ç»“æœ,10% é€šè¿‡)</span></span>
<span class="line"><span>3) åˆ é™¤ä¸Šä¸€ä¸ªè§„åˆ™,ç»§ç»­æ–°å¢ çº¿ç¨‹é™åˆ¶  æµ‹è¯•:  jmeter å‘é€è¯·æ±‚ 100/s    (ç»“æœ,è·Ÿæ—¶é—´æœ‰å…³)</span></span></code></pre><div class="line-numbers" aria-hidden="true" style="counter-reset:line-number 0;"><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div></div></div><h2 id="_1-4-çº¿ç¨‹éš”ç¦»" tabindex="-1"><a class="header-anchor" href="#_1-4-çº¿ç¨‹éš”ç¦»"><span>1.4.çº¿ç¨‹éš”ç¦»</span></a></h2><p>é™æµå¯ä»¥é™ä½æœåŠ¡å™¨å‹åŠ›ï¼Œå°½é‡å‡å°‘å› å¹¶å‘æµé‡å¼•èµ·çš„æœåŠ¡æ•…éšœçš„æ¦‚ç‡ï¼Œä½†å¹¶ä¸èƒ½å®Œå…¨é¿å…æœåŠ¡æ•…éšœã€‚ä¸€æ—¦æŸä¸ªæœåŠ¡å‡ºç°æ•…éšœï¼Œæˆ‘ä»¬å¿…é¡»éš”ç¦»å¯¹è¿™ä¸ªæœåŠ¡çš„è°ƒç”¨ï¼Œé¿å…å‘ç”Ÿé›ªå´©ã€‚</p><p>æ¯”å¦‚ï¼ŒæŸ¥è¯¢è´­ç‰©è½¦çš„æ—¶å€™éœ€è¦æŸ¥è¯¢å•†å“ï¼Œä¸ºäº†é¿å…å› å•†å“æœåŠ¡å‡ºç°æ•…éšœå¯¼è‡´è´­ç‰©è½¦æœåŠ¡çº§è”å¤±è´¥ï¼Œæˆ‘ä»¬å¯ä»¥æŠŠè´­ç‰©è½¦ä¸šåŠ¡ä¸­æŸ¥è¯¢å•†å“çš„éƒ¨åˆ†éš”ç¦»èµ·æ¥ï¼Œé™åˆ¶å¯ç”¨çš„çº¿ç¨‹èµ„æºï¼š</p><figure><img src="/assets/1686748830410-f511dfd7-de3b-4a2a-973e-a6bbe7b8a03a-BF6fVAta.jpeg" alt="img" tabindex="0" loading="lazy"><figcaption>img</figcaption></figure><p>è¿™æ ·ï¼Œå³ä¾¿å•†å“æœåŠ¡å‡ºç°æ•…éšœï¼Œæœ€å¤šå¯¼è‡´æŸ¥è¯¢è´­ç‰©è½¦ä¸šåŠ¡æ•…éšœï¼Œå¹¶ä¸”å¯ç”¨çš„çº¿ç¨‹èµ„æºä¹Ÿè¢«é™å®šåœ¨ä¸€å®šèŒƒå›´ï¼Œä¸ä¼šå¯¼è‡´æ•´ä¸ªè´­ç‰©è½¦æœåŠ¡å´©æºƒã€‚</p><p>æ‰€ä»¥ï¼Œæˆ‘ä»¬è¦å¯¹æŸ¥è¯¢å•†å“çš„FeignClientæ¥å£åšçº¿ç¨‹éš”ç¦»ã€‚</p><h3 id="_1-4-1-openfeignæ•´åˆsentinel" tabindex="-1"><a class="header-anchor" href="#_1-4-1-openfeignæ•´åˆsentinel"><span>1.4.1.OpenFeignæ•´åˆSentinel</span></a></h3><p>ä¿®æ”¹cart-serviceæ¨¡å—çš„application.ymlæ–‡ä»¶ï¼Œå¼€å¯Feignçš„sentinelåŠŸèƒ½ï¼š</p><div class="language-yaml line-numbers-mode" data-highlighter="shiki" data-ext="yaml" data-title="yaml" style="--shiki-light:#383A42;--shiki-dark:#abb2bf;--shiki-light-bg:#FAFAFA;--shiki-dark-bg:#282c34;"><pre class="shiki shiki-themes one-light one-dark-pro vp-code"><code><span class="line"><span style="--shiki-light:#E45649;--shiki-dark:#E06C75;">feign</span><span style="--shiki-light:#383A42;--shiki-dark:#ABB2BF;">:</span></span>
<span class="line"><span style="--shiki-light:#E45649;--shiki-dark:#E06C75;">sentinel</span><span style="--shiki-light:#383A42;--shiki-dark:#ABB2BF;">:</span></span>
<span class="line"><span style="--shiki-light:#E45649;--shiki-dark:#E06C75;">enabled</span><span style="--shiki-light:#383A42;--shiki-dark:#ABB2BF;">: </span><span style="--shiki-light:#986801;--shiki-dark:#D19A66;">true</span><span style="--shiki-light:#A0A1A7;--shiki-dark:#7F848E;--shiki-light-font-style:italic;--shiki-dark-font-style:italic;"> # å¼€å¯feignå¯¹sentinelçš„æ”¯æŒ</span></span></code></pre><div class="line-numbers" aria-hidden="true" style="counter-reset:line-number 0;"><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div></div></div><p>ç„¶åé‡å¯cart-serviceæœåŠ¡ï¼Œå¯ä»¥çœ‹åˆ°æŸ¥è¯¢å•†å“çš„FeignClientè‡ªåŠ¨å˜æˆäº†ä¸€ä¸ªç°‡ç‚¹èµ„æºï¼š</p><figure><img src="/assets/1686885760472-2e0c3f08-b352-4325-97a5-4a3c00f9916b-DzPr7VCd.png" alt="img" tabindex="0" loading="lazy"><figcaption>img</figcaption></figure><h3 id="_1-4-2-é…ç½®çº¿ç¨‹éš”ç¦»" tabindex="-1"><a class="header-anchor" href="#_1-4-2-é…ç½®çº¿ç¨‹éš”ç¦»"><span>1.4.2.é…ç½®çº¿ç¨‹éš”ç¦»</span></a></h3><p>æ¥ä¸‹æ¥ï¼Œç‚¹å‡»æŸ¥è¯¢å•†å“çš„FeignClientå¯¹åº”çš„ç°‡ç‚¹èµ„æºåé¢çš„æµæ§æŒ‰é’®ï¼š</p><figure><img src="/assets/1686829485088-161435fe-a549-4aa3-a25f-bd860c5d2e44-FkObSmyA.png" alt="img" tabindex="0" loading="lazy"><figcaption>img</figcaption></figure><p>åœ¨å¼¹å‡ºçš„è¡¨å•ä¸­å¡«å†™ä¸‹é¢å†…å®¹ï¼š</p><figure><img src="/assets/1686829605806-ab33dd46-9951-4731-91bd-3b59f18a3a65-rjlpIziE.png" alt="img" tabindex="0" loading="lazy"><figcaption>img</figcaption></figure><p>æ³¨æ„ï¼Œè¿™é‡Œå‹¾é€‰çš„æ˜¯å¹¶å‘çº¿ç¨‹æ•°é™åˆ¶ï¼Œä¹Ÿå°±æ˜¯è¯´è¿™ä¸ªæŸ¥è¯¢åŠŸèƒ½æœ€å¤šä½¿ç”¨5ä¸ªçº¿ç¨‹ï¼Œè€Œä¸æ˜¯5QPSã€‚å¦‚æœæŸ¥è¯¢å•†å“çš„æ¥å£æ¯ç§’å¤„ç†2ä¸ªè¯·æ±‚ï¼Œåˆ™5ä¸ªçº¿ç¨‹çš„å®é™…QPSåœ¨10å·¦å³ï¼Œè€Œè¶…å‡ºçš„è¯·æ±‚è‡ªç„¶ä¼šè¢«æ‹’ç»ã€‚</p><figure><img src="/assets/1686829786386-6343efa4-3d69-4636-b8ce-6f997fab05c7-G1q1kAXb.png" alt="img" tabindex="0" loading="lazy"><figcaption>img</figcaption></figure><p>æˆ‘ä»¬åˆ©ç”¨Jemeteræµ‹è¯•ï¼Œæ¯ç§’å‘é€100ä¸ªè¯·æ±‚ï¼š</p><figure><img src="/assets/1689844724618-8da0dcdc-6f69-40e9-bbd0-f1af52fb7e45-DOBQWmuH.png" alt="img" tabindex="0" loading="lazy"><figcaption>img</figcaption></figure><p>æœ€ç»ˆæµ‹è¯•ç»“æœå¦‚ä¸‹ï¼š</p><figure><img src="/assets/1686886050666-c5a86806-efc8-41ea-9582-94394d0a3799-DM7ufdx6.png" alt="img" tabindex="0" loading="lazy"><figcaption>img</figcaption></figure><p>è¿›å…¥æŸ¥è¯¢è´­ç‰©è½¦çš„è¯·æ±‚æ¯ç§’å¤§æ¦‚åœ¨100ï¼Œè€Œåœ¨æŸ¥è¯¢å•†å“æ—¶å´åªå‰©ä¸‹æ¯ç§’10å·¦å³ï¼Œç¬¦åˆæˆ‘ä»¬çš„é¢„æœŸã€‚</p><p>æ­¤æ—¶å¦‚æœæˆ‘ä»¬é€šè¿‡é¡µé¢è®¿é—®è´­ç‰©è½¦çš„å…¶å®ƒæ¥å£ï¼Œä¾‹å¦‚æ·»åŠ è´­ç‰©è½¦ã€ä¿®æ”¹è´­ç‰©è½¦å•†å“æ•°é‡ï¼Œå‘ç°ä¸å—å½±å“ï¼š</p><figure><img src="/assets/1686887465210-f688c6ee-18d9-4146-bcc8-1d9179057ba4-CoA482LJ.png" alt="img" tabindex="0" loading="lazy"><figcaption>img</figcaption></figure><p>å“åº”æ—¶é—´éå¸¸çŸ­ï¼Œè¿™å°±è¯æ˜çº¿ç¨‹éš”ç¦»èµ·åˆ°äº†ä½œç”¨ï¼Œå°½ç®¡æŸ¥è¯¢è´­ç‰©è½¦è¿™ä¸ªæ¥å£å¹¶å‘å¾ˆé«˜ï¼Œä½†æ˜¯å®ƒèƒ½ä½¿ç”¨çš„çº¿ç¨‹èµ„æºè¢«é™åˆ¶äº†ï¼Œå› æ­¤ä¸ä¼šå½±å“åˆ°å…¶å®ƒæ¥å£ã€‚</p><div class="language- line-numbers-mode" data-highlighter="shiki" data-ext="" data-title="" style="--shiki-light:#383A42;--shiki-dark:#abb2bf;--shiki-light-bg:#FAFAFA;--shiki-dark-bg:#282c34;"><pre class="shiki shiki-themes one-light one-dark-pro vp-code"><code><span class="line"><span>ä¸»åŠ¨æ§åˆ¶Feign è¿œç¨‹è°ƒç”¨æ—¶çš„ çº¿ç¨‹</span></span>
<span class="line"><span>æ­¥éª¤</span></span>
<span class="line"><span>1) æœåŠ¡çš„è°ƒç”¨è€…é…ç½® feign.sentinel.enabled=true</span></span>
<span class="line"><span>2) æ§åˆ¶å°é…ç½®  item-service è°ƒç”¨çš„ é™åˆ¶è§„åˆ™(çº¿ç¨‹)</span></span>
<span class="line"><span>3) ä¸ºäº†æµ‹è¯•,æˆ‘ä»¬åœ¨  item-service çš„æ–¹æ³•ä¸Šå¢åŠ  Thread.sleep(500)</span></span>
<span class="line"><span>4) å¹¶å‘æµ‹è¯•</span></span></code></pre><div class="line-numbers" aria-hidden="true" style="counter-reset:line-number 0;"><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div></div></div><h2 id="_1-5-æœåŠ¡ç†”æ–­" tabindex="-1"><a class="header-anchor" href="#_1-5-æœåŠ¡ç†”æ–­"><span>1.5.æœåŠ¡ç†”æ–­</span></a></h2><p>åœ¨ä¸ŠèŠ‚è¯¾ï¼Œæˆ‘ä»¬åˆ©ç”¨çº¿ç¨‹éš”ç¦»å¯¹æŸ¥è¯¢è´­ç‰©è½¦ä¸šåŠ¡è¿›è¡Œéš”ç¦»ï¼Œä¿æŠ¤äº†è´­ç‰©è½¦æœåŠ¡çš„å…¶å®ƒæ¥å£ã€‚ç”±äºæŸ¥è¯¢å•†å“çš„åŠŸèƒ½è€—æ—¶è¾ƒé«˜ï¼ˆæˆ‘ä»¬æ¨¡æ‹Ÿäº†500æ¯«ç§’å»¶æ—¶ï¼‰ï¼Œå†åŠ ä¸Šçº¿ç¨‹éš”ç¦»é™å®šäº†çº¿ç¨‹æ•°ä¸º5ï¼Œå¯¼è‡´æ¥å£ååèƒ½åŠ›æœ‰é™ï¼Œæœ€ç»ˆQPSåªæœ‰10å·¦å³ã€‚è¿™å°±å¯¼è‡´äº†å‡ ä¸ªé—®é¢˜ï¼š</p><p>ç¬¬ä¸€ï¼Œè¶…å‡ºçš„QPSä¸Šé™çš„è¯·æ±‚å°±åªèƒ½æŠ›å‡ºå¼‚å¸¸ï¼Œä»è€Œå¯¼è‡´è´­ç‰©è½¦çš„æŸ¥è¯¢å¤±è´¥ã€‚ä½†ä»ä¸šåŠ¡è§’åº¦æ¥è¯´ï¼Œå³ä¾¿æ²¡æœ‰æŸ¥è¯¢åˆ°æœ€æ–°çš„å•†å“ä¿¡æ¯ï¼Œè´­ç‰©è½¦ä¹Ÿåº”è¯¥å±•ç¤ºç»™ç”¨æˆ·ï¼Œç”¨æˆ·ä½“éªŒæ›´å¥½ã€‚ä¹Ÿå°±æ˜¯ç»™æŸ¥è¯¢å¤±è´¥è®¾ç½®ä¸€ä¸ª <strong>é™çº§å¤„ç†</strong>é€»è¾‘ã€‚</p><p>ç¬¬äºŒï¼Œç”±äºæŸ¥è¯¢å•†å“çš„å»¶è¿Ÿè¾ƒé«˜ï¼ˆæ¨¡æ‹Ÿçš„500msï¼‰ï¼Œä»è€Œå¯¼è‡´æŸ¥è¯¢è´­ç‰©è½¦çš„å“åº”æ—¶é—´ä¹Ÿå˜çš„å¾ˆé•¿ã€‚è¿™æ ·ä¸ä»…æ‹–æ…¢äº†è´­ç‰©è½¦æœåŠ¡ï¼Œæ¶ˆè€—äº†è´­ç‰©è½¦æœåŠ¡çš„æ›´å¤šèµ„æºï¼Œè€Œä¸”ç”¨æˆ·ä½“éªŒä¹Ÿå¾ˆå·®ã€‚å¯¹äºå•†å“æœåŠ¡è¿™ç§ä¸å¤ªå¥åº·çš„æ¥å£ï¼Œæˆ‘ä»¬åº”è¯¥ç›´æ¥åœæ­¢è°ƒç”¨ï¼Œç›´æ¥èµ°é™çº§é€»è¾‘ï¼Œé¿å…å½±å“åˆ°å½“å‰æœåŠ¡ã€‚ä¹Ÿå°±æ˜¯å°†å•†å“æŸ¥è¯¢æ¥å£ <strong>ç†”æ–­</strong>ã€‚</p><h3 id="_1-5-1-ç¼–å†™é™çº§é€»è¾‘" tabindex="-1"><a class="header-anchor" href="#_1-5-1-ç¼–å†™é™çº§é€»è¾‘"><span>1.5.1.ç¼–å†™é™çº§é€»è¾‘</span></a></h3><p>è§¦å‘é™æµæˆ–ç†”æ–­åçš„è¯·æ±‚ä¸ä¸€å®šè¦ç›´æ¥æŠ¥é”™ï¼Œä¹Ÿå¯ä»¥è¿”å›ä¸€äº›é»˜è®¤æ•°æ®æˆ–è€…å‹å¥½æç¤ºï¼Œç”¨æˆ·ä½“éªŒä¼šæ›´å¥½ã€‚</p><p>ç»™FeignClientç¼–å†™å¤±è´¥åçš„é™çº§é€»è¾‘æœ‰ä¸¤ç§æ–¹å¼ï¼š</p><ul><li>æ–¹å¼ä¸€ï¼šFallbackClassï¼Œæ— æ³•å¯¹è¿œç¨‹è°ƒç”¨çš„å¼‚å¸¸åšå¤„ç†</li><li>æ–¹å¼äºŒï¼šFallbackFactoryï¼Œå¯ä»¥å¯¹è¿œç¨‹è°ƒç”¨çš„å¼‚å¸¸åšå¤„ç†ï¼Œæˆ‘ä»¬ä¸€èˆ¬é€‰æ‹©è¿™ç§æ–¹å¼ã€‚</li></ul><p>è¿™é‡Œæˆ‘ä»¬æ¼”ç¤ºæ–¹å¼äºŒçš„å¤±è´¥é™çº§å¤„ç†ã€‚</p><p><strong>æ­¥éª¤ä¸€</strong>ï¼šåœ¨hm-apiæ¨¡å—ä¸­ç»™<code>ItemClient</code>å®šä¹‰é™çº§å¤„ç†ç±»ï¼Œå®ç°<code>FallbackFactory</code>ï¼š</p><figure><img src="/assets/1686902576331-7d3b4637-26d2-496e-8948-6c76f2f836b9-DWJcAUU0.png" alt="img" tabindex="0" loading="lazy"><figcaption>img</figcaption></figure><p>ä»£ç å¦‚ä¸‹ï¼š</p><div class="language-java line-numbers-mode" data-highlighter="shiki" data-ext="java" data-title="java" style="--shiki-light:#383A42;--shiki-dark:#abb2bf;--shiki-light-bg:#FAFAFA;--shiki-dark-bg:#282c34;"><pre class="shiki shiki-themes one-light one-dark-pro vp-code"><code><span class="line"><span style="--shiki-light:#A626A4;--shiki-dark:#C678DD;">package</span><span style="--shiki-light:#383A42;--shiki-dark:#C678DD;"> com.hmall.api.client.fallback</span><span style="--shiki-light:#383A42;--shiki-dark:#ABB2BF;">;</span></span>
<span class="line"></span>
<span class="line"><span style="--shiki-light:#A626A4;--shiki-dark:#C678DD;">import</span><span style="--shiki-light:#C18401;--shiki-dark:#E5C07B;"> com.hmall.api.client.ItemClient</span><span style="--shiki-light:#383A42;--shiki-dark:#ABB2BF;">;</span></span>
<span class="line"><span style="--shiki-light:#A626A4;--shiki-dark:#C678DD;">import</span><span style="--shiki-light:#C18401;--shiki-dark:#E5C07B;"> com.hmall.api.dto.ItemDTO</span><span style="--shiki-light:#383A42;--shiki-dark:#ABB2BF;">;</span></span>
<span class="line"><span style="--shiki-light:#A626A4;--shiki-dark:#C678DD;">import</span><span style="--shiki-light:#C18401;--shiki-dark:#E5C07B;"> com.hmall.api.dto.OrderDetailDTO</span><span style="--shiki-light:#383A42;--shiki-dark:#ABB2BF;">;</span></span>
<span class="line"><span style="--shiki-light:#A626A4;--shiki-dark:#C678DD;">import</span><span style="--shiki-light:#C18401;--shiki-dark:#E5C07B;"> com.hmall.common.exception.BizIllegalException</span><span style="--shiki-light:#383A42;--shiki-dark:#ABB2BF;">;</span></span>
<span class="line"><span style="--shiki-light:#A626A4;--shiki-dark:#C678DD;">import</span><span style="--shiki-light:#C18401;--shiki-dark:#E5C07B;"> com.hmall.common.utils.CollUtils</span><span style="--shiki-light:#383A42;--shiki-dark:#ABB2BF;">;</span></span>
<span class="line"><span style="--shiki-light:#A626A4;--shiki-dark:#C678DD;">import</span><span style="--shiki-light:#C18401;--shiki-dark:#E5C07B;"> lombok.extern.slf4j.Slf4j</span><span style="--shiki-light:#383A42;--shiki-dark:#ABB2BF;">;</span></span>
<span class="line"><span style="--shiki-light:#A626A4;--shiki-dark:#C678DD;">import</span><span style="--shiki-light:#C18401;--shiki-dark:#E5C07B;"> org.springframework.cloud.openfeign.FallbackFactory</span><span style="--shiki-light:#383A42;--shiki-dark:#ABB2BF;">;</span></span>
<span class="line"></span>
<span class="line"><span style="--shiki-light:#A626A4;--shiki-dark:#C678DD;">import</span><span style="--shiki-light:#C18401;--shiki-dark:#E5C07B;"> java.util.Collection</span><span style="--shiki-light:#383A42;--shiki-dark:#ABB2BF;">;</span></span>
<span class="line"><span style="--shiki-light:#A626A4;--shiki-dark:#C678DD;">import</span><span style="--shiki-light:#C18401;--shiki-dark:#E5C07B;"> java.util.List</span><span style="--shiki-light:#383A42;--shiki-dark:#ABB2BF;">;</span></span>
<span class="line"></span>
<span class="line"><span style="--shiki-light:#383A42;--shiki-dark:#ABB2BF;">@</span><span style="--shiki-light:#A626A4;--shiki-dark:#E5C07B;">Slf4j</span></span>
<span class="line"><span style="--shiki-light:#A626A4;--shiki-dark:#C678DD;">public</span><span style="--shiki-light:#A626A4;--shiki-dark:#C678DD;"> class</span><span style="--shiki-light:#C18401;--shiki-dark:#E5C07B;"> ItemClientFallback</span><span style="--shiki-light:#A626A4;--shiki-dark:#C678DD;"> implements</span><span style="--shiki-light:#C18401;--shiki-dark:#E5C07B;"> FallbackFactory</span><span style="--shiki-light:#C18401;--shiki-dark:#ABB2BF;">&lt;</span><span style="--shiki-light:#C18401;--shiki-dark:#E5C07B;">ItemClient</span><span style="--shiki-light:#C18401;--shiki-dark:#ABB2BF;">&gt;</span><span style="--shiki-light:#383A42;--shiki-dark:#ABB2BF;"> {</span></span>
<span class="line"><span style="--shiki-light:#383A42;--shiki-dark:#ABB2BF;">@</span><span style="--shiki-light:#A626A4;--shiki-dark:#E5C07B;">Override</span></span>
<span class="line"><span style="--shiki-light:#A626A4;--shiki-dark:#C678DD;">public</span><span style="--shiki-light:#C18401;--shiki-dark:#E5C07B;"> ItemClient</span><span style="--shiki-light:#4078F2;--shiki-dark:#61AFEF;"> create</span><span style="--shiki-light:#383A42;--shiki-dark:#ABB2BF;">(</span><span style="--shiki-light:#C18401;--shiki-dark:#E5C07B;">Throwable</span><span style="--shiki-light:#383A42;--shiki-dark:#E06C75;--shiki-light-font-style:inherit;--shiki-dark-font-style:italic;"> cause</span><span style="--shiki-light:#383A42;--shiki-dark:#ABB2BF;">)</span><span style="--shiki-light:#383A42;--shiki-dark:#ABB2BF;"> {</span></span>
<span class="line"><span style="--shiki-light:#A626A4;--shiki-dark:#C678DD;">return</span><span style="--shiki-light:#A626A4;--shiki-dark:#C678DD;"> new</span><span style="--shiki-light:#4078F2;--shiki-dark:#61AFEF;"> ItemClient</span><span style="--shiki-light:#383A42;--shiki-dark:#ABB2BF;">() {</span></span>
<span class="line"><span style="--shiki-light:#383A42;--shiki-dark:#ABB2BF;">@</span><span style="--shiki-light:#A626A4;--shiki-dark:#E5C07B;">Override</span></span>
<span class="line"><span style="--shiki-light:#A626A4;--shiki-dark:#C678DD;">public</span><span style="--shiki-light:#C18401;--shiki-dark:#E5C07B;"> List</span><span style="--shiki-light:#383A42;--shiki-dark:#ABB2BF;">&lt;</span><span style="--shiki-light:#C18401;--shiki-dark:#E5C07B;">ItemDTO</span><span style="--shiki-light:#383A42;--shiki-dark:#ABB2BF;">&gt;</span><span style="--shiki-light:#4078F2;--shiki-dark:#61AFEF;"> queryItemByIds</span><span style="--shiki-light:#383A42;--shiki-dark:#ABB2BF;">(</span><span style="--shiki-light:#C18401;--shiki-dark:#E5C07B;">Collection</span><span style="--shiki-light:#383A42;--shiki-dark:#ABB2BF;">&lt;</span><span style="--shiki-light:#C18401;--shiki-dark:#E5C07B;">Long</span><span style="--shiki-light:#383A42;--shiki-dark:#ABB2BF;">&gt; </span><span style="--shiki-light:#383A42;--shiki-dark:#E06C75;--shiki-light-font-style:inherit;--shiki-dark-font-style:italic;">ids</span><span style="--shiki-light:#383A42;--shiki-dark:#ABB2BF;">)</span><span style="--shiki-light:#383A42;--shiki-dark:#ABB2BF;"> {</span></span>
<span class="line"><span style="--shiki-light:#E45649;--shiki-dark:#E5C07B;">log</span><span style="--shiki-light:#383A42;--shiki-dark:#ABB2BF;">.</span><span style="--shiki-light:#4078F2;--shiki-dark:#61AFEF;">error</span><span style="--shiki-light:#383A42;--shiki-dark:#ABB2BF;">(</span><span style="--shiki-light:#50A14F;--shiki-dark:#98C379;">&quot;è¿œç¨‹è°ƒç”¨ItemClient#queryItemByIdsæ–¹æ³•å‡ºç°å¼‚å¸¸ï¼Œå‚æ•°ï¼š{}&quot;</span><span style="--shiki-light:#383A42;--shiki-dark:#ABB2BF;">, ids, cause);</span></span>
<span class="line"><span style="--shiki-light:#A0A1A7;--shiki-dark:#7F848E;--shiki-light-font-style:italic;--shiki-dark-font-style:italic;">// æŸ¥è¯¢è´­ç‰©è½¦å…è®¸å¤±è´¥ï¼ŒæŸ¥è¯¢å¤±è´¥ï¼Œè¿”å›ç©ºé›†åˆ</span></span>
<span class="line"><span style="--shiki-light:#A626A4;--shiki-dark:#C678DD;">return</span><span style="--shiki-light:#E45649;--shiki-dark:#E5C07B;"> CollUtils</span><span style="--shiki-light:#383A42;--shiki-dark:#ABB2BF;">.</span><span style="--shiki-light:#4078F2;--shiki-dark:#61AFEF;">emptyList</span><span style="--shiki-light:#383A42;--shiki-dark:#ABB2BF;">();</span></span>
<span class="line"><span style="--shiki-light:#383A42;--shiki-dark:#ABB2BF;">}</span></span>
<span class="line"></span>
<span class="line"><span style="--shiki-light:#383A42;--shiki-dark:#ABB2BF;">@</span><span style="--shiki-light:#A626A4;--shiki-dark:#E5C07B;">Override</span></span>
<span class="line"><span style="--shiki-light:#A626A4;--shiki-dark:#C678DD;">public</span><span style="--shiki-light:#A626A4;--shiki-dark:#C678DD;"> void</span><span style="--shiki-light:#4078F2;--shiki-dark:#61AFEF;"> deductStock</span><span style="--shiki-light:#383A42;--shiki-dark:#ABB2BF;">(</span><span style="--shiki-light:#C18401;--shiki-dark:#E5C07B;">List</span><span style="--shiki-light:#383A42;--shiki-dark:#ABB2BF;">&lt;</span><span style="--shiki-light:#C18401;--shiki-dark:#E5C07B;">OrderDetailDTO</span><span style="--shiki-light:#383A42;--shiki-dark:#ABB2BF;">&gt; </span><span style="--shiki-light:#383A42;--shiki-dark:#E06C75;--shiki-light-font-style:inherit;--shiki-dark-font-style:italic;">items</span><span style="--shiki-light:#383A42;--shiki-dark:#ABB2BF;">)</span><span style="--shiki-light:#383A42;--shiki-dark:#ABB2BF;"> {</span></span>
<span class="line"><span style="--shiki-light:#A0A1A7;--shiki-dark:#7F848E;--shiki-light-font-style:italic;--shiki-dark-font-style:italic;">// åº“å­˜æ‰£å‡ä¸šåŠ¡éœ€è¦è§¦å‘äº‹åŠ¡å›æ»šï¼ŒæŸ¥è¯¢å¤±è´¥ï¼ŒæŠ›å‡ºå¼‚å¸¸</span></span>
<span class="line"><span style="--shiki-light:#A626A4;--shiki-dark:#C678DD;">throw</span><span style="--shiki-light:#A626A4;--shiki-dark:#C678DD;"> new</span><span style="--shiki-light:#4078F2;--shiki-dark:#61AFEF;"> BizIllegalException</span><span style="--shiki-light:#383A42;--shiki-dark:#ABB2BF;">(cause);</span></span>
<span class="line"><span style="--shiki-light:#383A42;--shiki-dark:#ABB2BF;">}</span></span>
<span class="line"><span style="--shiki-light:#383A42;--shiki-dark:#ABB2BF;">};</span></span>
<span class="line"><span style="--shiki-light:#383A42;--shiki-dark:#ABB2BF;">}</span></span>
<span class="line"><span style="--shiki-light:#383A42;--shiki-dark:#ABB2BF;">}</span></span></code></pre><div class="line-numbers" aria-hidden="true" style="counter-reset:line-number 0;"><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div></div></div><p><strong>æ­¥éª¤äºŒ</strong>ï¼šåœ¨<code>hm-api</code>æ¨¡å—ä¸­çš„<code>com.hmall.api.config.DefaultFeignConfig</code>ç±»ä¸­å°†<code>ItemClientFallback</code>æ³¨å†Œä¸ºä¸€ä¸ª <code>Bean</code>ï¼š<img src="/assets/1686902888866-709cd567-f8aa-42a6-80c5-3e85458df499-CIQgeIvF.png" alt="img" loading="lazy"></p><p><strong>æ­¥éª¤ä¸‰</strong>ï¼šåœ¨<code>hm-api</code>æ¨¡å—ä¸­çš„<code>ItemClient</code>æ¥å£ä¸­ä½¿ç”¨<code>ItemClientFallbackFactory</code>ï¼š</p><figure><img src="/assets/1686903019164-5be91419-1ecb-4367-ba6e-f2060d2c1172-BqWdXfQF.png" alt="img" tabindex="0" loading="lazy"><figcaption>img</figcaption></figure><p>é‡å¯åï¼Œå†æ¬¡æµ‹è¯•ï¼Œå‘ç°è¢«é™æµçš„è¯·æ±‚ä¸å†æŠ¥é”™ï¼Œèµ°äº†é™çº§é€»è¾‘ï¼š</p><figure><img src="/assets/1686903688780-9ab6102d-7ffb-4f69-816f-7d2bc3371de2-CYg4Cm3t.png" alt="img" tabindex="0" loading="lazy"><figcaption>img</figcaption></figure><p>ä½†æ˜¯æœªè¢«é™æµçš„è¯·æ±‚å»¶æ—¶ä¾ç„¶å¾ˆé«˜ï¼š</p><figure><img src="/assets/1686903399049-cc7905c6-2fec-460f-aff8-72c6f6b10766-3cWZBu6M.png" alt="img" tabindex="0" loading="lazy"><figcaption>img</figcaption></figure><p>å¯¼è‡´æœ€ç»ˆçš„å¹³å±€å“åº”æ—¶é—´è¾ƒé•¿ã€‚</p><h3 id="_1-5-2-æœåŠ¡ç†”æ–­" tabindex="-1"><a class="header-anchor" href="#_1-5-2-æœåŠ¡ç†”æ–­"><span>1.5.2.æœåŠ¡ç†”æ–­</span></a></h3><p>æŸ¥è¯¢å•†å“çš„RTè¾ƒé«˜ï¼ˆæ¨¡æ‹Ÿçš„500msï¼‰ï¼Œä»è€Œå¯¼è‡´æŸ¥è¯¢è´­ç‰©è½¦çš„RTä¹Ÿå˜çš„å¾ˆé•¿ã€‚è¿™æ ·ä¸ä»…æ‹–æ…¢äº†è´­ç‰©è½¦æœåŠ¡ï¼Œæ¶ˆè€—äº†è´­ç‰©è½¦æœåŠ¡çš„æ›´å¤šèµ„æºï¼Œè€Œä¸”ç”¨æˆ·ä½“éªŒä¹Ÿå¾ˆå·®ã€‚</p><p>å¯¹äºå•†å“æœåŠ¡è¿™ç§ä¸å¤ªå¥åº·çš„æ¥å£ï¼Œæˆ‘ä»¬åº”è¯¥åœæ­¢è°ƒç”¨ï¼Œç›´æ¥èµ°é™çº§é€»è¾‘ï¼Œé¿å…å½±å“åˆ°å½“å‰æœåŠ¡ã€‚ä¹Ÿå°±æ˜¯å°†å•†å“æŸ¥è¯¢æ¥å£<strong>ç†”æ–­</strong> ã€‚å½“å•†å“æœåŠ¡æ¥å£æ¢å¤æ­£å¸¸åï¼Œå†å…è®¸è°ƒç”¨ã€‚è¿™å…¶å®å°±æ˜¯<strong>æ–­è·¯å™¨</strong>çš„å·¥ä½œæ¨¡å¼äº†ã€‚</p><p>Sentinelä¸­çš„æ–­è·¯å™¨ä¸ä»…å¯ä»¥ç»Ÿè®¡æŸä¸ªæ¥å£çš„<strong>æ…¢è¯·æ±‚æ¯”ä¾‹</strong>ï¼Œè¿˜å¯ä»¥ç»Ÿè®¡<strong>å¼‚å¸¸è¯·æ±‚æ¯”ä¾‹</strong>ã€‚å½“è¿™äº›æ¯”ä¾‹è¶…å‡ºé˜ˆå€¼æ—¶ï¼Œå°±ä¼š<strong>ç†”æ–­</strong> è¯¥æ¥å£ï¼Œå³æ‹¦æˆªè®¿é—®è¯¥æ¥å£çš„ä¸€åˆ‡è¯·æ±‚ï¼Œé™çº§å¤„ç†ï¼›å½“è¯¥æ¥å£æ¢å¤æ­£å¸¸æ—¶ï¼Œå†æ”¾è¡Œå¯¹äºè¯¥æ¥å£çš„è¯·æ±‚ã€‚</p><p>æ–­è·¯å™¨çš„å·¥ä½œçŠ¶æ€åˆ‡æ¢æœ‰ä¸€ä¸ªçŠ¶æ€æœºæ¥æ§åˆ¶ï¼š</p><figure><img src="/assets/1686904579751-01076143-949e-45cf-96d4-26a337e09af2-gHA1547D.jpeg" alt="img" tabindex="0" loading="lazy"><figcaption>img</figcaption></figure><p>çŠ¶æ€æœºåŒ…æ‹¬ä¸‰ä¸ªçŠ¶æ€ï¼š</p><ul><li><p><strong>closed</strong>ï¼šå…³é—­çŠ¶æ€ï¼Œæ–­è·¯å™¨æ”¾è¡Œæ‰€æœ‰è¯·æ±‚ï¼Œå¹¶å¼€å§‹ç»Ÿè®¡å¼‚å¸¸æ¯”ä¾‹ã€æ…¢è¯·æ±‚æ¯”ä¾‹ã€‚è¶…è¿‡é˜ˆå€¼åˆ™åˆ‡æ¢åˆ°opençŠ¶æ€</p></li><li><p><strong>open</strong>ï¼šæ‰“å¼€çŠ¶æ€ï¼ŒæœåŠ¡è°ƒç”¨è¢«<strong>ç†”æ–­</strong>ï¼Œè®¿é—®è¢«ç†”æ–­æœåŠ¡çš„è¯·æ±‚ä¼šè¢«æ‹’ç»ï¼Œå¿«é€Ÿå¤±è´¥ï¼Œç›´æ¥èµ°é™çº§é€»è¾‘ã€‚OpençŠ¶æ€æŒç»­ä¸€æ®µæ—¶é—´åä¼šè¿›å…¥half-opençŠ¶æ€</p></li><li><p><strong>half-open</strong>ï¼šåŠå¼€çŠ¶æ€ï¼Œæ”¾è¡Œä¸€æ¬¡è¯·æ±‚ï¼Œæ ¹æ®æ‰§è¡Œç»“æœæ¥åˆ¤æ–­æ¥ä¸‹æ¥çš„æ“ä½œã€‚</p></li><li><ul><li>è¯·æ±‚æˆåŠŸï¼šåˆ™åˆ‡æ¢åˆ°closedçŠ¶æ€</li></ul></li><li><p>è¯·æ±‚å¤±è´¥ï¼šåˆ™åˆ‡æ¢åˆ°opençŠ¶æ€</p></li></ul><p>æˆ‘ä»¬å¯ä»¥åœ¨æ§åˆ¶å°é€šè¿‡ç‚¹å‡»ç°‡ç‚¹åçš„<code>**ç†”æ–­**</code>æŒ‰é’®æ¥é…ç½®ç†”æ–­ç­–ç•¥ï¼š</p><figure><img src="/assets/1686904811084-66243c68-0b0a-4de4-900b-f3652da3e4e2-CPIietgi.png" alt="img" tabindex="0" loading="lazy"><figcaption>img</figcaption></figure><p>åœ¨å¼¹å‡ºçš„è¡¨æ ¼ä¸­è¿™æ ·å¡«å†™ï¼š</p><figure><img src="/assets/1686904753930-e67284f4-004f-4b51-83d4-61526e52adc8-tj-2nL81.png" alt="img" tabindex="0" loading="lazy"><figcaption>img</figcaption></figure><figure><img src="/assets/image-20231125121049623-Bcsm5jqg.png" alt="image-20231125121049623" tabindex="0" loading="lazy"><figcaption>image-20231125121049623</figcaption></figure><p>è¿™ç§æ˜¯æŒ‰ç…§æ…¢è°ƒç”¨æ¯”ä¾‹æ¥åšç†”æ–­ï¼Œä¸Šè¿°é…ç½®çš„å«ä¹‰æ˜¯ï¼š</p><ul><li>RTè¶…è¿‡200æ¯«ç§’çš„è¯·æ±‚è°ƒç”¨å°±æ˜¯æ…¢è°ƒç”¨</li><li>ç»Ÿè®¡æœ€è¿‘1000mså†…çš„æœ€å°‘5æ¬¡è¯·æ±‚ï¼Œå¦‚æœæ…¢è°ƒç”¨æ¯”ä¾‹ä¸ä½äº0.5ï¼Œåˆ™è§¦å‘ç†”æ–­</li><li>ç†”æ–­æŒç»­æ—¶é•¿20s</li></ul><p>é…ç½®å®Œæˆåï¼Œå†æ¬¡åˆ©ç”¨Jemeteræµ‹è¯•ï¼Œå¯ä»¥å‘ç°ï¼š</p><figure><img src="/assets/1686905217729-0ae21c3f-590b-4ad4-b1e3-cc6afff44e6a-DBg4CUjn.png" alt="img" tabindex="0" loading="lazy"><figcaption>img</figcaption></figure><p>åœ¨ä¸€å¼€å§‹ä¸€æ®µæ—¶é—´æ˜¯å…è®¸è®¿é—®çš„ï¼Œåæ¥è§¦å‘ç†”æ–­åï¼ŒæŸ¥è¯¢å•†å“æœåŠ¡çš„æ¥å£é€šè¿‡QPSç›´æ¥ä¸º0ï¼Œæ‰€æœ‰è¯·æ±‚éƒ½è¢«ç†”æ–­äº†ã€‚è€ŒæŸ¥è¯¢è´­ç‰©è½¦çš„æœ¬èº«å¹¶æ²¡æœ‰å—åˆ°å½±å“ã€‚</p><p>æ­¤æ—¶æ•´ä¸ªè´­ç‰©è½¦æŸ¥è¯¢æœåŠ¡çš„å¹³å‡RTå½±å“ä¸å¤§ï¼š</p><figure><img src="/assets/1686905354087-f962f92e-9fe6-4ded-8b77-932424dbf7df-DwsTgWLN.png" alt="img" tabindex="0" loading="lazy"><figcaption>img</figcaption></figure><h1 id="_2-åˆ†å¸ƒå¼äº‹åŠ¡" tabindex="-1"><a class="header-anchor" href="#_2-åˆ†å¸ƒå¼äº‹åŠ¡"><span>2.åˆ†å¸ƒå¼äº‹åŠ¡</span></a></h1><p>é¦–å…ˆæˆ‘ä»¬çœ‹çœ‹é¡¹ç›®ä¸­çš„ä¸‹å•ä¸šåŠ¡æ•´ä½“æµç¨‹ï¼š</p><figure><img src="/assets/1686907133637-902fcb22-d83e-4915-a382-3f7e5817f6ad-B-E6L5Be.jpeg" alt="img" tabindex="0" loading="lazy"><figcaption>img</figcaption></figure><p>ç”±äºè®¢å•ã€è´­ç‰©è½¦ã€å•†å“åˆ†åˆ«åœ¨ä¸‰ä¸ªä¸åŒçš„å¾®æœåŠ¡ï¼Œè€Œæ¯ä¸ªå¾®æœåŠ¡éƒ½æœ‰è‡ªå·±ç‹¬ç«‹çš„æ•°æ®åº“ï¼Œå› æ­¤ä¸‹å•è¿‡ç¨‹ä¸­å°±ä¼šè·¨å¤šä¸ªæ•°æ®åº“å®Œæˆä¸šåŠ¡ã€‚è€Œæ¯ä¸ªå¾®æœåŠ¡éƒ½ä¼šæ‰§è¡Œè‡ªå·±çš„æœ¬åœ°äº‹åŠ¡ï¼š</p><ul><li>äº¤æ˜“æœåŠ¡ï¼šä¸‹å•äº‹åŠ¡</li><li>è´­ç‰©è½¦æœåŠ¡ï¼šæ¸…ç†è´­ç‰©è½¦äº‹åŠ¡</li><li>åº“å­˜æœåŠ¡ï¼šæ‰£å‡åº“å­˜äº‹åŠ¡</li></ul><p>æ•´ä¸ªä¸šåŠ¡ä¸­ï¼Œå„ä¸ªæœ¬åœ°äº‹åŠ¡æ˜¯æœ‰å…³è”çš„ã€‚å› æ­¤æ¯ä¸ªå¾®æœåŠ¡çš„æœ¬åœ°äº‹åŠ¡ï¼Œä¹Ÿå¯ä»¥ç§°ä¸º<strong>åˆ†æ”¯äº‹åŠ¡</strong>ã€‚å¤šä¸ªæœ‰å…³è”çš„åˆ†æ”¯äº‹åŠ¡ä¸€èµ·å°±ç»„æˆäº†**å…¨å±€äº‹åŠ¡ **ã€‚æˆ‘ä»¬å¿…é¡»ä¿è¯æ•´ä¸ªå…¨å±€äº‹åŠ¡åŒæ—¶æˆåŠŸæˆ–å¤±è´¥ã€‚</p><p>æˆ‘ä»¬çŸ¥é“æ¯ä¸€ä¸ªåˆ†æ”¯äº‹åŠ¡å°±æ˜¯ä¼ ç»Ÿçš„<strong>å•ä½“äº‹åŠ¡</strong>ï¼Œéƒ½å¯ä»¥æ»¡è¶³ACIDç‰¹æ€§ï¼Œä½†å…¨å±€äº‹åŠ¡è·¨è¶Šå¤šä¸ªæœåŠ¡ã€å¤šä¸ªæ•°æ®åº“ï¼Œæ˜¯å¦è¿˜èƒ½æ»¡è¶³å‘¢ï¼Ÿ</p><p>æˆ‘ä»¬æ¥åšä¸€ä¸ªæµ‹è¯•ï¼Œå…ˆè¿›å…¥è´­ç‰©è½¦é¡µé¢ï¼š</p><figure><img src="/assets/1686907951984-e57302c1-c12d-45f1-8a8c-66716e91f5a1-DszR2e63.png" alt="img" tabindex="0" loading="lazy"><figcaption>img</figcaption></figure><p>ç›®å‰æœ‰4ä¸ªè´­ç‰©è½¦ï¼Œç„¶ç»“ç®—ä¸‹å•ï¼Œè¿›å…¥è®¢å•ç»“ç®—é¡µé¢ï¼š</p><figure><img src="/assets/1686907408674-0ce32cab-03b2-4194-951a-36f0594370df-BsIp6IrL.png" alt="img" tabindex="0" loading="lazy"><figcaption>img</figcaption></figure><p>ç„¶åå°†è´­ç‰©è½¦ä¸­æŸä¸ªå•†å“çš„åº“å­˜ä¿®æ”¹ä¸º<code>0</code>ï¼š</p><div class="language-sql line-numbers-mode" data-highlighter="shiki" data-ext="sql" data-title="sql" style="--shiki-light:#383A42;--shiki-dark:#abb2bf;--shiki-light-bg:#FAFAFA;--shiki-dark-bg:#282c34;"><pre class="shiki shiki-themes one-light one-dark-pro vp-code"><code><span class="line"><span style="--shiki-light:#A0A1A7;--shiki-dark:#7F848E;--shiki-light-font-style:italic;--shiki-dark-font-style:italic;">-- åŒæ—¶éœ€è¦æŠŠ item è¡¨çš„åº“å­˜å­—æ®µä¿®æ”¹ä¸ºä¸å…è®¸è´Ÿæ•°</span></span>
<span class="line"><span style="--shiki-light:#A626A4;--shiki-dark:#C678DD;">alter</span><span style="--shiki-light:#A626A4;--shiki-dark:#C678DD;"> table</span><span style="--shiki-light:#383A42;--shiki-dark:#ABB2BF;"> item </span><span style="--shiki-light:#A626A4;--shiki-dark:#C678DD;">modify</span><span style="--shiki-light:#383A42;--shiki-dark:#ABB2BF;"> stock </span><span style="--shiki-light:#A626A4;--shiki-dark:#C678DD;">int</span><span style="--shiki-light:#383A42;--shiki-dark:#ABB2BF;"> unsigned </span><span style="--shiki-light:#A626A4;--shiki-dark:#C678DD;">not null</span><span style="--shiki-light:#383A42;--shiki-dark:#ABB2BF;"> comment </span><span style="--shiki-light:#50A14F;--shiki-dark:#98C379;">&#39;åº“å­˜æ•°é‡&#39;</span><span style="--shiki-light:#383A42;--shiki-dark:#ABB2BF;">;</span></span></code></pre><div class="line-numbers" aria-hidden="true" style="counter-reset:line-number 0;"><div class="line-number"></div><div class="line-number"></div></div></div><figure><img src="/assets/1686907515537-f28c134e-48f0-410b-ab3c-ba6b182a1465-DLIdPYEs.png" alt="img" tabindex="0" loading="lazy"><figcaption>img</figcaption></figure><p>ç„¶åï¼Œæäº¤è®¢å•ï¼Œæœ€ç»ˆå› åº“å­˜ä¸è¶³å¯¼è‡´ä¸‹å•å¤±è´¥ï¼š</p><figure><img src="/assets/1686907597719-732891bc-0dfa-4e1f-a37c-90b292eb80f8-ColddB4c.png" alt="img" tabindex="0" loading="lazy"><figcaption>img</figcaption></figure><p>ç„¶åæˆ‘ä»¬å»æŸ¥çœ‹è´­ç‰©è½¦åˆ—è¡¨ï¼Œå‘ç°è´­ç‰©è½¦æ•°æ®ä¾ç„¶è¢«æ¸…ç©ºäº†ï¼Œå¹¶æœªå›æ»šï¼š</p><figure><img src="/assets/1686908010283-ca1db3b7-26b9-40dc-ac1b-f932570aefeb-BHeXvovb.png" alt="img" tabindex="0" loading="lazy"><figcaption>img</figcaption></figure><p>äº‹åŠ¡å¹¶æœªéµå¾ªACIDçš„åŸåˆ™ï¼Œå½’å…¶åŸå› å°±æ˜¯å‚ä¸äº‹åŠ¡çš„å¤šä¸ªå­ä¸šåŠ¡åœ¨ä¸åŒçš„å¾®æœåŠ¡ï¼Œè·¨è¶Šäº†ä¸åŒçš„æ•°æ®åº“ã€‚è™½ç„¶æ¯ä¸ªå•ç‹¬çš„ä¸šåŠ¡éƒ½èƒ½åœ¨æœ¬åœ°éµå¾ªACIDï¼Œä½†æ˜¯å®ƒä»¬äº’ç›¸ä¹‹é—´æ²¡æœ‰æ„ŸçŸ¥ï¼Œä¸çŸ¥é“æœ‰äººå¤±è´¥äº†ï¼Œæ— æ³•ä¿è¯æœ€ç»ˆç»“æœçš„ç»Ÿä¸€ï¼Œä¹Ÿå°±æ— æ³•éµå¾ªACIDçš„äº‹åŠ¡ç‰¹æ€§äº†ã€‚</p><p>è¿™å°±æ˜¯åˆ†å¸ƒå¼äº‹åŠ¡é—®é¢˜ï¼Œå‡ºç°ä»¥ä¸‹æƒ…å†µä¹‹ä¸€å°±å¯èƒ½äº§ç”Ÿåˆ†å¸ƒå¼äº‹åŠ¡é—®é¢˜ï¼š</p><ul><li>ä¸šåŠ¡è·¨å¤šä¸ªæœåŠ¡å®ç°</li><li>ä¸šåŠ¡è·¨å¤šä¸ªæ•°æ®æºå®ç°</li></ul><p>æ¥ä¸‹æ¥è¿™ä¸€ç« æˆ‘ä»¬å°±ä¸€èµ·æ¥ç ”ç©¶ä¸‹å¦‚ä½•è§£å†³åˆ†å¸ƒå¼äº‹åŠ¡é—®é¢˜ã€‚</p><h2 id="_2-1-è®¤è¯†seata" tabindex="-1"><a class="header-anchor" href="#_2-1-è®¤è¯†seata"><span>2.1.è®¤è¯†Seata</span></a></h2><p>è§£å†³åˆ†å¸ƒå¼äº‹åŠ¡çš„æ–¹æ¡ˆæœ‰å¾ˆå¤šï¼Œä½†å®ç°èµ·æ¥éƒ½æ¯”è¾ƒå¤æ‚ï¼Œå› æ­¤æˆ‘ä»¬ä¸€èˆ¬ä¼šä½¿ç”¨å¼€æºçš„æ¡†æ¶æ¥è§£å†³åˆ†å¸ƒå¼äº‹åŠ¡é—®é¢˜ã€‚åœ¨ä¼—å¤šçš„å¼€æºåˆ†å¸ƒå¼äº‹åŠ¡æ¡†æ¶ä¸­ï¼ŒåŠŸèƒ½æœ€å®Œå–„ã€ä½¿ç”¨æœ€å¤šçš„å°±æ˜¯é˜¿é‡Œå·´å·´åœ¨2019å¹´å¼€æºçš„Seataäº†ã€‚</p><p>https://seata.io/zh-cn/docs/overview/what-is-seata.html</p><p>å…¶å®åˆ†å¸ƒå¼äº‹åŠ¡äº§ç”Ÿçš„ä¸€ä¸ªé‡è¦åŸå› ï¼Œå°±æ˜¯å‚ä¸äº‹åŠ¡çš„å¤šä¸ªåˆ†æ”¯äº‹åŠ¡äº’ç›¸æ— æ„ŸçŸ¥ï¼Œä¸çŸ¥é“å½¼æ­¤çš„æ‰§è¡ŒçŠ¶æ€ã€‚å› æ­¤è§£å†³åˆ†å¸ƒå¼äº‹åŠ¡çš„æ€æƒ³éå¸¸ç®€å•ï¼š</p><p>å°±æ˜¯æ‰¾ä¸€ä¸ªç»Ÿä¸€çš„<strong>äº‹åŠ¡åè°ƒè€…</strong>ï¼Œä¸å¤šä¸ªåˆ†æ”¯äº‹åŠ¡é€šä¿¡ï¼Œæ£€æµ‹æ¯ä¸ªåˆ†æ”¯äº‹åŠ¡çš„æ‰§è¡ŒçŠ¶æ€ï¼Œä¿è¯å…¨å±€äº‹åŠ¡ä¸‹çš„æ¯ä¸€ä¸ªåˆ†æ”¯äº‹åŠ¡åŒæ—¶æˆåŠŸæˆ–å¤±è´¥å³å¯ã€‚å¤§å¤šæ•°çš„åˆ†å¸ƒå¼äº‹åŠ¡æ¡†æ¶éƒ½æ˜¯åŸºäºè¿™ä¸ªç†è®ºæ¥å®ç°çš„ã€‚</p><p>Seataä¹Ÿä¸ä¾‹å¤–ï¼Œåœ¨Seataçš„äº‹åŠ¡ç®¡ç†ä¸­æœ‰ä¸‰ä¸ªé‡è¦çš„è§’è‰²ï¼š</p><ul><li><strong>TC (Transaction Coordinator) -</strong> **äº‹åŠ¡åè°ƒè€…ï¼š**ç»´æŠ¤å…¨å±€å’Œåˆ†æ”¯äº‹åŠ¡çš„çŠ¶æ€ï¼Œåè°ƒå…¨å±€äº‹åŠ¡æäº¤æˆ–å›æ»šã€‚</li><li><strong>TM (Transaction Manager) -</strong> **äº‹åŠ¡ç®¡ç†å™¨ï¼š**å®šä¹‰å…¨å±€äº‹åŠ¡çš„èŒƒå›´ã€å¼€å§‹å…¨å±€äº‹åŠ¡ã€æäº¤æˆ–å›æ»šå…¨å±€äº‹åŠ¡ã€‚</li><li><strong>RM (Resource Manager) -</strong> **èµ„æºç®¡ç†å™¨ï¼š**ç®¡ç†åˆ†æ”¯äº‹åŠ¡ï¼Œä¸TCäº¤è°ˆä»¥æ³¨å†Œåˆ†æ”¯äº‹åŠ¡å’ŒæŠ¥å‘Šåˆ†æ”¯äº‹åŠ¡çš„çŠ¶æ€ï¼Œå¹¶é©±åŠ¨åˆ†æ”¯äº‹åŠ¡æäº¤æˆ–å›æ»šã€‚</li></ul><p>Seataçš„å·¥ä½œæ¶æ„å¦‚å›¾æ‰€ç¤ºï¼š</p><figure><img src="/assets/1686909700936-f2a8f175-8f47-40ce-8419-a3be658ce064-D4tQ5iEH.png" alt="img" tabindex="0" loading="lazy"><figcaption>img</figcaption></figure><p>å…¶ä¸­ï¼Œ<strong>TM</strong>å’Œ<strong>RM</strong>å¯ä»¥ç†è§£ä¸ºSeataçš„å®¢æˆ·ç«¯éƒ¨åˆ†ï¼Œå¼•å…¥åˆ°å‚ä¸äº‹åŠ¡çš„å¾®æœåŠ¡ä¾èµ–ä¸­å³å¯ã€‚å°†æ¥<strong>TM</strong>å’Œ<strong>RM</strong>å°±ä¼šååŠ©å¾®æœåŠ¡ï¼Œå®ç°æœ¬åœ°åˆ†æ”¯äº‹åŠ¡ä¸ <strong>TC</strong>ä¹‹é—´äº¤äº’ï¼Œå®ç°äº‹åŠ¡çš„æäº¤æˆ–å›æ»šã€‚</p><p>è€Œ<strong>TC</strong>æœåŠ¡åˆ™æ˜¯äº‹åŠ¡åè°ƒä¸­å¿ƒï¼Œæ˜¯ä¸€ä¸ªç‹¬ç«‹çš„å¾®æœåŠ¡ï¼Œéœ€è¦å•ç‹¬éƒ¨ç½²ã€‚</p><h2 id="_2-2-éƒ¨ç½²tcæœåŠ¡" tabindex="-1"><a class="header-anchor" href="#_2-2-éƒ¨ç½²tcæœåŠ¡"><span>2.2.éƒ¨ç½²TCæœåŠ¡</span></a></h2><h3 id="_2-2-1-å‡†å¤‡æ•°æ®åº“è¡¨" tabindex="-1"><a class="header-anchor" href="#_2-2-1-å‡†å¤‡æ•°æ®åº“è¡¨"><span>2.2.1.å‡†å¤‡æ•°æ®åº“è¡¨</span></a></h3><p>Seataæ”¯æŒå¤šç§å­˜å‚¨æ¨¡å¼ï¼Œä½†è€ƒè™‘åˆ°æŒä¹…åŒ–çš„éœ€è¦ï¼Œæˆ‘ä»¬ä¸€èˆ¬é€‰æ‹©åŸºäºæ•°æ®åº“å­˜å‚¨ã€‚æ‰§è¡Œè¯¾å‰èµ„æ–™æä¾›çš„<code>ã€Šseata-tc.sqlã€‹</code>ï¼Œå¯¼å…¥æ•°æ®åº“è¡¨ï¼š</p><figure><img src="/assets/1686912118595-a2e7e603-e933-4998-9e18-69bc35150946-DuybQiJ5.png" alt="img" tabindex="0" loading="lazy"><figcaption>img</figcaption></figure><h3 id="_2-2-2-å‡†å¤‡é…ç½®æ–‡ä»¶" tabindex="-1"><a class="header-anchor" href="#_2-2-2-å‡†å¤‡é…ç½®æ–‡ä»¶"><span>2.2.2.å‡†å¤‡é…ç½®æ–‡ä»¶</span></a></h3><p>è¯¾å‰èµ„æ–™å‡†å¤‡äº†ä¸€ä¸ªseataç›®å½•ï¼Œå…¶ä¸­åŒ…å«äº†seataè¿è¡Œæ—¶æ‰€éœ€è¦çš„é…ç½®æ–‡ä»¶ï¼š</p><figure><img src="/assets/1686920730736-eda3e26c-674b-47cb-b57c-0be1e2c79f25-BDt1E52d.png" alt="img" tabindex="0" loading="lazy"><figcaption>img</figcaption></figure><p>å…¶ä¸­åŒ…å«ä¸­æ–‡æ³¨é‡Šï¼Œå¤§å®¶å¯ä»¥è‡ªè¡Œé˜…è¯»ã€‚</p><p>æˆ‘ä»¬å°†æ•´ä¸ªseataæ–‡ä»¶å¤¹æ‹·è´åˆ°è™šæ‹Ÿæœºçš„<code>/root</code>ç›®å½•ï¼š</p><figure><img src="/assets/1686921207883-96defd18-d795-4997-9d02-35e2700a6d02-DjLOBV3F.png" alt="img" tabindex="0" loading="lazy"><figcaption>img</figcaption></figure><h3 id="_2-2-3-dockeréƒ¨ç½²" tabindex="-1"><a class="header-anchor" href="#_2-2-3-dockeréƒ¨ç½²"><span>2.2.3.Dockeréƒ¨ç½²</span></a></h3><p>åœ¨è™šæ‹Ÿæœºçš„<code>/root</code>ç›®å½•æ‰§è¡Œä¸‹é¢çš„å‘½ä»¤ï¼š</p><div class="language-shell line-numbers-mode" data-highlighter="shiki" data-ext="shell" data-title="shell" style="--shiki-light:#383A42;--shiki-dark:#abb2bf;--shiki-light-bg:#FAFAFA;--shiki-dark-bg:#282c34;"><pre class="shiki shiki-themes one-light one-dark-pro vp-code"><code><span class="line"><span style="--shiki-light:#4078F2;--shiki-dark:#61AFEF;">docker</span><span style="--shiki-light:#50A14F;--shiki-dark:#98C379;"> run</span><span style="--shiki-light:#986801;--shiki-dark:#D19A66;"> --name</span><span style="--shiki-light:#50A14F;--shiki-dark:#98C379;"> seata</span><span style="--shiki-light:#0184BC;--shiki-dark:#56B6C2;"> \</span></span>
<span class="line"><span style="--shiki-light:#383A42;--shiki-dark:#ABB2BF;">-p </span><span style="--shiki-light:#50A14F;--shiki-dark:#98C379;">8099:8099</span><span style="--shiki-light:#0184BC;--shiki-dark:#56B6C2;"> \</span></span>
<span class="line"><span style="--shiki-light:#383A42;--shiki-dark:#ABB2BF;">-p </span><span style="--shiki-light:#50A14F;--shiki-dark:#98C379;">7099:7099</span><span style="--shiki-light:#0184BC;--shiki-dark:#56B6C2;"> \</span></span>
<span class="line"><span style="--shiki-light:#383A42;--shiki-dark:#ABB2BF;">-e </span><span style="--shiki-light:#50A14F;--shiki-dark:#98C379;">SEATA_IP=</span><span style="--shiki-light:#986801;--shiki-dark:#D19A66;">192.168.200.146</span><span style="--shiki-light:#0184BC;--shiki-dark:#56B6C2;"> \</span></span>
<span class="line"><span style="--shiki-light:#383A42;--shiki-dark:#ABB2BF;">-v </span><span style="--shiki-light:#50A14F;--shiki-dark:#98C379;">/root/seata:/seata-server/resources</span><span style="--shiki-light:#0184BC;--shiki-dark:#56B6C2;"> \</span></span>
<span class="line"><span style="--shiki-light:#383A42;--shiki-dark:#ABB2BF;">--privileged=true </span><span style="--shiki-light:#0184BC;--shiki-dark:#56B6C2;">\</span></span>
<span class="line"><span style="--shiki-light:#383A42;--shiki-dark:#ABB2BF;">-d </span><span style="--shiki-light:#0184BC;--shiki-dark:#56B6C2;">\</span></span>
<span class="line"><span style="--shiki-light:#383A42;--shiki-dark:#ABB2BF;">seataio/seata-server:1.5.2</span></span></code></pre><div class="line-numbers" aria-hidden="true" style="counter-reset:line-number 0;"><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div></div></div><p>å¦‚æœé•œåƒä¸‹è½½å›°éš¾ï¼Œä¹Ÿå¯ä»¥æŠŠè¯¾å‰èµ„æ–™æä¾›çš„é•œåƒä¸Šä¼ åˆ°è™šæ‹Ÿæœºå¹¶åŠ è½½ï¼š</p><figure><img src="/assets/1686921838755-acb7564f-69fb-40f5-87cf-0a47c29d96fd-Cj6o-OAg.png" alt="img" tabindex="0" loading="lazy"><figcaption>img</figcaption></figure><h2 id="_2-3-å¾®æœåŠ¡é›†æˆseata" tabindex="-1"><a class="header-anchor" href="#_2-3-å¾®æœåŠ¡é›†æˆseata"><span>2.3.å¾®æœåŠ¡é›†æˆSeata</span></a></h2><p>å‚ä¸åˆ†å¸ƒå¼äº‹åŠ¡çš„æ¯ä¸€ä¸ªå¾®æœåŠ¡éƒ½éœ€è¦é›†æˆSeataï¼Œæˆ‘ä»¬ä»¥<code>trade-service</code>ä¸ºä¾‹ã€‚</p><h3 id="_2-3-1-å¼•å…¥ä¾èµ–" tabindex="-1"><a class="header-anchor" href="#_2-3-1-å¼•å…¥ä¾èµ–"><span>2.3.1.å¼•å…¥ä¾èµ–</span></a></h3><p>ä¸ºäº†æ–¹ä¾¿å„ä¸ªå¾®æœåŠ¡é›†æˆseataï¼Œæˆ‘ä»¬éœ€è¦æŠŠseataé…ç½®å…±äº«åˆ°nacosï¼Œå› æ­¤<code>trade-service</code> æ¨¡å—ä¸ä»…ä»…è¦å¼•å…¥seataä¾èµ–ï¼Œè¿˜è¦å¼•å…¥nacosä¾èµ–:</p><div class="language-xml line-numbers-mode" data-highlighter="shiki" data-ext="xml" data-title="xml" style="--shiki-light:#383A42;--shiki-dark:#abb2bf;--shiki-light-bg:#FAFAFA;--shiki-dark-bg:#282c34;"><pre class="shiki shiki-themes one-light one-dark-pro vp-code"><code><span class="line"><span style="--shiki-light:#A0A1A7;--shiki-dark:#7F848E;--shiki-light-font-style:italic;--shiki-dark-font-style:italic;">&lt;!--ç»Ÿä¸€é…ç½®ç®¡ç†--&gt;</span></span>
<span class="line"><span style="--shiki-light:#383A42;--shiki-dark:#ABB2BF;">&lt;</span><span style="--shiki-light:#E45649;--shiki-dark:#E06C75;">dependency</span><span style="--shiki-light:#383A42;--shiki-dark:#ABB2BF;">&gt;</span></span>
<span class="line"><span style="--shiki-light:#383A42;--shiki-dark:#ABB2BF;">    &lt;</span><span style="--shiki-light:#E45649;--shiki-dark:#E06C75;">groupId</span><span style="--shiki-light:#383A42;--shiki-dark:#ABB2BF;">&gt;com.alibaba.cloud&lt;/</span><span style="--shiki-light:#E45649;--shiki-dark:#E06C75;">groupId</span><span style="--shiki-light:#383A42;--shiki-dark:#ABB2BF;">&gt;</span></span>
<span class="line"><span style="--shiki-light:#383A42;--shiki-dark:#ABB2BF;">    &lt;</span><span style="--shiki-light:#E45649;--shiki-dark:#E06C75;">artifactId</span><span style="--shiki-light:#383A42;--shiki-dark:#ABB2BF;">&gt;spring-cloud-starter-alibaba-nacos-config&lt;/</span><span style="--shiki-light:#E45649;--shiki-dark:#E06C75;">artifactId</span><span style="--shiki-light:#383A42;--shiki-dark:#ABB2BF;">&gt;</span></span>
<span class="line"><span style="--shiki-light:#383A42;--shiki-dark:#ABB2BF;">&lt;/</span><span style="--shiki-light:#E45649;--shiki-dark:#E06C75;">dependency</span><span style="--shiki-light:#383A42;--shiki-dark:#ABB2BF;">&gt;</span></span>
<span class="line"><span style="--shiki-light:#A0A1A7;--shiki-dark:#7F848E;--shiki-light-font-style:italic;--shiki-dark-font-style:italic;">        &lt;!--è¯»å–bootstrapæ–‡ä»¶--&gt;</span></span>
<span class="line"><span style="--shiki-light:#383A42;--shiki-dark:#ABB2BF;">&lt;</span><span style="--shiki-light:#E45649;--shiki-dark:#E06C75;">dependency</span><span style="--shiki-light:#383A42;--shiki-dark:#ABB2BF;">&gt;</span></span>
<span class="line"><span style="--shiki-light:#383A42;--shiki-dark:#ABB2BF;">&lt;</span><span style="--shiki-light:#E45649;--shiki-dark:#E06C75;">groupId</span><span style="--shiki-light:#383A42;--shiki-dark:#ABB2BF;">&gt;org.springframework.cloud&lt;/</span><span style="--shiki-light:#E45649;--shiki-dark:#E06C75;">groupId</span><span style="--shiki-light:#383A42;--shiki-dark:#ABB2BF;">&gt;</span></span>
<span class="line"><span style="--shiki-light:#383A42;--shiki-dark:#ABB2BF;">&lt;</span><span style="--shiki-light:#E45649;--shiki-dark:#E06C75;">artifactId</span><span style="--shiki-light:#383A42;--shiki-dark:#ABB2BF;">&gt;spring-cloud-starter-bootstrap&lt;/</span><span style="--shiki-light:#E45649;--shiki-dark:#E06C75;">artifactId</span><span style="--shiki-light:#383A42;--shiki-dark:#ABB2BF;">&gt;</span></span>
<span class="line"><span style="--shiki-light:#383A42;--shiki-dark:#ABB2BF;">&lt;/</span><span style="--shiki-light:#E45649;--shiki-dark:#E06C75;">dependency</span><span style="--shiki-light:#383A42;--shiki-dark:#ABB2BF;">&gt;</span></span>
<span class="line"><span style="--shiki-light:#A0A1A7;--shiki-dark:#7F848E;--shiki-light-font-style:italic;--shiki-dark-font-style:italic;">        &lt;!--seata--&gt;</span></span>
<span class="line"><span style="--shiki-light:#383A42;--shiki-dark:#ABB2BF;">&lt;</span><span style="--shiki-light:#E45649;--shiki-dark:#E06C75;">dependency</span><span style="--shiki-light:#383A42;--shiki-dark:#ABB2BF;">&gt;</span></span>
<span class="line"><span style="--shiki-light:#383A42;--shiki-dark:#ABB2BF;">&lt;</span><span style="--shiki-light:#E45649;--shiki-dark:#E06C75;">groupId</span><span style="--shiki-light:#383A42;--shiki-dark:#ABB2BF;">&gt;com.alibaba.cloud&lt;/</span><span style="--shiki-light:#E45649;--shiki-dark:#E06C75;">groupId</span><span style="--shiki-light:#383A42;--shiki-dark:#ABB2BF;">&gt;</span></span>
<span class="line"><span style="--shiki-light:#383A42;--shiki-dark:#ABB2BF;">&lt;</span><span style="--shiki-light:#E45649;--shiki-dark:#E06C75;">artifactId</span><span style="--shiki-light:#383A42;--shiki-dark:#ABB2BF;">&gt;spring-cloud-starter-alibaba-seata&lt;/</span><span style="--shiki-light:#E45649;--shiki-dark:#E06C75;">artifactId</span><span style="--shiki-light:#383A42;--shiki-dark:#ABB2BF;">&gt;</span></span>
<span class="line"><span style="--shiki-light:#383A42;--shiki-dark:#ABB2BF;">&lt;/</span><span style="--shiki-light:#E45649;--shiki-dark:#E06C75;">dependency</span><span style="--shiki-light:#383A42;--shiki-dark:#ABB2BF;">&gt;</span></span>
<span class="line"><span style="--shiki-light:#A0A1A7;--shiki-dark:#7F848E;--shiki-light-font-style:italic;--shiki-dark-font-style:italic;">        &lt;!--sentinel--&gt;</span></span>
<span class="line"><span style="--shiki-light:#383A42;--shiki-dark:#ABB2BF;">&lt;</span><span style="--shiki-light:#E45649;--shiki-dark:#E06C75;">dependency</span><span style="--shiki-light:#383A42;--shiki-dark:#ABB2BF;">&gt;</span></span>
<span class="line"><span style="--shiki-light:#383A42;--shiki-dark:#ABB2BF;">&lt;</span><span style="--shiki-light:#E45649;--shiki-dark:#E06C75;">groupId</span><span style="--shiki-light:#383A42;--shiki-dark:#ABB2BF;">&gt;com.alibaba.cloud&lt;/</span><span style="--shiki-light:#E45649;--shiki-dark:#E06C75;">groupId</span><span style="--shiki-light:#383A42;--shiki-dark:#ABB2BF;">&gt;</span></span>
<span class="line"><span style="--shiki-light:#383A42;--shiki-dark:#ABB2BF;">&lt;</span><span style="--shiki-light:#E45649;--shiki-dark:#E06C75;">artifactId</span><span style="--shiki-light:#383A42;--shiki-dark:#ABB2BF;">&gt;spring-cloud-starter-alibaba-sentinel&lt;/</span><span style="--shiki-light:#E45649;--shiki-dark:#E06C75;">artifactId</span><span style="--shiki-light:#383A42;--shiki-dark:#ABB2BF;">&gt;</span></span>
<span class="line"><span style="--shiki-light:#383A42;--shiki-dark:#ABB2BF;">&lt;/</span><span style="--shiki-light:#E45649;--shiki-dark:#E06C75;">dependency</span><span style="--shiki-light:#383A42;--shiki-dark:#ABB2BF;">&gt;</span></span></code></pre><div class="line-numbers" aria-hidden="true" style="counter-reset:line-number 0;"><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div></div></div><h3 id="_2-3-2-æ”¹é€ é…ç½®" tabindex="-1"><a class="header-anchor" href="#_2-3-2-æ”¹é€ é…ç½®"><span>2.3.2.æ”¹é€ é…ç½®</span></a></h3><p>é¦–å…ˆåœ¨nacosä¸Šæ·»åŠ ä¸€ä¸ªå…±äº«çš„seataé…ç½®ï¼Œå‘½åä¸º<code>shared-seata.yaml</code>ï¼š</p><figure><img src="/assets/1686922314044-9357d924-b183-40c3-adc0-cebbf3bfca49-GpLFtoW0.png" alt="img" tabindex="0" loading="lazy"><figcaption>img</figcaption></figure><p>å†…å®¹å¦‚ä¸‹ï¼š</p><div class="language-yaml line-numbers-mode" data-highlighter="shiki" data-ext="yaml" data-title="yaml" style="--shiki-light:#383A42;--shiki-dark:#abb2bf;--shiki-light-bg:#FAFAFA;--shiki-dark-bg:#282c34;"><pre class="shiki shiki-themes one-light one-dark-pro vp-code"><code><span class="line"><span style="--shiki-light:#E45649;--shiki-dark:#E06C75;">seata</span><span style="--shiki-light:#383A42;--shiki-dark:#ABB2BF;">:</span></span>
<span class="line"><span style="--shiki-light:#E45649;--shiki-dark:#E06C75;">registry</span><span style="--shiki-light:#383A42;--shiki-dark:#ABB2BF;">: </span><span style="--shiki-light:#A0A1A7;--shiki-dark:#7F848E;--shiki-light-font-style:italic;--shiki-dark-font-style:italic;"># TCæœåŠ¡æ³¨å†Œä¸­å¿ƒçš„é…ç½®ï¼Œå¾®æœåŠ¡æ ¹æ®è¿™äº›ä¿¡æ¯å»æ³¨å†Œä¸­å¿ƒè·å–tcæœåŠ¡åœ°å€</span></span>
<span class="line"><span style="--shiki-light:#E45649;--shiki-dark:#E06C75;">type</span><span style="--shiki-light:#383A42;--shiki-dark:#ABB2BF;">: </span><span style="--shiki-light:#50A14F;--shiki-dark:#98C379;">nacos</span><span style="--shiki-light:#A0A1A7;--shiki-dark:#7F848E;--shiki-light-font-style:italic;--shiki-dark-font-style:italic;"> # æ³¨å†Œä¸­å¿ƒç±»å‹ nacos</span></span>
<span class="line"><span style="--shiki-light:#E45649;--shiki-dark:#E06C75;">nacos</span><span style="--shiki-light:#383A42;--shiki-dark:#ABB2BF;">:</span></span>
<span class="line"><span style="--shiki-light:#E45649;--shiki-dark:#E06C75;">server-addr</span><span style="--shiki-light:#383A42;--shiki-dark:#ABB2BF;">: </span><span style="--shiki-light:#50A14F;--shiki-dark:#98C379;">192.168.200.146:8848</span><span style="--shiki-light:#A0A1A7;--shiki-dark:#7F848E;--shiki-light-font-style:italic;--shiki-dark-font-style:italic;"> # nacosåœ°å€</span></span>
<span class="line"><span style="--shiki-light:#E45649;--shiki-dark:#E06C75;">namespace</span><span style="--shiki-light:#383A42;--shiki-dark:#ABB2BF;">: </span><span style="--shiki-light:#50A14F;--shiki-dark:#98C379;">&quot;&quot;</span><span style="--shiki-light:#A0A1A7;--shiki-dark:#7F848E;--shiki-light-font-style:italic;--shiki-dark-font-style:italic;"> # namespaceï¼Œé»˜è®¤ä¸ºç©º</span></span>
<span class="line"><span style="--shiki-light:#E45649;--shiki-dark:#E06C75;">group</span><span style="--shiki-light:#383A42;--shiki-dark:#ABB2BF;">: </span><span style="--shiki-light:#50A14F;--shiki-dark:#98C379;">DEFAULT_GROUP</span><span style="--shiki-light:#A0A1A7;--shiki-dark:#7F848E;--shiki-light-font-style:italic;--shiki-dark-font-style:italic;"> # åˆ†ç»„ï¼Œé»˜è®¤æ˜¯DEFAULT_GROUP</span></span>
<span class="line"><span style="--shiki-light:#E45649;--shiki-dark:#E06C75;">application</span><span style="--shiki-light:#383A42;--shiki-dark:#ABB2BF;">: </span><span style="--shiki-light:#50A14F;--shiki-dark:#98C379;">seata-server</span><span style="--shiki-light:#A0A1A7;--shiki-dark:#7F848E;--shiki-light-font-style:italic;--shiki-dark-font-style:italic;"> # seataæœåŠ¡åç§°</span></span>
<span class="line"><span style="--shiki-light:#E45649;--shiki-dark:#E06C75;">username</span><span style="--shiki-light:#383A42;--shiki-dark:#ABB2BF;">: </span><span style="--shiki-light:#50A14F;--shiki-dark:#98C379;">nacos</span></span>
<span class="line"><span style="--shiki-light:#E45649;--shiki-dark:#E06C75;">password</span><span style="--shiki-light:#383A42;--shiki-dark:#ABB2BF;">: </span><span style="--shiki-light:#50A14F;--shiki-dark:#98C379;">nacos</span></span>
<span class="line"><span style="--shiki-light:#E45649;--shiki-dark:#E06C75;">tx-service-group</span><span style="--shiki-light:#383A42;--shiki-dark:#ABB2BF;">: </span><span style="--shiki-light:#50A14F;--shiki-dark:#98C379;">hmall</span><span style="--shiki-light:#A0A1A7;--shiki-dark:#7F848E;--shiki-light-font-style:italic;--shiki-dark-font-style:italic;"> # äº‹åŠ¡ç»„åç§°</span></span>
<span class="line"><span style="--shiki-light:#E45649;--shiki-dark:#E06C75;">service</span><span style="--shiki-light:#383A42;--shiki-dark:#ABB2BF;">:</span></span>
<span class="line"><span style="--shiki-light:#E45649;--shiki-dark:#E06C75;">vgroup-mapping</span><span style="--shiki-light:#383A42;--shiki-dark:#ABB2BF;">: </span><span style="--shiki-light:#A0A1A7;--shiki-dark:#7F848E;--shiki-light-font-style:italic;--shiki-dark-font-style:italic;"># äº‹åŠ¡ç»„ä¸tcé›†ç¾¤çš„æ˜ å°„å…³ç³»</span></span>
<span class="line"><span style="--shiki-light:#E45649;--shiki-dark:#E06C75;">hmall</span><span style="--shiki-light:#383A42;--shiki-dark:#ABB2BF;">: </span><span style="--shiki-light:#50A14F;--shiki-dark:#98C379;">&quot;default&quot;</span></span>
<span class="line"><span style="--shiki-light:#E45649;--shiki-dark:#E06C75;">data-source-proxy-mode</span><span style="--shiki-light:#383A42;--shiki-dark:#ABB2BF;">: </span><span style="--shiki-light:#50A14F;--shiki-dark:#98C379;">XA</span><span style="--shiki-light:#A0A1A7;--shiki-dark:#7F848E;--shiki-light-font-style:italic;--shiki-dark-font-style:italic;"> # AT æ˜¯é»˜è®¤æ¨¡å¼</span></span></code></pre><div class="line-numbers" aria-hidden="true" style="counter-reset:line-number 0;"><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div></div></div><p>ç„¶åï¼Œæ”¹é€ <code>trade-service</code>æ¨¡å—ï¼Œæ·»åŠ <code>bootstrap.yaml</code>ï¼š</p><figure><img src="/assets/1686922615248-3d27b64f-295e-4b70-9f0a-2450fa55beee-4M4l-GPk.png" alt="img" tabindex="0" loading="lazy"><figcaption>img</figcaption></figure><p>å†…å®¹å¦‚ä¸‹:</p><div class="language-yaml line-numbers-mode" data-highlighter="shiki" data-ext="yaml" data-title="yaml" style="--shiki-light:#383A42;--shiki-dark:#abb2bf;--shiki-light-bg:#FAFAFA;--shiki-dark-bg:#282c34;"><pre class="shiki shiki-themes one-light one-dark-pro vp-code"><code><span class="line"><span style="--shiki-light:#E45649;--shiki-dark:#E06C75;">spring</span><span style="--shiki-light:#383A42;--shiki-dark:#ABB2BF;">:</span></span>
<span class="line"><span style="--shiki-light:#E45649;--shiki-dark:#E06C75;">application</span><span style="--shiki-light:#383A42;--shiki-dark:#ABB2BF;">:</span></span>
<span class="line"><span style="--shiki-light:#E45649;--shiki-dark:#E06C75;">name</span><span style="--shiki-light:#383A42;--shiki-dark:#ABB2BF;">: </span><span style="--shiki-light:#50A14F;--shiki-dark:#98C379;">trade-service</span><span style="--shiki-light:#A0A1A7;--shiki-dark:#7F848E;--shiki-light-font-style:italic;--shiki-dark-font-style:italic;"> # æœåŠ¡åç§°</span></span>
<span class="line"><span style="--shiki-light:#E45649;--shiki-dark:#E06C75;">profiles</span><span style="--shiki-light:#383A42;--shiki-dark:#ABB2BF;">:</span></span>
<span class="line"><span style="--shiki-light:#E45649;--shiki-dark:#E06C75;">active</span><span style="--shiki-light:#383A42;--shiki-dark:#ABB2BF;">: </span><span style="--shiki-light:#50A14F;--shiki-dark:#98C379;">dev</span></span>
<span class="line"><span style="--shiki-light:#E45649;--shiki-dark:#E06C75;">cloud</span><span style="--shiki-light:#383A42;--shiki-dark:#ABB2BF;">:</span></span>
<span class="line"><span style="--shiki-light:#E45649;--shiki-dark:#E06C75;">nacos</span><span style="--shiki-light:#383A42;--shiki-dark:#ABB2BF;">:</span></span>
<span class="line"><span style="--shiki-light:#E45649;--shiki-dark:#E06C75;">server-addr</span><span style="--shiki-light:#383A42;--shiki-dark:#ABB2BF;">: </span><span style="--shiki-light:#986801;--shiki-dark:#D19A66;">192.168.150.101</span><span style="--shiki-light:#A0A1A7;--shiki-dark:#7F848E;--shiki-light-font-style:italic;--shiki-dark-font-style:italic;"> # nacosåœ°å€</span></span>
<span class="line"><span style="--shiki-light:#E45649;--shiki-dark:#E06C75;">config</span><span style="--shiki-light:#383A42;--shiki-dark:#ABB2BF;">:</span></span>
<span class="line"><span style="--shiki-light:#E45649;--shiki-dark:#E06C75;">file-extension</span><span style="--shiki-light:#383A42;--shiki-dark:#ABB2BF;">: </span><span style="--shiki-light:#50A14F;--shiki-dark:#98C379;">yaml</span><span style="--shiki-light:#A0A1A7;--shiki-dark:#7F848E;--shiki-light-font-style:italic;--shiki-dark-font-style:italic;"> # æ–‡ä»¶åç¼€å</span></span>
<span class="line"><span style="--shiki-light:#E45649;--shiki-dark:#E06C75;">shared-configs</span><span style="--shiki-light:#383A42;--shiki-dark:#ABB2BF;">: </span><span style="--shiki-light:#A0A1A7;--shiki-dark:#7F848E;--shiki-light-font-style:italic;--shiki-dark-font-style:italic;"># å…±äº«é…ç½®</span></span>
<span class="line"><span style="--shiki-light:#383A42;--shiki-dark:#ABB2BF;">  - </span><span style="--shiki-light:#E45649;--shiki-dark:#E06C75;">dataId</span><span style="--shiki-light:#383A42;--shiki-dark:#ABB2BF;">: </span><span style="--shiki-light:#50A14F;--shiki-dark:#98C379;">shared-jdbc.yaml</span><span style="--shiki-light:#A0A1A7;--shiki-dark:#7F848E;--shiki-light-font-style:italic;--shiki-dark-font-style:italic;"> # å…±äº«mybatisé…ç½®</span></span>
<span class="line"><span style="--shiki-light:#383A42;--shiki-dark:#ABB2BF;">  - </span><span style="--shiki-light:#E45649;--shiki-dark:#E06C75;">dataId</span><span style="--shiki-light:#383A42;--shiki-dark:#ABB2BF;">: </span><span style="--shiki-light:#50A14F;--shiki-dark:#98C379;">shared-log.yaml</span><span style="--shiki-light:#A0A1A7;--shiki-dark:#7F848E;--shiki-light-font-style:italic;--shiki-dark-font-style:italic;"> # å…±äº«æ—¥å¿—é…ç½®</span></span>
<span class="line"><span style="--shiki-light:#383A42;--shiki-dark:#ABB2BF;">  - </span><span style="--shiki-light:#E45649;--shiki-dark:#E06C75;">dataId</span><span style="--shiki-light:#383A42;--shiki-dark:#ABB2BF;">: </span><span style="--shiki-light:#50A14F;--shiki-dark:#98C379;">shared-swagger.yaml</span><span style="--shiki-light:#A0A1A7;--shiki-dark:#7F848E;--shiki-light-font-style:italic;--shiki-dark-font-style:italic;"> # å…±äº«æ—¥å¿—é…ç½®</span></span>
<span class="line"><span style="--shiki-light:#383A42;--shiki-dark:#ABB2BF;">  - </span><span style="--shiki-light:#E45649;--shiki-dark:#E06C75;">dataId</span><span style="--shiki-light:#383A42;--shiki-dark:#ABB2BF;">: </span><span style="--shiki-light:#50A14F;--shiki-dark:#98C379;">shared-seata.yaml</span><span style="--shiki-light:#A0A1A7;--shiki-dark:#7F848E;--shiki-light-font-style:italic;--shiki-dark-font-style:italic;"> # å…±äº«seataé…ç½®</span></span></code></pre><div class="line-numbers" aria-hidden="true" style="counter-reset:line-number 0;"><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div></div></div><p>å¯ä»¥çœ‹åˆ°è¿™é‡ŒåŠ è½½äº†å…±äº«çš„seataé…ç½®ã€‚</p><p>ç„¶åæ”¹é€ application.yamlæ–‡ä»¶ï¼Œå†…å®¹å¦‚ä¸‹ï¼š</p><div class="language-yaml line-numbers-mode" data-highlighter="shiki" data-ext="yaml" data-title="yaml" style="--shiki-light:#383A42;--shiki-dark:#abb2bf;--shiki-light-bg:#FAFAFA;--shiki-dark-bg:#282c34;"><pre class="shiki shiki-themes one-light one-dark-pro vp-code"><code><span class="line"><span style="--shiki-light:#E45649;--shiki-dark:#E06C75;">server</span><span style="--shiki-light:#383A42;--shiki-dark:#ABB2BF;">:</span></span>
<span class="line"><span style="--shiki-light:#E45649;--shiki-dark:#E06C75;">port</span><span style="--shiki-light:#383A42;--shiki-dark:#ABB2BF;">: </span><span style="--shiki-light:#986801;--shiki-dark:#D19A66;">8085</span></span>
<span class="line"><span style="--shiki-light:#E45649;--shiki-dark:#E06C75;">feign</span><span style="--shiki-light:#383A42;--shiki-dark:#ABB2BF;">:</span></span>
<span class="line"><span style="--shiki-light:#E45649;--shiki-dark:#E06C75;">okhttp</span><span style="--shiki-light:#383A42;--shiki-dark:#ABB2BF;">:</span></span>
<span class="line"><span style="--shiki-light:#E45649;--shiki-dark:#E06C75;">enabled</span><span style="--shiki-light:#383A42;--shiki-dark:#ABB2BF;">: </span><span style="--shiki-light:#986801;--shiki-dark:#D19A66;">true</span><span style="--shiki-light:#A0A1A7;--shiki-dark:#7F848E;--shiki-light-font-style:italic;--shiki-dark-font-style:italic;"> # å¼€å¯OKHttpè¿æ¥æ± æ”¯æŒ</span></span>
<span class="line"><span style="--shiki-light:#E45649;--shiki-dark:#E06C75;">sentinel</span><span style="--shiki-light:#383A42;--shiki-dark:#ABB2BF;">:</span></span>
<span class="line"><span style="--shiki-light:#E45649;--shiki-dark:#E06C75;">enabled</span><span style="--shiki-light:#383A42;--shiki-dark:#ABB2BF;">: </span><span style="--shiki-light:#986801;--shiki-dark:#D19A66;">true</span><span style="--shiki-light:#A0A1A7;--shiki-dark:#7F848E;--shiki-light-font-style:italic;--shiki-dark-font-style:italic;"> # å¼€å¯Feignå¯¹Sentinelçš„æ•´åˆ</span></span>
<span class="line"><span style="--shiki-light:#E45649;--shiki-dark:#E06C75;">hm</span><span style="--shiki-light:#383A42;--shiki-dark:#ABB2BF;">:</span></span>
<span class="line"><span style="--shiki-light:#E45649;--shiki-dark:#E06C75;">swagger</span><span style="--shiki-light:#383A42;--shiki-dark:#ABB2BF;">:</span></span>
<span class="line"><span style="--shiki-light:#E45649;--shiki-dark:#E06C75;">title</span><span style="--shiki-light:#383A42;--shiki-dark:#ABB2BF;">: </span><span style="--shiki-light:#50A14F;--shiki-dark:#98C379;">äº¤æ˜“æœåŠ¡æ¥å£æ–‡æ¡£</span></span>
<span class="line"><span style="--shiki-light:#E45649;--shiki-dark:#E06C75;">package</span><span style="--shiki-light:#383A42;--shiki-dark:#ABB2BF;">: </span><span style="--shiki-light:#50A14F;--shiki-dark:#98C379;">com.hmall.trade.controller</span></span>
<span class="line"><span style="--shiki-light:#E45649;--shiki-dark:#E06C75;">db</span><span style="--shiki-light:#383A42;--shiki-dark:#ABB2BF;">:</span></span>
<span class="line"><span style="--shiki-light:#E45649;--shiki-dark:#E06C75;">database</span><span style="--shiki-light:#383A42;--shiki-dark:#ABB2BF;">: </span><span style="--shiki-light:#50A14F;--shiki-dark:#98C379;">hm-trade</span></span></code></pre><div class="line-numbers" aria-hidden="true" style="counter-reset:line-number 0;"><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div></div></div><p>å‚è€ƒä¸Šè¿°åŠæ³•åˆ†åˆ«æ”¹é€ <code>hm-cart</code>å’Œ<code>hm-item</code>ä¸¤ä¸ªå¾®æœåŠ¡æ¨¡å—ã€‚</p><h3 id="_2-3-3-æ·»åŠ æ•°æ®åº“è¡¨" tabindex="-1"><a class="header-anchor" href="#_2-3-3-æ·»åŠ æ•°æ®åº“è¡¨"><span>2.3.3.æ·»åŠ æ•°æ®åº“è¡¨</span></a></h3><p>seataçš„å®¢æˆ·ç«¯åœ¨è§£å†³åˆ†å¸ƒå¼äº‹åŠ¡çš„æ—¶å€™éœ€è¦è®°å½•ä¸€äº›ä¸­é—´æ•°æ®ï¼Œä¿å­˜åœ¨æ•°æ®åº“ä¸­ã€‚å› æ­¤æˆ‘ä»¬è¦å…ˆå‡†å¤‡ä¸€ä¸ªè¿™æ ·çš„è¡¨ã€‚</p><p>å°†è¯¾å‰èµ„æ–™çš„seata-at.sqlåˆ†åˆ«æ–‡ä»¶å¯¼å…¥hm-tradeã€hm-cartã€hm-itemä¸‰ä¸ªæ•°æ®åº“ä¸­ï¼š</p><figure><img src="/assets/1686923038420-542a9108-78d7-49c8-9d35-d8db4a11ae69-CVYB34GO.png" alt="img" tabindex="0" loading="lazy"><figcaption>img</figcaption></figure><p>ç»“æœï¼š</p><figure><img src="/assets/1686923124446-ecd31cc7-b839-4f20-bc44-e29d24305f38-CQJJIfoY.png" alt="img" tabindex="0" loading="lazy"><figcaption>img</figcaption></figure><p>OKï¼Œè‡³æ­¤ä¸ºæ­¢ï¼Œå¾®æœåŠ¡æ•´åˆçš„å·¥ä½œå°±å®Œæˆäº†ã€‚å¯ä»¥å‚è€ƒä¸Šè¿°æ–¹å¼å¯¹<code>hm-item</code>å’Œ<code>hm-cart</code>æ¨¡å—å®Œæˆæ•´åˆæ”¹é€ ã€‚</p><h3 id="_2-3-4-æµ‹è¯•" tabindex="-1"><a class="header-anchor" href="#_2-3-4-æµ‹è¯•"><span>2.3.4.æµ‹è¯•</span></a></h3><p>æ¥ä¸‹æ¥å°±æ˜¯æµ‹è¯•çš„åˆ†å¸ƒå¼äº‹åŠ¡çš„æ—¶å€™äº†ã€‚</p><p>æˆ‘ä»¬æ‰¾åˆ°<code>trade-service</code>æ¨¡å—ä¸‹çš„<code>com.hmall.trade.service.impl.OrderServiceImpl</code>ç±»ä¸­çš„<code>createOrder</code>æ–¹æ³•ï¼Œä¹Ÿå°±æ˜¯ä¸‹å•ä¸šåŠ¡æ–¹æ³•ã€‚</p><p>å°†å…¶ä¸Šçš„<code>@Transactional</code>æ³¨è§£æ”¹ä¸ºSeataæä¾›çš„<code>@GlobalTransactional</code>ï¼š</p><figure><img src="/assets/1686923434027-1082ad9f-59f4-4e21-91cf-54872ed8d820-YD6qQQ2a.png" alt="img" tabindex="0" loading="lazy"><figcaption>img</figcaption></figure><p><code>@GlobalTransactional</code>æ³¨è§£å°±æ˜¯åœ¨æ ‡è®°äº‹åŠ¡çš„èµ·ç‚¹ï¼Œå°†æ¥TMå°±ä¼šåŸºäºè¿™ä¸ªæ–¹æ³•åˆ¤æ–­å…¨å±€äº‹åŠ¡èŒƒå›´ï¼Œåˆå§‹åŒ–å…¨å±€äº‹åŠ¡ã€‚</p><p>æˆ‘ä»¬é‡å¯<code>trade-service</code>ã€<code>item-service</code>ã€<code>cart-service</code>ä¸‰ä¸ªæœåŠ¡ã€‚å†æ¬¡æµ‹è¯•ï¼Œå‘ç°åˆ†å¸ƒå¼äº‹åŠ¡çš„é—®é¢˜è§£å†³äº†ï¼</p><p>é‚£ä¹ˆï¼ŒSeataæ˜¯å¦‚ä½•è§£å†³åˆ†å¸ƒå¼äº‹åŠ¡çš„å‘¢ï¼Ÿ</p><div class="language- line-numbers-mode" data-highlighter="shiki" data-ext="" data-title="" style="--shiki-light:#383A42;--shiki-dark:#abb2bf;--shiki-light-bg:#FAFAFA;--shiki-dark-bg:#282c34;"><pre class="shiki shiki-themes one-light one-dark-pro vp-code"><code><span class="line"><span>1) æ³¨æ„ TtemService ä¸èƒ½æ•è·å¼‚å¸¸;</span></span>
<span class="line"><span>2) é™çº§é€»è¾‘ä¸èƒ½æ•è·å¼‚å¸¸éœ€è¦ æŠ›å‡ºå¼‚å¸¸;</span></span></code></pre><div class="line-numbers" aria-hidden="true" style="counter-reset:line-number 0;"><div class="line-number"></div><div class="line-number"></div></div></div><h2 id="_2-4-xaæ¨¡å¼" tabindex="-1"><a class="header-anchor" href="#_2-4-xaæ¨¡å¼"><span>2.4.XAæ¨¡å¼</span></a></h2><p>Seataæ”¯æŒå››ç§ä¸åŒçš„åˆ†å¸ƒå¼äº‹åŠ¡è§£å†³æ–¹æ¡ˆï¼š</p><ul><li><strong>XA</strong></li><li><strong>TCC</strong></li><li><strong>AT</strong></li><li><strong>SAGA</strong></li></ul><p>è¿™é‡Œæˆ‘ä»¬ä»¥<code>XA</code>æ¨¡å¼å’Œ<code>AT</code>æ¨¡å¼æ¥ç»™å¤§å®¶è®²è§£å…¶å®ç°åŸç†ã€‚</p><p><code>XA</code> è§„èŒƒ æ˜¯<code> X/Open</code> ç»„ç»‡å®šä¹‰çš„åˆ†å¸ƒå¼äº‹åŠ¡å¤„ç†ï¼ˆDTPï¼ŒDistributed Transaction Processingï¼‰æ ‡å‡†ï¼ŒXA`` è§„èŒƒ æè¿°äº†å…¨å±€çš„<code>TM</code> ä¸å±€éƒ¨çš„<code>RM</code>ä¹‹é—´çš„æ¥å£ï¼Œå‡ ä¹æ‰€æœ‰ä¸»æµçš„æ•°æ®åº“éƒ½å¯¹ XA è§„èŒƒ æä¾›äº†æ”¯æŒã€‚</p><h3 id="_2-4-1-ä¸¤é˜¶æ®µæäº¤" tabindex="-1"><a class="header-anchor" href="#_2-4-1-ä¸¤é˜¶æ®µæäº¤"><span>2.4.1.ä¸¤é˜¶æ®µæäº¤</span></a></h3><p>Aæ˜¯è§„èŒƒï¼Œç›®å‰ä¸»æµæ•°æ®åº“éƒ½å®ç°äº†è¿™ç§è§„èŒƒï¼Œå®ç°çš„åŸç†éƒ½æ˜¯åŸºäºä¸¤é˜¶æ®µæäº¤ã€‚</p><p>æ­£å¸¸æƒ…å†µï¼š</p><figure><img src="/assets/1686923769809-f1e43e72-b2bb-42d2-904a-7500bcc6ab47-CANgPpwm.png" alt="img" tabindex="0" loading="lazy"><figcaption>img</figcaption></figure><p>å¼‚å¸¸æƒ…å†µï¼š</p><figure><img src="/assets/1686923788253-e0b62bc6-3a99-4f80-a6a1-b4d0f1c6c281-Dy15qlBK.png" alt="img" tabindex="0" loading="lazy"><figcaption>img</figcaption></figure><p>ä¸€é˜¶æ®µï¼š</p><ul><li>äº‹åŠ¡åè°ƒè€…é€šçŸ¥æ¯ä¸ªäº‹ç‰©å‚ä¸è€…æ‰§è¡Œæœ¬åœ°äº‹åŠ¡</li><li>æœ¬åœ°äº‹åŠ¡æ‰§è¡Œå®ŒæˆåæŠ¥å‘Šäº‹åŠ¡æ‰§è¡ŒçŠ¶æ€ç»™äº‹åŠ¡åè°ƒè€…ï¼Œæ­¤æ—¶äº‹åŠ¡ä¸æäº¤ï¼Œç»§ç»­æŒæœ‰æ•°æ®åº“é”</li></ul><p>äºŒé˜¶æ®µï¼š</p><ul><li>äº‹åŠ¡åè°ƒè€…åŸºäºä¸€é˜¶æ®µçš„æŠ¥å‘Šæ¥åˆ¤æ–­ä¸‹ä¸€æ­¥æ“ä½œ</li><li>å¦‚æœä¸€é˜¶æ®µéƒ½æˆåŠŸï¼Œåˆ™é€šçŸ¥æ‰€æœ‰äº‹åŠ¡å‚ä¸è€…ï¼Œæäº¤äº‹åŠ¡</li><li>å¦‚æœä¸€é˜¶æ®µä»»æ„ä¸€ä¸ªå‚ä¸è€…å¤±è´¥ï¼Œåˆ™é€šçŸ¥æ‰€æœ‰äº‹åŠ¡å‚ä¸è€…å›æ»šäº‹åŠ¡</li></ul><figure><img src="/assets/image-20231125162536798-BuG64WPm.png" alt="image-20231125162536798" tabindex="0" loading="lazy"><figcaption>image-20231125162536798</figcaption></figure><h3 id="_2-4-2-seataçš„xaæ¨¡å‹" tabindex="-1"><a class="header-anchor" href="#_2-4-2-seataçš„xaæ¨¡å‹"><span>2.4.2.Seataçš„XAæ¨¡å‹</span></a></h3><p>Seataå¯¹åŸå§‹çš„XAæ¨¡å¼åšäº†ç®€å•çš„å°è£…å’Œæ”¹é€ ï¼Œä»¥é€‚åº”è‡ªå·±çš„äº‹åŠ¡æ¨¡å‹ï¼ŒåŸºæœ¬æ¶æ„å¦‚å›¾ï¼š</p><figure><img src="/assets/1686923854475-8d08b575-3fa7-45e8-aa2a-ca2225017349-B7qZh1an.png" alt="img" tabindex="0" loading="lazy"><figcaption>img</figcaption></figure><p><code>RM</code>ä¸€é˜¶æ®µçš„å·¥ä½œï¼š</p><ol><li>æ³¨å†Œåˆ†æ”¯äº‹åŠ¡åˆ°<code>TC</code></li><li>æ‰§è¡Œåˆ†æ”¯ä¸šåŠ¡sqlä½†ä¸æäº¤</li><li>æŠ¥å‘Šæ‰§è¡ŒçŠ¶æ€åˆ°<code>TC</code></li></ol><p><code>TC</code>äºŒé˜¶æ®µçš„å·¥ä½œï¼š</p><ol><li><p><code>TC</code>æ£€æµ‹å„åˆ†æ”¯äº‹åŠ¡æ‰§è¡ŒçŠ¶æ€</p></li><li><ol><li>å¦‚æœéƒ½æˆåŠŸï¼Œé€šçŸ¥æ‰€æœ‰RMæäº¤äº‹åŠ¡</li></ol></li><li><p>å¦‚æœæœ‰å¤±è´¥ï¼Œé€šçŸ¥æ‰€æœ‰RMå›æ»šäº‹åŠ¡</p></li></ol><p><code>RM</code>äºŒé˜¶æ®µçš„å·¥ä½œï¼š</p><ul><li>æ¥æ”¶<code>TC</code>æŒ‡ä»¤ï¼Œæäº¤æˆ–å›æ»šäº‹åŠ¡</li></ul><h3 id="_2-4-3-ä¼˜ç¼ºç‚¹" tabindex="-1"><a class="header-anchor" href="#_2-4-3-ä¼˜ç¼ºç‚¹"><span>2.4.3.ä¼˜ç¼ºç‚¹</span></a></h3><p><code>XA</code>æ¨¡å¼çš„ä¼˜ç‚¹æ˜¯ä»€ä¹ˆï¼Ÿ</p><ul><li>äº‹åŠ¡çš„å¼ºä¸€è‡´æ€§ï¼Œæ»¡è¶³ACIDåŸåˆ™</li><li>å¸¸ç”¨æ•°æ®åº“éƒ½æ”¯æŒï¼Œå®ç°ç®€å•ï¼Œå¹¶ä¸”æ²¡æœ‰ä»£ç ä¾µå…¥</li></ul><p><code>XA</code>æ¨¡å¼çš„ç¼ºç‚¹æ˜¯ä»€ä¹ˆï¼Ÿ</p><ul><li>å› ä¸ºä¸€é˜¶æ®µéœ€è¦é”å®šæ•°æ®åº“èµ„æºï¼Œç­‰å¾…äºŒé˜¶æ®µç»“æŸæ‰é‡Šæ”¾ï¼Œæ€§èƒ½è¾ƒå·®</li><li>ä¾èµ–å…³ç³»å‹æ•°æ®åº“å®ç°äº‹åŠ¡</li></ul><h2 id="_2-5-atæ¨¡å¼" tabindex="-1"><a class="header-anchor" href="#_2-5-atæ¨¡å¼"><span>2.5.ATæ¨¡å¼</span></a></h2><p><code>AT</code>æ¨¡å¼åŒæ ·æ˜¯åˆ†é˜¶æ®µæäº¤çš„äº‹åŠ¡æ¨¡å‹ï¼Œä¸è¿‡ç¼ºå¼¥è¡¥äº†<code>XA</code>æ¨¡å‹ä¸­èµ„æºé”å®šå‘¨æœŸè¿‡é•¿çš„ç¼ºé™·ã€‚</p><h3 id="_2-5-1-seataçš„atæ¨¡å‹" tabindex="-1"><a class="header-anchor" href="#_2-5-1-seataçš„atæ¨¡å‹"><span>2.5.1.Seataçš„ATæ¨¡å‹</span></a></h3><p>åŸºæœ¬æµç¨‹å›¾ï¼š</p><figure><img src="/assets/1686924093915-026ea78b-562b-417a-9498-cd815e2e0bde-DzSkkyk6.png" alt="img" tabindex="0" loading="lazy"><figcaption>img</figcaption></figure><p>é˜¶æ®µä¸€<code>RM</code>çš„å·¥ä½œï¼š</p><ul><li>æ³¨å†Œåˆ†æ”¯äº‹åŠ¡</li><li>è®°å½•undo-logï¼ˆæ•°æ®å¿«ç…§ï¼‰</li><li>æ‰§è¡Œä¸šåŠ¡sqlå¹¶æäº¤</li><li>æŠ¥å‘Šäº‹åŠ¡çŠ¶æ€</li></ul><p>é˜¶æ®µäºŒæäº¤æ—¶<code>RM</code>çš„å·¥ä½œï¼š</p><ul><li>åˆ é™¤undo-logå³å¯</li></ul><p>é˜¶æ®µäºŒå›æ»šæ—¶<code>RM</code>çš„å·¥ä½œï¼š</p><ul><li>æ ¹æ®undo-logæ¢å¤æ•°æ®åˆ°æ›´æ–°å‰</li></ul><h3 id="_2-5-2-æµç¨‹æ¢³ç†" tabindex="-1"><a class="header-anchor" href="#_2-5-2-æµç¨‹æ¢³ç†"><span>2.5.2.æµç¨‹æ¢³ç†</span></a></h3><p>æˆ‘ä»¬ç”¨ä¸€ä¸ªçœŸå®çš„ä¸šåŠ¡æ¥æ¢³ç†ä¸‹ATæ¨¡å¼çš„åŸç†ã€‚</p><p>æ¯”å¦‚ï¼Œç°åœ¨åˆä¸€ä¸ªæ•°æ®åº“è¡¨ï¼Œè®°å½•ç”¨æˆ·ä½™é¢ï¼š</p><table><thead><tr><th><strong>id</strong></th><th><strong>money</strong></th></tr></thead><tbody><tr><td>1</td><td>100</td></tr></tbody></table><p>å…¶ä¸­ä¸€ä¸ªåˆ†æ”¯ä¸šåŠ¡è¦æ‰§è¡Œçš„SQLä¸ºï¼š</p><div class="language-sql line-numbers-mode" data-highlighter="shiki" data-ext="sql" data-title="sql" style="--shiki-light:#383A42;--shiki-dark:#abb2bf;--shiki-light-bg:#FAFAFA;--shiki-dark-bg:#282c34;"><pre class="shiki shiki-themes one-light one-dark-pro vp-code"><code><span class="line"><span style="--shiki-light:#A626A4;--shiki-dark:#C678DD;">update</span><span style="--shiki-light:#383A42;--shiki-dark:#ABB2BF;"> tb_account </span><span style="--shiki-light:#A626A4;--shiki-dark:#C678DD;">set</span><span style="--shiki-light:#A626A4;--shiki-dark:#C678DD;"> money</span><span style="--shiki-light:#383A42;--shiki-dark:#56B6C2;"> =</span><span style="--shiki-light:#A626A4;--shiki-dark:#C678DD;"> money</span><span style="--shiki-light:#383A42;--shiki-dark:#ABB2BF;"> - </span><span style="--shiki-light:#986801;--shiki-dark:#D19A66;">10</span><span style="--shiki-light:#A626A4;--shiki-dark:#C678DD;"> where</span><span style="--shiki-light:#383A42;--shiki-dark:#ABB2BF;"> id </span><span style="--shiki-light:#383A42;--shiki-dark:#56B6C2;">=</span><span style="--shiki-light:#986801;--shiki-dark:#D19A66;"> 1</span></span></code></pre><div class="line-numbers" aria-hidden="true" style="counter-reset:line-number 0;"><div class="line-number"></div></div></div><p>ATæ¨¡å¼ä¸‹ï¼Œå½“å‰åˆ†æ”¯äº‹åŠ¡æ‰§è¡Œæµç¨‹å¦‚ä¸‹ï¼š</p><p><strong>ä¸€é˜¶æ®µ</strong>ï¼š</p><ol><li><code>TM</code>å‘èµ·å¹¶æ³¨å†Œå…¨å±€äº‹åŠ¡åˆ°<code>TC</code></li><li><code>TM</code>è°ƒç”¨åˆ†æ”¯äº‹åŠ¡</li><li>åˆ†æ”¯äº‹åŠ¡å‡†å¤‡æ‰§è¡Œä¸šåŠ¡SQL</li><li><code>RM</code>æ‹¦æˆªä¸šåŠ¡SQLï¼Œæ ¹æ®whereæ¡ä»¶æŸ¥è¯¢åŸå§‹æ•°æ®ï¼Œå½¢æˆå¿«ç…§ã€‚</li></ol><div class="language-json line-numbers-mode" data-highlighter="shiki" data-ext="json" data-title="json" style="--shiki-light:#383A42;--shiki-dark:#abb2bf;--shiki-light-bg:#FAFAFA;--shiki-dark-bg:#282c34;"><pre class="shiki shiki-themes one-light one-dark-pro vp-code"><code><span class="line"><span style="--shiki-light:#383A42;--shiki-dark:#ABB2BF;">{</span></span>
<span class="line"><span style="--shiki-light:#E45649;--shiki-dark:#E06C75;">  &quot;id&quot;</span><span style="--shiki-light:#383A42;--shiki-dark:#ABB2BF;">: </span><span style="--shiki-light:#986801;--shiki-dark:#D19A66;">1</span><span style="--shiki-light:#383A42;--shiki-dark:#ABB2BF;">,</span></span>
<span class="line"><span style="--shiki-light:#E45649;--shiki-dark:#E06C75;">  &quot;money&quot;</span><span style="--shiki-light:#383A42;--shiki-dark:#ABB2BF;">: </span><span style="--shiki-light:#986801;--shiki-dark:#D19A66;">100</span></span>
<span class="line"><span style="--shiki-light:#383A42;--shiki-dark:#ABB2BF;">}</span></span></code></pre><div class="line-numbers" aria-hidden="true" style="counter-reset:line-number 0;"><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div></div></div><ol><li><code>RM</code>æ‰§è¡Œä¸šåŠ¡SQLï¼Œæäº¤æœ¬åœ°äº‹åŠ¡ï¼Œé‡Šæ”¾æ•°æ®åº“é”ã€‚æ­¤æ—¶ money = 90</li><li><code>RM</code>æŠ¥å‘Šæœ¬åœ°äº‹åŠ¡çŠ¶æ€ç»™<code>TC</code></li></ol><p><strong>äºŒé˜¶æ®µ</strong>ï¼š</p><ol><li><p><code>TM</code>é€šçŸ¥<code>TC</code>äº‹åŠ¡ç»“æŸ</p></li><li><p><code>TC</code>æ£€æŸ¥åˆ†æ”¯äº‹åŠ¡çŠ¶æ€</p></li><li><ol><li>å¦‚æœéƒ½æˆåŠŸï¼Œåˆ™ç«‹å³åˆ é™¤å¿«ç…§</li></ol></li><li><p>å¦‚æœæœ‰åˆ†æ”¯äº‹åŠ¡å¤±è´¥ï¼Œéœ€è¦å›æ»šã€‚è¯»å–å¿«ç…§æ•°æ®ï¼ˆ{&quot;id&quot;: 1, &quot;money&quot;: 100}ï¼‰ï¼Œå°†å¿«ç…§æ¢å¤åˆ°æ•°æ®åº“ã€‚æ­¤æ—¶æ•°æ®åº“å†æ¬¡æ¢å¤ä¸º100</p></li></ol><p>æµç¨‹å›¾ï¼š</p><figure><img src="/assets/1686924504448-92a828ea-e483-4c83-9f93-0e70aeaecab2-qraPBu0w.png" alt="img" tabindex="0" loading="lazy"><figcaption>img</figcaption></figure><h3 id="_2-5-3-atä¸xaçš„åŒºåˆ«" tabindex="-1"><a class="header-anchor" href="#_2-5-3-atä¸xaçš„åŒºåˆ«"><span>2.5.3.ATä¸XAçš„åŒºåˆ«</span></a></h3><p>ç®€è¿°<code>AT</code>æ¨¡å¼ä¸<code>XA</code>æ¨¡å¼æœ€å¤§çš„åŒºåˆ«æ˜¯ä»€ä¹ˆï¼Ÿ</p><ul><li><code>XA</code>æ¨¡å¼ä¸€é˜¶æ®µä¸æäº¤äº‹åŠ¡ï¼Œé”å®šèµ„æºï¼›<code>AT</code>æ¨¡å¼ä¸€é˜¶æ®µç›´æ¥æäº¤ï¼Œä¸é”å®šèµ„æºã€‚</li><li><code>XA</code>æ¨¡å¼ä¾èµ–æ•°æ®åº“æœºåˆ¶å®ç°å›æ»šï¼›<code>AT</code>æ¨¡å¼åˆ©ç”¨æ•°æ®å¿«ç…§å®ç°æ•°æ®å›æ»šã€‚</li><li><code>XA</code>æ¨¡å¼å¼ºä¸€è‡´ï¼›<code>AT</code>æ¨¡å¼æœ€ç»ˆä¸€è‡´</li></ul><p>å¯è§ï¼ŒATæ¨¡å¼ä½¿ç”¨èµ·æ¥æ›´åŠ ç®€å•ï¼Œæ— ä¸šåŠ¡ä¾µå…¥ï¼Œæ€§èƒ½æ›´å¥½ã€‚å› æ­¤ä¼ä¸š90%çš„åˆ†å¸ƒå¼äº‹åŠ¡éƒ½å¯ä»¥ç”¨ATæ¨¡å¼æ¥è§£å†³ã€‚</p><h1 id="_3-ç»ƒä¹ " tabindex="-1"><a class="header-anchor" href="#_3-ç»ƒä¹ "><span>3.ç»ƒä¹ </span></a></h1><h2 id="_3-1-ç¼–å†™é™çº§é€»è¾‘" tabindex="-1"><a class="header-anchor" href="#_3-1-ç¼–å†™é™çº§é€»è¾‘"><span>3.1.ç¼–å†™é™çº§é€»è¾‘</span></a></h2><p>ç»™é»‘é©¬å•†åŸä¸­ç°æœ‰çš„FeignClientéƒ½ç¼–å†™å¯¹åº”çš„é™çº§é€»è¾‘ï¼Œå¹¶ä¸”æ”¹é€ é¡¹ç›®ä¸­æ¯ä¸€ä¸ªå¾®æœåŠ¡ï¼Œå°†OpenFeignä¸Sentinelæ•´åˆã€‚</p><h2 id="_3-2-è§£å†³åˆ†å¸ƒå¼äº‹åŠ¡" tabindex="-1"><a class="header-anchor" href="#_3-2-è§£å†³åˆ†å¸ƒå¼äº‹åŠ¡"><span>3.2.è§£å†³åˆ†å¸ƒå¼äº‹åŠ¡</span></a></h2><p>é™¤äº†ä¸‹å•ä¸šåŠ¡ä»¥å¤–ï¼Œç”¨æˆ·å¦‚æœé€‰æ‹©ä½™é¢æ”¯ä»˜ï¼Œå‰ç«¯ä¼šå°†è¯·æ±‚å‘é€åˆ°pay-serviceæ¨¡å—ã€‚è€Œè¿™ä¸ªæ¨¡å—è¦åšä¸‰ä»¶äº‹æƒ…ï¼š</p><ul><li>ç›´æ¥ä»user-serviceæ¨¡å—è°ƒç”¨æ¥å£ï¼Œæ‰£é™¤ä½™é¢ä»˜æ¬¾</li><li>æ›´æ–°æœ¬åœ°ï¼ˆpay-serviceï¼‰äº¤æ˜“æµæ°´è¡¨çŠ¶æ€</li><li>é€šçŸ¥äº¤æ˜“æœåŠ¡ï¼ˆtrade-serviceï¼‰æ›´æ–°å…¶ä¸­çš„ä¸šåŠ¡è®¢å•çŠ¶æ€</li></ul><p>æµç¨‹å¦‚å›¾ï¼š</p><figure><img src="/assets/1686925193767-d493ad81-af6c-406b-aa46-c0b7e809a604-DMdoJs7M.jpeg" alt="img" tabindex="0" loading="lazy"><figcaption>img</figcaption></figure><p>æ˜¾ç„¶ï¼Œè¿™é‡Œä¹Ÿå­˜åœ¨åˆ†å¸ƒå¼äº‹åŠ¡é—®é¢˜ã€‚</p><p>å¯¹åº”çš„é¡µé¢å¦‚ä¸‹ï¼š</p><figure><img src="/assets/1686975942847-6f54d092-e23b-438f-8558-e4dea0393be3-CTR_7wB1.png" alt="img" tabindex="0" loading="lazy"><figcaption>img</figcaption></figure><p>å½“æˆ‘ä»¬æäº¤è®¢å•æˆåŠŸåï¼Œè¿›å…¥æ”¯ä»˜é¡µé¢ï¼Œé€‰æ‹©ä½™é¢æ”¯ä»˜ï¼Œè¾“å…¥å¯†ç åç‚¹å‡»ç¡®è®¤æ”¯ä»˜å³å¯ã€‚</p><p>å‰ç«¯ä¼šæäº¤æ”¯ä»˜è¯·æ±‚ï¼Œä¸šåŠ¡æ¥å£çš„å…¥å£åœ¨<code>com.hmall.pay.controller.PayController</code>ç±»çš„<code>tryPayOrderByBalance</code>æ–¹æ³•ï¼š</p><figure><img src="/assets/1686976080726-aa2f7e5c-8261-4b95-b59b-8934b11a4db9-CpSOXQPL.png" alt="img" tabindex="0" loading="lazy"><figcaption>img</figcaption></figure><p>å¯¹åº”çš„serviceæ–¹æ³•å¦‚ä¸‹ï¼š</p><div class="language-java line-numbers-mode" data-highlighter="shiki" data-ext="java" data-title="java" style="--shiki-light:#383A42;--shiki-dark:#abb2bf;--shiki-light-bg:#FAFAFA;--shiki-dark-bg:#282c34;"><pre class="shiki shiki-themes one-light one-dark-pro vp-code"><code><span class="line"><span style="--shiki-light:#383A42;--shiki-dark:#ABB2BF;">@</span><span style="--shiki-light:#A626A4;--shiki-dark:#E5C07B;">Override</span></span>
<span class="line"><span style="--shiki-light:#383A42;--shiki-dark:#ABB2BF;">@</span><span style="--shiki-light:#A626A4;--shiki-dark:#E5C07B;">Transactional</span></span>
<span class="line"><span style="--shiki-light:#A626A4;--shiki-dark:#C678DD;">public</span><span style="--shiki-light:#A626A4;--shiki-dark:#C678DD;"> void</span><span style="--shiki-light:#4078F2;--shiki-dark:#61AFEF;"> tryPayOrderByBalance</span><span style="--shiki-light:#383A42;--shiki-dark:#E06C75;">(</span><span style="--shiki-light:#C18401;--shiki-dark:#E5C07B;">PayOrderDTO</span><span style="--shiki-light:#383A42;--shiki-dark:#E06C75;"> payOrderDTO) {</span></span>
<span class="line"><span style="--shiki-light:#A0A1A7;--shiki-dark:#7F848E;--shiki-light-font-style:italic;--shiki-dark-font-style:italic;">// 1.æŸ¥è¯¢æ”¯ä»˜å•</span></span>
<span class="line"><span style="--shiki-light:#C18401;--shiki-dark:#E5C07B;">PayOrder</span><span style="--shiki-light:#E45649;--shiki-dark:#E06C75;"> po </span><span style="--shiki-light:#383A42;--shiki-dark:#56B6C2;">=</span><span style="--shiki-light:#4078F2;--shiki-dark:#61AFEF;"> getById</span><span style="--shiki-light:#383A42;--shiki-dark:#E06C75;">(</span><span style="--shiki-light:#E45649;--shiki-dark:#E5C07B;">payOrderDTO</span><span style="--shiki-light:#383A42;--shiki-dark:#ABB2BF;">.</span><span style="--shiki-light:#4078F2;--shiki-dark:#61AFEF;">getId</span><span style="--shiki-light:#383A42;--shiki-dark:#ABB2BF;">()</span><span style="--shiki-light:#383A42;--shiki-dark:#E06C75;">)</span><span style="--shiki-light:#383A42;--shiki-dark:#ABB2BF;">;</span></span>
<span class="line"><span style="--shiki-light:#A0A1A7;--shiki-dark:#7F848E;--shiki-light-font-style:italic;--shiki-dark-font-style:italic;">// 2.åˆ¤æ–­çŠ¶æ€</span></span>
<span class="line"><span style="--shiki-light:#A626A4;--shiki-dark:#C678DD;">if</span><span style="--shiki-light:#383A42;--shiki-dark:#E06C75;">(</span><span style="--shiki-light:#383A42;--shiki-dark:#56B6C2;">!</span><span style="--shiki-light:#E45649;--shiki-dark:#E5C07B;">PayStatus</span><span style="--shiki-light:#383A42;--shiki-dark:#ABB2BF;">.</span><span style="--shiki-light:#E45649;--shiki-dark:#E5C07B;">WAIT_BUYER_PAY</span><span style="--shiki-light:#383A42;--shiki-dark:#ABB2BF;">.</span><span style="--shiki-light:#4078F2;--shiki-dark:#61AFEF;">equalsValue</span><span style="--shiki-light:#383A42;--shiki-dark:#ABB2BF;">(</span><span style="--shiki-light:#E45649;--shiki-dark:#E5C07B;">po</span><span style="--shiki-light:#383A42;--shiki-dark:#ABB2BF;">.</span><span style="--shiki-light:#4078F2;--shiki-dark:#61AFEF;">getStatus</span><span style="--shiki-light:#383A42;--shiki-dark:#ABB2BF;">())</span><span style="--shiki-light:#383A42;--shiki-dark:#E06C75;">){</span></span>
<span class="line"><span style="--shiki-light:#A0A1A7;--shiki-dark:#7F848E;--shiki-light-font-style:italic;--shiki-dark-font-style:italic;">// è®¢å•ä¸æ˜¯æœªæ”¯ä»˜ï¼ŒçŠ¶æ€å¼‚å¸¸</span></span>
<span class="line"><span style="--shiki-light:#A626A4;--shiki-dark:#C678DD;">throw</span><span style="--shiki-light:#A626A4;--shiki-dark:#C678DD;"> new</span><span style="--shiki-light:#4078F2;--shiki-dark:#61AFEF;"> BizIllegalException</span><span style="--shiki-light:#383A42;--shiki-dark:#E06C75;">(</span><span style="--shiki-light:#50A14F;--shiki-dark:#98C379;">&quot;äº¤æ˜“å·²æ”¯ä»˜æˆ–å…³é—­ï¼&quot;</span><span style="--shiki-light:#383A42;--shiki-dark:#E06C75;">)</span><span style="--shiki-light:#383A42;--shiki-dark:#ABB2BF;">;</span></span>
<span class="line"><span style="--shiki-light:#383A42;--shiki-dark:#E06C75;">}</span></span>
<span class="line"><span style="--shiki-light:#A0A1A7;--shiki-dark:#7F848E;--shiki-light-font-style:italic;--shiki-dark-font-style:italic;">// 3.å°è¯•æ‰£å‡ä½™é¢</span></span>
<span class="line"><span style="--shiki-light:#E45649;--shiki-dark:#E5C07B;">userClient</span><span style="--shiki-light:#383A42;--shiki-dark:#ABB2BF;">.</span><span style="--shiki-light:#4078F2;--shiki-dark:#61AFEF;">deductMoney</span><span style="--shiki-light:#383A42;--shiki-dark:#ABB2BF;">(</span><span style="--shiki-light:#E45649;--shiki-dark:#E5C07B;">payOrderDTO</span><span style="--shiki-light:#383A42;--shiki-dark:#ABB2BF;">.</span><span style="--shiki-light:#4078F2;--shiki-dark:#61AFEF;">getPw</span><span style="--shiki-light:#383A42;--shiki-dark:#ABB2BF;">(), </span><span style="--shiki-light:#E45649;--shiki-dark:#E5C07B;">po</span><span style="--shiki-light:#383A42;--shiki-dark:#ABB2BF;">.</span><span style="--shiki-light:#4078F2;--shiki-dark:#61AFEF;">getAmount</span><span style="--shiki-light:#383A42;--shiki-dark:#ABB2BF;">());</span></span>
<span class="line"><span style="--shiki-light:#A0A1A7;--shiki-dark:#7F848E;--shiki-light-font-style:italic;--shiki-dark-font-style:italic;">// 4.ä¿®æ”¹æ”¯ä»˜å•çŠ¶æ€</span></span>
<span class="line"><span style="--shiki-light:#A626A4;--shiki-dark:#C678DD;">boolean</span><span style="--shiki-light:#E45649;--shiki-dark:#E06C75;"> success </span><span style="--shiki-light:#383A42;--shiki-dark:#56B6C2;">=</span><span style="--shiki-light:#4078F2;--shiki-dark:#61AFEF;"> markPayOrderSuccess</span><span style="--shiki-light:#383A42;--shiki-dark:#E06C75;">(</span><span style="--shiki-light:#E45649;--shiki-dark:#E5C07B;">payOrderDTO</span><span style="--shiki-light:#383A42;--shiki-dark:#ABB2BF;">.</span><span style="--shiki-light:#4078F2;--shiki-dark:#61AFEF;">getId</span><span style="--shiki-light:#383A42;--shiki-dark:#ABB2BF;">(),</span><span style="--shiki-light:#E45649;--shiki-dark:#E5C07B;"> LocalDateTime</span><span style="--shiki-light:#383A42;--shiki-dark:#ABB2BF;">.</span><span style="--shiki-light:#4078F2;--shiki-dark:#61AFEF;">now</span><span style="--shiki-light:#383A42;--shiki-dark:#ABB2BF;">()</span><span style="--shiki-light:#383A42;--shiki-dark:#E06C75;">)</span><span style="--shiki-light:#383A42;--shiki-dark:#ABB2BF;">;</span></span>
<span class="line"><span style="--shiki-light:#A626A4;--shiki-dark:#C678DD;">if</span><span style="--shiki-light:#383A42;--shiki-dark:#E06C75;"> (</span><span style="--shiki-light:#383A42;--shiki-dark:#56B6C2;">!</span><span style="--shiki-light:#383A42;--shiki-dark:#E06C75;">success) {</span></span>
<span class="line"><span style="--shiki-light:#A626A4;--shiki-dark:#C678DD;">throw</span><span style="--shiki-light:#A626A4;--shiki-dark:#C678DD;"> new</span><span style="--shiki-light:#4078F2;--shiki-dark:#61AFEF;"> BizIllegalException</span><span style="--shiki-light:#383A42;--shiki-dark:#E06C75;">(</span><span style="--shiki-light:#50A14F;--shiki-dark:#98C379;">&quot;äº¤æ˜“å·²æ”¯ä»˜æˆ–å…³é—­ï¼&quot;</span><span style="--shiki-light:#383A42;--shiki-dark:#E06C75;">)</span><span style="--shiki-light:#383A42;--shiki-dark:#ABB2BF;">;</span></span>
<span class="line"><span style="--shiki-light:#383A42;--shiki-dark:#E06C75;">}</span></span>
<span class="line"><span style="--shiki-light:#A0A1A7;--shiki-dark:#7F848E;--shiki-light-font-style:italic;--shiki-dark-font-style:italic;">// 5.ä¿®æ”¹è®¢å•çŠ¶æ€</span></span>
<span class="line"><span style="--shiki-light:#E45649;--shiki-dark:#E5C07B;">tradeClient</span><span style="--shiki-light:#383A42;--shiki-dark:#ABB2BF;">.</span><span style="--shiki-light:#4078F2;--shiki-dark:#61AFEF;">markOrderPaySuccess</span><span style="--shiki-light:#383A42;--shiki-dark:#ABB2BF;">(</span><span style="--shiki-light:#E45649;--shiki-dark:#E5C07B;">po</span><span style="--shiki-light:#383A42;--shiki-dark:#ABB2BF;">.</span><span style="--shiki-light:#4078F2;--shiki-dark:#61AFEF;">getBizOrderNo</span><span style="--shiki-light:#383A42;--shiki-dark:#ABB2BF;">());</span></span>
<span class="line"><span style="--shiki-light:#383A42;--shiki-dark:#E06C75;">}</span></span></code></pre><div class="line-numbers" aria-hidden="true" style="counter-reset:line-number 0;"><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div></div></div><p>åˆ©ç”¨seataè§£å†³è¿™é‡Œçš„åˆ†å¸ƒå¼äº‹åŠ¡é—®é¢˜ï¼Œå¹¶æ€è€ƒè¿™ä¸ªä¸šåŠ¡å®ç°æœ‰æ²¡æœ‰ä»€ä¹ˆå€¼å¾—æ”¹è¿›çš„åœ°æ–¹</p></div><!----><footer class="vp-page-meta"><div class="vp-meta-item edit-link"><a class="auto-link external-link vp-meta-label" href="https://github.com/udo-bit/udo-bit.github.io/edit/main/src/demo/back-ends/Javaè¿›é˜¶/å¾®æœåŠ¡/æœåŠ¡ä¿æŠ¤ã€åˆ†å¸ƒå¼äº‹åŠ¡.md" aria-label="Edit this page on GitHub" rel="noopener noreferrer" target="_blank"><!--[--><svg xmlns="http://www.w3.org/2000/svg" class="icon edit-icon" viewBox="0 0 1024 1024" fill="currentColor" aria-label="edit icon" name="edit"><path d="M430.818 653.65a60.46 60.46 0 0 1-50.96-93.281l71.69-114.012 7.773-10.365L816.038 80.138A60.46 60.46 0 0 1 859.225 62a60.46 60.46 0 0 1 43.186 18.138l43.186 43.186a60.46 60.46 0 0 1 0 86.373L588.879 565.55l-8.637 8.637-117.466 68.234a60.46 60.46 0 0 1-31.958 11.229z"></path><path d="M728.802 962H252.891A190.883 190.883 0 0 1 62.008 771.98V296.934a190.883 190.883 0 0 1 190.883-192.61h267.754a60.46 60.46 0 0 1 0 120.92H252.891a69.962 69.962 0 0 0-69.098 69.099V771.98a69.962 69.962 0 0 0 69.098 69.098h475.911A69.962 69.962 0 0 0 797.9 771.98V503.363a60.46 60.46 0 1 1 120.922 0V771.98A190.883 190.883 0 0 1 728.802 962z"></path></svg><!--]-->Edit this page on GitHub<!----></a></div><div class="vp-meta-item git-info"><div class="update-time"><span class="vp-meta-label">Last update: </span><!----></div><div class="contributors"><span class="vp-meta-label">Contributors: </span><!--[--><!--[--><span class="vp-meta-info" title="email: enote_gxl@163.com">udo-bit</span><!--]--><!--]--></div></div></footer><nav class="vp-page-nav"><a class="route-link auto-link prev" href="/demo/back-ends/Java%E8%BF%9B%E9%98%B6/%E5%BE%AE%E6%9C%8D%E5%8A%A1/%E5%BE%AE%E6%9C%8D%E5%8A%A102.html" aria-label="å¾®æœåŠ¡ç½‘å…³"><div class="hint"><span class="arrow start"></span>Prev</div><div class="link"><span class="font-icon icon iconfont icon-code" style=""></span>å¾®æœåŠ¡ç½‘å…³</div></a><a class="route-link auto-link next" href="/demo/back-ends/Java%E8%BF%9B%E9%98%B6/%E5%BE%AE%E6%9C%8D%E5%8A%A1/%E5%BE%AE%E6%9C%8D%E5%8A%A1%E8%BF%9B%E9%98%B6.html" aria-label="å¾®æœåŠ¡è¿›é˜¶"><div class="hint">Next<span class="arrow end"></span></div><div class="link">å¾®æœåŠ¡è¿›é˜¶<span class="font-icon icon iconfont icon-code" style=""></span></div></a></nav><!----><!----><!--]--></main><!--]--><footer class="vp-footer-wrapper"><div class="vp-footer">æœ¬ç«™å†…å®¹ä»…ä¾›äº¤æµå­¦ä¹ ä½¿ç”¨ï¼Œä¸æ„æˆä»»ä½•å†³ç­–å»ºè®®ï¼Œå¦‚æœ‰ä¾µæƒï¼Œç«‹å³åˆ é™¤</div><div class="vp-copyright">Copyright Â© 2024 GXL </div></footer></div><!--]--><!--[--><!----><!--]--><!--]--></div>
    <script type="module" src="/assets/app-B3Z58FXn.js" defer></script>
  </body>
</html>
